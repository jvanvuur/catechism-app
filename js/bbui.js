bb={scroller:null,screens:[],dropdownScrollers:[],windowListeners:[],documentListeners:[],transparentPixel:"data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",imageList:null,activityIndicator:null,fileInput:null,button:null,scrollPanel:null,bbmBubble:null,dropdown:null,textInput:null,roundPanel:null,grid:null,pillButtons:null,labelControlContainers:null,slider:null,radio:null,progress:null,checkbox:null,toggle:null,init:function(e){if(e){for(var t in e)bb.options[t]=e[t]}if(window.blackberry&&blackberry.system&&blackberry.system.event&&blackberry.system.event.onHardwareKey){if(bb.options.onbackkey){blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.options.onbackkey)}else{blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.popScreen)}}bb.device.isRipple=navigator.userAgent.indexOf("Ripple")>=0||window.tinyHippos;bb.device.isPlayBook=navigator.userAgent.indexOf("PlayBook")>=0||window.innerWidth==1024&&window.innerHeight==600||window.innerWidth==600&&window.innerHeight==1024;if(bb.device.isPlayBook&&bb.options.bb10ForPlayBook){bb.device.isBB10=true}else{bb.device.isBB10=navigator.userAgent.indexOf("BB10")>=0}bb.device.isBB7=navigator.userAgent.indexOf("7.0.0")>=0||navigator.userAgent.indexOf("7.1.0")>=0;bb.device.isBB6=navigator.userAgent.indexOf("6.0.0")>=0;bb.device.isBB5=navigator.userAgent.indexOf("5.0.0")>=0;bb.device.is1024x600=bb.device.isPlayBook;bb.device.is1280x768=window.innerWidth==1280&&window.innerHeight==768||window.innerWidth==768&&window.innerHeight==1280;bb.device.is720x720=window.innerWidth==720&&window.innerHeight==720;bb.device.is1280x720=window.innerWidth==1280&&window.innerHeight==720||window.innerWidth==720&&window.innerHeight==1280;if(bb.device.isRipple){bb.device.isHiRes=window.innerHeight>480||window.innerWidth>480}else{bb.device.isHiRes=screen.width>480||screen.height>480}var n=document.head.querySelectorAll("meta[name=viewport]"),t;for(t=0;t<n.length;t++){try{document.head.removeChild(n[t])}catch(r){}}var i=document.createElement("meta");i.setAttribute("name","viewport");if(bb.device.isBB10&&!bb.device.is1024x600){i.setAttribute("content","initial-scale="+1/window.devicePixelRatio+",user-scalable=no")}else{i.setAttribute("content","initial-scale=1.0,width=device-width,user-scalable=no,target-densitydpi=device-dpi")}document.head.appendChild(i);var s=parseInt(bb.cutHex(bb.options.highlightColor).substring(0,2),16),o=parseInt(bb.cutHex(bb.options.highlightColor).substring(2,4),16),u=parseInt(bb.cutHex(bb.options.highlightColor).substring(4,6),16);bb.options.shades={R:s,G:o,B:u,darkHighlight:"rgb("+(s-120)+", "+(o-120)+", "+(u-120)+")",mediumHighlight:"rgb("+(s-60)+", "+(o-60)+", "+(u-60)+")",darkOutline:"rgb("+(s-32)+", "+(o-32)+", "+(u-32)+")",darkDarkHighlight:"rgb("+(s-140)+", "+(o-140)+", "+(u-140)+")"};if(document.styleSheets&&document.styleSheets.length){try{document.styleSheets[0].insertRule(".bb10Highlight {background-color:"+bb.options.highlightColor+";background-image:none;}",0);document.styleSheets[0].insertRule(".bbProgressHighlight {background-color:#92B43B;background-image:none;}",0);document.styleSheets[0].insertRule(".bb10-button-highlight {color:White;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.shades.darkHighlight+"), to("+bb.options.highlightColor+"));border-color:#53514F;}",0);document.styleSheets[0].insertRule(".pb-button-light-highlight {color:"+bb.options.shades.darkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0);document.styleSheets[0].insertRule(".pb-button-dark-highlight {color:"+bb.options.highlightColor+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0);document.styleSheets[0].insertRule(".bb10Accent {background-color:"+bb.options.shades.darkHighlight+";}",0);document.styleSheets[0].insertRule(".bb10-title-colored {color:white;text-shadow: 0px 2px black;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0);document.styleSheets[0].insertRule(".bb10-title-button-container-colored {color:white;text-shadow: 0px 2px black;border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0);document.styleSheets[0].insertRule(".bb10-title-button-colored {border-color: "+bb.options.shades.darkDarkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.mediumHighlight+"));}",0);document.styleSheets[0].insertRule(".bb10-title-button-colored-highlight {border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0)}catch(r){console.log(r.message)}}bb.screen.controlColor=bb.options.controlsDark?"dark":"light";bb.screen.listColor=bb.options.listsDark?"dark":"light";if(bb.device.isBB10){bb.imageList=_bb10_imageList;bb.activityIndicator=_bb10_activityIndicator;bb.fileInput=_bb10_fileInput;bb.button=_bb10_button;bb.scrollPanel=_bb_PlayBook_10_scrollPanel;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb10_dropdown;bb.textInput=_bb10_textInput;bb.roundPanel=_bb10_roundPanel;bb.grid=_bb10_grid;bb.pillButtons=_bb10_pillButtons;bb.labelControlContainers=_bb10_labelControlContainers;bb.slider=_bb10_slider;bb.radio=_bb10_radio;bb.progress=_bb_progress;bb.checkbox=_bb10_checkbox;bb.toggle=_bb10_toggle}else if(bb.device.isBB5){bb.imageList=_bb_5_6_7_imageList;bb.button=_bb5_button;bb.bbmBubble=_bb_bbmBubble;bb.roundPanel=_bb_5_6_7_roundPanel;bb.pillButtons=_bb5_pillButtons;bb.labelControlContainers=_bb5_labelControlContainers;bb.progress=_bb_progress}else if(bb.device.isPlayBook){bb.imageList=_bbPlayBook_imageList;bb.button=_bbPlayBook_button;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb_6_7_PlayBook_dropdown;bb.textInput=_bbPlayBook_textInput;bb.pillButtons=_bb_6_7_PlayBook_pillButtons;bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers;bb.progress=_bb_progress;bb.scrollPanel=_bb_PlayBook_10_scrollPanel;bb.roundPanel=_bbPlayBook_roundPanel;bb.activityIndicator=_bbPlayBook_activityIndicator}else{bb.imageList=_bb_5_6_7_imageList;bb.button=_bb_6_7_button;bb.bbmBubble=_bb_bbmBubble;bb.dropdown=_bb_6_7_PlayBook_dropdown;bb.textInput=_bb_6_7_textInput;bb.pillButtons=_bb_6_7_PlayBook_pillButtons;bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers;bb.progress=_bb_progress;bb.roundPanel=_bb_5_6_7_roundPanel}if(bb.device.isBB10&&!bb.device.isPlayBook&&!bb.device.isRipple&&!bb.device.is720x720){blackberry.event.addEventListener("keyboardOpening",function(){if(bb.screen.currentScreen.actionBar){bb.screen.currentScreen.actionBar.hide()}});blackberry.event.addEventListener("keyboardOpened",function(){if(bb.screen.currentScreen.actionBar){if(bb.screen.focusedInput){if(bb.screen.focusedInput.container){bb.screen.focusedInput.container.scrollIntoView(false)}else{bb.screen.focusedInput.scrollIntoView(false)}}}});blackberry.event.addEventListener("keyboardClosed",function(){if(bb.screen.currentScreen.actionBar){bb.screen.currentScreen.actionBar.show()}})}},doLoad:function(e){var t=e||document.body;bb.screen.apply(t.querySelectorAll("[data-bb-type=screen]"));bb.style(t);bb.screen.reAdjustHeight()},style:function(e){if(bb.scrollPanel)bb.scrollPanel.apply(e.querySelectorAll("[data-bb-type=scroll-panel]"));if(bb.textInput)bb.textInput.apply(e.querySelectorAll("input[type=text], [type=password], [type=tel], [type=url], [type=email], [type=number], [type=date], [type=time], [type=datetime], [type=month], [type=datetime-local], [type=color], [type=search]"));if(bb.dropdown)bb.dropdown.apply(e.querySelectorAll("select"));if(bb.roundPanel)bb.roundPanel.apply(e.querySelectorAll("[data-bb-type=round-panel]"));if(bb.imageList)bb.imageList.apply(e.querySelectorAll("[data-bb-type=image-list]"));if(bb.grid)bb.grid.apply(e.querySelectorAll("[data-bb-type=grid-layout]"));if(bb.bbmBubble)bb.bbmBubble.apply(e.querySelectorAll("[data-bb-type=bbm-bubble]"));if(bb.pillButtons)bb.pillButtons.apply(e.querySelectorAll("[data-bb-type=pill-buttons]"));if(bb.labelControlContainers)bb.labelControlContainers.apply(e.querySelectorAll("[data-bb-type=label-control-container]"));if(bb.button)bb.button.apply(e.querySelectorAll("[data-bb-type=button]"));if(bb.fileInput)bb.fileInput.apply(e.querySelectorAll("input[type=file]"));if(bb.slider)bb.slider.apply(e.querySelectorAll("input[type=range]"));if(bb.progress)bb.progress.apply(e.querySelectorAll("progress"));if(bb.radio)bb.radio.apply(e.querySelectorAll("input[type=radio]"));if(bb.activityIndicator)bb.activityIndicator.apply(e.querySelectorAll("[data-bb-type=activity-indicator]"));if(bb.checkbox)bb.checkbox.apply(e.querySelectorAll("input[type=checkbox]"));if(bb.toggle)bb.toggle.apply(e.querySelectorAll("[data-bb-type=toggle]"))},device:{isHiRes:false,isBB5:false,isBB6:false,isBB7:false,isBB10:false,isPlayBook:false,isRipple:false,is1024x600:false,is1280x768:false,is720x720:false,is1280x720:false},options:{onbackkey:null,onscreenready:null,ondomready:null,controlsDark:false,coloredTitleBar:false,listsDark:false,highlightColor:"#00A8DF",bb10ForPlayBook:false},loadScreen:function(url,id,popping,guid,params,screenRecord){var xhr=new XMLHttpRequest,container=document.createElement("div"),_reduce=function(e,t,n){var r=n;Array.prototype.forEach.apply(e,[function(e){r=t(r,e)}]);return r},whereScript=function(e,t){if(t.nodeName==="SCRIPT"){e.push(t)}return _reduce(t.childNodes,whereScript,e)},i,scripts=[],newScriptTags=[];xhr.open("GET",url,false);xhr.send();container.setAttribute("id",guid);container.innerHTML=xhr.responseText;scripts=_reduce(container.childNodes,whereScript,[]),container.scriptIds=[];if(screenRecord){screenRecord.scripts=[]}scripts.forEach(function(script){var scriptTag=document.createElement("script"),type=script.getAttribute("type");if(!type||type.toLowerCase()=="text/javascript"){if(script.text){eval(script.text);return}var scriptGuid=bb.guidGenerator();if(screenRecord){screenRecord.scripts.push({id:scriptGuid,onunload:script.getAttribute("onunload")})}else{container.scriptIds.push({id:scriptGuid,onunload:script.getAttribute("onunload")})}scriptTag.setAttribute("type","text/javascript");scriptTag.setAttribute("src",script.getAttribute("src"));scriptTag.setAttribute("id",scriptGuid);newScriptTags.push(scriptTag);script.parentNode.removeChild(script)}});container.getElementById=function(e,t){var n=null;if(!t){t=this}if(t.getAttribute("id")==e)return t;for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];if(i.nodeType==1){n=this.getElementById(e,i);if(n)break}}return n};bb.screen.scriptCounter=0;bb.screen.totalScripts=newScriptTags.length;for(var i=0;i<newScriptTags.length;i++){document.body.appendChild(newScriptTags[i]);newScriptTags[i].onload=function(){bb.screen.scriptCounter++;if(bb.screen.scriptCounter==bb.screen.totalScripts){bb.initContainer(container,id,popping,params)}}}if(bb.screen.totalScripts===0){setTimeout(function(){bb.initContainer(container,id,popping,params)},0)}return container},initContainer:function(e,t,n,r){if(bb.options.onscreenready){bb.options.onscreenready(e,t,r)}bb.doLoad(e);document.body.appendChild(e);var i=e.querySelectorAll("[data-bb-type=screen]"),s,o,u=null,a;if(i.length>0){i=i[0];if(n){var f=bb.screens[bb.screens.length-1].container,l;s=f.querySelectorAll("[data-bb-type=screen]")[0];l=s.hasAttribute("data-bb-effect")?s.getAttribute("data-bb-effect"):undefined;if(l){i.style["z-index"]="-100";if(l.toLowerCase()=="fade"){s.setAttribute("data-bb-effect","fade-out")}else if(l.toLowerCase()=="slide-left"){s.setAttribute("data-bb-effect","slide-out-right")}else if(l.toLowerCase()=="slide-right"){s.setAttribute("data-bb-effect","slide-out-left")}else if(l.toLowerCase()=="slide-up"){s.setAttribute("data-bb-effect","slide-out-down")}else if(l.toLowerCase()=="slide-down"){s.setAttribute("data-bb-effect","slide-out-up")}}}else{s=i}s.popping=n;if(s.hasAttribute("data-bb-effect")){if(!bb.device.isBB5&&!bb.device.isBB6){o=s.getAttribute("data-bb-effect");if(o){o=o.toLowerCase();if(o=="fade"){u=bb.screen.fadeIn}else if(o=="fade-out"){u=bb.screen.fadeOut}else if(!bb.device.isBB7){switch(o){case"slide-left":u=bb.screen.slideLeft;break;case"slide-out-left":u=bb.screen.slideOutLeft;break;case"slide-right":u=bb.screen.slideRight;break;case"slide-out-right":u=bb.screen.slideOutRight;break;case"slide-up":u=bb.screen.slideUp;break;case"slide-out-up":u=bb.screen.slideOutUp;break;case"slide-down":u=bb.screen.slideDown;break;case"slide-out-down":u=bb.screen.slideOutDown;break}}s.style.display="inline";if(u){a=document.createElement("div");s.overlay=a;a.setAttribute("class","bb-transition-overlay");document.body.appendChild(a);bb.screen.animating=true;s.doEndAnimation=function(){var t=this.style;bb.screen.animating=false;document.body.removeChild(this.overlay);this.overlay=null;if(bb.screens.length>1){if(!this.popping){bb.removePreviousScreenFromDom();t.left="";t.right="";t.top="";t.bottom="";t.width="";t.height="";t["-webkit-animation-name"]="";t["-webkit-animation-duration"]="";t["-webkit-animation-timing-function"]="";t["-webkit-transform"]=""}else{this.style.display="none";this.parentNode.parentNode.removeChild(this.parentNode);bb.screens.pop();i.style["z-index"]="";bb.screens[bb.screens.length-1].container=e}}else if(bb.screens.length<=1){t.left="";t.right="";t.top="";t.bottom="";t.width="";t.height="";t["-webkit-animation-name"]="";t["-webkit-animation-duration"]="";t["-webkit-animation-timing-function"]="";t["-webkit-transform"]=""}this.removeEventListener("webkitAnimationEnd",this.doEndAnimation);bb.createScreenScroller(i)};s.doEndAnimation=s.doEndAnimation.bind(s);s.addEventListener("webkitAnimationEnd",s.doEndAnimation);u.call(this,s)}}}}}if(bb.options.ondomready){bb.domready.container=e;bb.domready.id=t;bb.domready.params=r;setTimeout(bb.domready.fire,1)}else{setTimeout(bb.domready.fireEventsOnly,1)}if(!u){if(!n){if((bb.device.isBB5||bb.device.isBB6||bb.device.isBB7)&&bb.screens.length>0){bb.removePreviousScreenFromDom()}else if(bb.screens.length>1){bb.removePreviousScreenFromDom()}}else if(n){i.style["z-index"]="";var c=bb.screens[bb.screens.length-1].container;c.parentNode.removeChild(c);bb.screens.pop();bb.screens[bb.screens.length-1].container=e}bb.createScreenScroller(i)}},domready:{container:null,id:null,params:null,fire:function(){if(bb.screen.animating){setTimeout(bb.domready.fire,250);return}var e=document.createEvent("Events");e.initEvent("bbuidomready",true,true);document.dispatchEvent(e);e=document.createEvent("Events");e.initEvent("bbuilistready",true,true);document.dispatchEvent(e);bb.options.ondomready(bb.domready.container,bb.domready.id,bb.domready.params);bb.domready.container=null;bb.domready.id=null;bb.domready.params=null;e=document.createEvent("Events");e.initEvent("bbuidomprocessed",true,true);document.dispatchEvent(e)},fireEventsOnly:function(){if(bb.screen.animating){setTimeout(bb.domready.fireEventsOnly,250);return}var e=document.createEvent("Events");e.initEvent("bbuidomready",true,true);document.dispatchEvent(e);e=document.createEvent("Events");e.initEvent("bbuilistready",true,true);document.dispatchEvent(e);e=document.createEvent("Events");e.initEvent("bbuidomprocessed",true,true);document.dispatchEvent(e)}},createScreenScroller:function(e){var t=e.bbUIscrollWrapper;if(t){if(bb.device.isPlayBook){var n={hideScrollbar:true,fadeScrollbar:true,onBeforeScrollStart:function(e){var t=e.target;if(t.parentNode&&t.parentNode.getAttribute("class")=="bb-bb10-dropdown-items"){return}while(t.nodeType!=1)t=t.parentNode;if(t.tagName!="SELECT"&&t.tagName!="INPUT"&&t.tagName!="TEXTAREA"&&t.tagName!="AUDIO"&&t.tagName!="VIDEO"){e.preventDefault();var n=document.activeElement;if(n){if(n.tagName=="SELECT"||n.tagName=="INPUT"||n.tagName=="TEXTAREA"||n.tagName=="AUDIO"||n.tagName=="VIDEO"){n.blur()}}}},onScrollEnd:function(e){evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)},onScrollMove:function(t){if(e.onscroll){e.onscroll(t)}evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)}};bb.scroller=new iScroll(t,n)}else if(bb.device.isBB10){bb.scroller=null;t.style["-webkit-overflow-scrolling"]="-blackberry-touch";t.onscroll=function(t){if(e.onscroll){e.onscroll(t)}}}}},clearScrollers:function(){var e;for(var t=bb.dropdownScrollers-1;t>-1;t--){e=bb.dropdownScrollers[t];e.destroy();e=null;bb.dropdownScrollers.pop()}},removeTopMostScreenFromDom:function(){var e=bb.screens.length,t=document.getElementById(bb.screens[e-1].guid);document.body.removeChild(t)},removePreviousScreenFromDom:function(){var e=bb.screens.length,t,n;if(e==1)return;n=e>1?2:1;t=document.getElementById(bb.screens[e-n].guid);if(t){document.body.removeChild(t)}},pushScreen:function(e,t,n){bb.removeLoadedScripts();bb.menuBar.clearMenu();var r=bb.screens.length,i;if(r>0){bb.screen.overlay=null;bb.screen.tabOverlay=null;bb.clearScrollers();if(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7){i=document.getElementById(bb.screens[r-1].guid);i.style.display="none";window.scroll(0,0)}}var s=bb.guidGenerator(),o=bb.loadScreen(e,t,false,s,n);bb.screens.push({id:t,url:e,scripts:o.scriptIds,container:o,guid:s,params:n})},popScreen:function(){var e=bb.screens.length,t,n;if(e>1){bb.removeLoadedScripts();bb.clearScrollers();bb.menuBar.clearMenu();bb.screen.overlay=null;bb.screen.tabOverlay=null;for(t=0;t<bb.windowListeners.length;t++){n=bb.windowListeners[t];window.removeEventListener(n.name,n.eventHandler,false)}bb.windowListners=[];for(t=0;t<bb.documentListeners.length;t++){n=bb.documentListeners[t];document.removeEventListener(n.name,n.eventHandler,false)}bb.documentListeners=[];var r=bb.screens[e-2],i=bb.loadScreen(r.url,r.id,true,r.guid,r.params,r);if(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7){window.scroll(0,0)}}else{if(blackberry){blackberry.app.exit()}}},removeLoadedScripts:function(){var numItems=bb.screens.length;if(numItems>0){var currentStackItem=bb.screens[numItems-1],current=document.getElementById(currentStackItem.guid);for(var i=0;i<currentStackItem.scripts.length;i++){var bbScript=currentStackItem.scripts[i],scriptTag=document.getElementById(bbScript.id);if(bbScript.onunload){eval(bbScript.onunload)}if(scriptTag){document.body.removeChild(scriptTag)}}}},innerHeight:function(){if(bb.device.isPlayBook){if(!window.orientation){return window.innerHeight}else if(window.orientation==0||window.orientation==180){return 600}else if(window.orientation==-90||window.orientation==90){return 1024}}else{return window.innerHeight}},innerWidth:function(){if(bb.device.isPlayBook){if(!window.orientation){return window.innerWidth}else if(window.orientation==0||window.orientation==180){return 1024}else if(window.orientation==-90||window.orientation==90){return 600}}else{return window.innerWidth}},getOrientation:function(){if(bb.device.is720x720)return"portrait";return window.innerWidth>window.innerHeight?"landscape":"portrait"},cutHex:function(e){return e.charAt(0)=="#"?e.substring(1,7):e},guidGenerator:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()+e()+e()},refresh:function(){if(bb.scroller){bb.scroller.refresh()}},isScrolledIntoView:function(e){var t=0,n=e;if(n.offsetParent){do{t+=n.offsetTop;if(n.scrollTop){t-=n.scrollTop}if(bb.device.isPlayBook){if(n.scroller){t+=n.scroller.y}else if(n.bbUIscrollWrapper){t+=bb.scroller.y}}}while(n=n.offsetParent)}return t<bb.innerHeight()}};Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}};bb.actionBar={apply:function(e,t){var n=e.querySelectorAll("[data-bb-type=action]"),r=[],i=[],s=[],o=[],u,a,f,l,c,h,p,d,v=e,m,g="1280x768-1280x720",y,b,w=bb.getOrientation();if(bb.device.is1024x600){g="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){g="1280x768-1280x720"}else if(bb.device.is720x720){g="720x720"}e.res=g;e.isVisible=true;e.setAttribute("class","bb-bb10-action-bar-"+g+" bb-bb10-action-bar-"+w+"-"+g+" bb-bb10-action-bar-dark");e.mainBarTabs=s;e.mainBarButtons=r;e.overflowButtons=i;e.overflowTabs=o;for(b=0;b<n.length;b++){u=n[b];if(u.hasAttribute("data-bb-style")){c=u.getAttribute("data-bb-style").toLowerCase();if(c=="button"){if(u.hasAttribute("data-bb-overflow")&&u.getAttribute("data-bb-overflow").toLowerCase()=="true"){i.push(u)}else{r.push(u)}}else{if(u.hasAttribute("data-bb-overflow")&&u.getAttribute("data-bb-overflow").toLowerCase()=="true"){o.push(u)}else{s.push(u)}}}}if(e.hasAttribute("data-bb-back-caption")&&e.querySelectorAll("[data-bb-style=tab]").length==0){var E,S,x,T;d=document.createElement("div");d.setAttribute("class","bb-bb10-action-bar-back-button-"+g+" bb-bb10-action-bar-back-button-"+g+"-dark bb-bb10-action-bar-back-button-"+w+"-"+g);d.onclick=function(){window.setTimeout(bb.popScreen,0)};e.backBtn=d;E=document.createElement("div");E.setAttribute("class","bb-bb10-action-bar-back-chevron-"+g+"-dark");d.appendChild(E);S=document.createElement("div");S.setAttribute("class","bb-bb10-action-bar-back-text-"+g+" bb-bb10-action-bar-back-text-"+w+"-"+g);S.innerHTML=e.getAttribute("data-bb-back-caption");d.backCaption=S;d.appendChild(S);T=document.createElement("div");T.setAttribute("class","bb-bb10-action-bar-back-button-highlight");T.style["position"]="absolute";T.style["width"]=bb.device.is1024x600?"4px":"8px";T.style["background-color"]="transparent";d.updateHighlightDimensions=function(e){if(bb.device.is1024x600){T.style["height"]=e=="portrait"?"57px":"57px";T.style["top"]="8px"}else if(bb.device.is1280x768||bb.device.is1280x720){T.style["height"]=e=="portrait"?"110px":"70px";T.style["top"]="15px"}else if(bb.device.is720x720){T.style["height"]="78px";T.style["top"]="15px"}else{T.style["height"]=e=="portrait"?"110px":"110px";T.style["top"]="15px"}};d.updateHighlightDimensions=d.updateHighlightDimensions.bind(d);d.backHighlight=T;d.updateHighlightDimensions(w);d.appendChild(T);d.ontouchstart=function(){this.backHighlight.style["background-color"]=bb.options.highlightColor};d.ontouchend=function(){this.backHighlight.style["background-color"]="transparent"};x=document.createElement("div");x.setAttribute("class","bb-bb10-action-bar-back-slash-"+g+"-dark bb-bb10-action-bar-back-slash-"+w+"-"+g);d.backslash=x;var N=document.createElement("table"),C=document.createElement("tr"),k=document.createElement("td");e.appendChild(N);N.appendChild(C);N.setAttribute("class","bb-bb10-action-bar-table");if(bb.device.is1024x600){k.style.width=bb.actionBar.getBackBtnWidth(d)-16+"px"}else{k.style.width=bb.actionBar.getBackBtnWidth(d)-33+"px"}C.appendChild(k);d.innerChevron=k;k.appendChild(d);k=document.createElement("td");k.style.width=bb.device.is1024x600?16+"px":33+"px";x.style["background-color"]=bb.options.shades.darkOutline;C.appendChild(k);k.appendChild(x);k=document.createElement("td");k.style.width="100%";C.appendChild(k);v=k;for(b=0;b<n.length;b++){u=n[b];k.appendChild(u)}}if(o.length>0){e.tabOverflowMenu=bb.tabOverflow.create(t);e.tabOverflowMenu.actionBar=e;u=document.createElement("div");u.actionBar=e;u.tabOverflowMenu=e.tabOverflowMenu;u.setAttribute("data-bb-type","action");u.setAttribute("data-bb-style","tab");u.setAttribute("data-bb-img","overflow");u.onclick=function(){this.tabOverflowMenu.show()};e.tabOverflowBtn=u;v.insertBefore(u,v.firstChild)}if(i.length>0){e.menu=bb.contextMenu.create(t);e.appendChild(e.menu);u=document.createElement("div");u.menu=e.menu;u.setAttribute("data-bb-type","action");u.setAttribute("data-bb-style","button");u.setAttribute("data-bb-img","overflow");u.onclick=function(){this.menu.show()};e.actionOverflowBtn=u;v.appendChild(u)}e.getUsableWidth=function(){return bb.innerWidth()-bb.actionBar.getBackBtnWidth(this.backBtn)-bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)};e.getUsableWidth=e.getUsableWidth.bind(e);e.switchOrientationCSS=function(e){if(e){var t=bb.getOrientation();if(t=="portrait"){e=e.replace("landscape","portrait")}else{e=e.replace("portrait","landscape")}}return e};e.switchOrientationCSS=e.switchOrientationCSS.bind(e);e.reLayoutActionBar=function(e){var t,n,r,i="button",s=0,o=2,u,a=5,f=0,l=0,c=0,h=bb.getOrientation();if(this.actionOverflowBtn)a--;if(this.backBtn)a--;if(this.tabOverflowBtn)a--;for(t=0;t<this.mainBarTabs.length;t++){if(f==a)break;r=this.mainBarTabs[t];if(r.visible==true){f++}}for(t=0;t<this.mainBarButtons.length;t++){if(f==a)break;n=this.mainBarButtons[t];if(n.visible==true){f++}}f=f==0?1:f;s=Math.floor(this.getUsableWidth()/f);u=this.getAttribute("class");u=this.switchOrientationCSS(u);this.setAttribute("class",u);if(this.isVisible){bb.screen.currentScreen.outerScrollArea.style["bottom"]=bb.screen.getActionBarHeight()+"px";if(bb.scroller){bb.scroller.refresh()}}if(this.backBtn){u=this.backBtn.getAttribute("class");u=this.switchOrientationCSS(u);this.backBtn.setAttribute("class",u);this.backBtn.updateHighlightDimensions();u=this.backBtn.backCaption.getAttribute("class");u=this.switchOrientationCSS(u);this.backBtn.backCaption.setAttribute("class",u);u=this.backBtn.backslash.getAttribute("class");u=this.switchOrientationCSS(u);this.backBtn.backslash.setAttribute("class",u);if(bb.device.is1024x600){this.backBtn.innerChevron.style.width=bb.actionBar.getBackBtnWidth(this.backBtn)-16+"px"}else{this.backBtn.innerChevron.style.width=bb.actionBar.getBackBtnWidth(this.backBtn)-33+"px"}}f=0;c=s-2;for(t=0;t<this.mainBarTabs.length;t++){r=this.mainBarTabs[t];if(f<a&&r.visible==true){l+=c;r.style.width=c+"px";r.normal=this.switchOrientationCSS(r.normal);r.highlight=this.switchOrientationCSS(r.highlight);u=r.getAttribute("class");u=this.switchOrientationCSS(u);r.setAttribute("class",u);u=r.display.getAttribute("class");u=this.switchOrientationCSS(u);r.display.setAttribute("class",u);i="tab";f++}else{r.style.display="none";r.visible=false}}c=s-1;for(t=0;t<this.mainBarButtons.length;t++){n=this.mainBarButtons[t];if(f<a&&n.visible==true){l+=c;n.style.width=c+"px";n.highlight.style["width"]=s*.6+"px";n.highlight.style["margin-left"]=s*.2+"px";if(i=="tab"){n.normal="bb-bb10-action-bar-action-"+n.res+" bb-bb10-action-bar-action-"+h+"-"+n.res+" bb-bb10-action-bar-button-dark bb-bb10-action-bar-button-tab-left-"+n.res+"-dark"}else{n.normal="bb-bb10-action-bar-action-"+n.res+" bb-bb10-action-bar-action-"+h+"-"+n.res+" bb-bb10-action-bar-button-dark"}n.setAttribute("class",n.normal);n.normal=this.switchOrientationCSS(n.normal);u=n.getAttribute("class");u=this.switchOrientationCSS(u);n.setAttribute("class",u);i="button";f++}else{n.style.display="none";n.visible=false}}if(this.actionOverflowBtn){if(i=="tab"){this.actionOverflowBtn.normal="bb-bb10-action-bar-action-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-action-"+h+"-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-button-dark bb-bb10-action-bar-button-tab-left-"+this.actionOverflowBtn.res+"-dark"}else{this.actionOverflowBtn.normal="bb-bb10-action-bar-action-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-action-"+h+"-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-button-dark"}this.actionOverflowBtn.style.width=bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-1+"px";this.actionOverflowBtn.highlight.style["width"]=bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)*.6+"px";this.actionOverflowBtn.highlight.style["margin-left"]=bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)*.2+"px";this.actionOverflowBtn.style.float="right";this.actionOverflowBtn.setAttribute("class",this.actionOverflowBtn.normal);this.actionOverflowBtn.normal=this.switchOrientationCSS(this.actionOverflowBtn.normal);u=this.actionOverflowBtn.getAttribute("class");u=this.switchOrientationCSS(u);this.actionOverflowBtn.setAttribute("class",u);u=this.actionOverflowBtn.icon.getAttribute("class");u=this.switchOrientationCSS(u);this.actionOverflowBtn.icon.setAttribute("class",u)}if(this.tabOverflowBtn){this.tabOverflowBtn.style.width=bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)-1+"px";this.tabOverflowBtn.normal=this.switchOrientationCSS(this.tabOverflowBtn.normal);this.tabOverflowBtn.highlight=this.switchOrientationCSS(this.tabOverflowBtn.highlight);u=this.tabOverflowBtn.getAttribute("class");u=this.switchOrientationCSS(u);this.tabOverflowBtn.setAttribute("class",u);u=this.tabOverflowBtn.tabHighlight.getAttribute("class");u=this.switchOrientationCSS(u);this.tabOverflowBtn.tabHighlight.setAttribute("class",u);u=this.tabOverflowBtn.display.getAttribute("class");u=this.switchOrientationCSS(u);this.tabOverflowBtn.display.setAttribute("class",u);this.tabOverflowBtn.icon.normal=this.switchOrientationCSS(this.tabOverflowBtn.icon.normal);u=this.tabOverflowBtn.icon.getAttribute("class");u=this.switchOrientationCSS(u);this.tabOverflowBtn.icon.setAttribute("class",u)}};e.reLayoutActionBar=e.reLayoutActionBar.bind(e);window.addEventListener("orientationchange",e.reLayoutActionBar,false);bb.windowListeners.push({name:"orientationchange",eventHandler:e.reLayoutActionBar});e.setBackCaption=function(e){this.setAttribute("data-bb-back-caption",e);S.innerHTML=e};e.setBackCaption=e.setBackCaption.bind(e);e.setSelectedTab=function(e){if(e.getAttribute("data-bb-style")!="tab")return;bb.actionBar.highlightAction(e);if(e.onclick){e.onclick()}};e.setSelectedTab=e.setSelectedTab.bind(e);e.hide=function(e){if(!this.isVisible)return;this.style.display="none";bb.screen.currentScreen.outerScrollArea.style["bottom"]="0px";this.isVisible=false;if(bb.scroller){bb.scroller.refresh()}};e.hide=e.hide.bind(e);e.show=function(e){if(this.isVisible)return;this.style.display="";bb.screen.currentScreen.outerScrollArea.style["bottom"]=bb.screen.getActionBarHeight()+"px";this.isVisible=true;if(bb.scroller){bb.scroller.refresh()}};e.show=e.show.bind(e);if(o.length>0){var L;for(b=0;b<s.length;b++){u=s[b];if(u.getAttribute("data-bb-img")!="overflow"){L=u.cloneNode(true);L.visibleTab=u;L.res=g;L.actionBar=e;e.tabOverflowMenu.add(L)}}for(b=0;b<o.length;b++){u=o[b];u.res=g;u.actionBar=e;e.tabOverflowMenu.add(u)}}for(b=0;b<i.length;b++){u=i[b];u.res=g;e.menu.add(u)}var A;for(b=0;b<s.length;b++){A=s[b];A.res=g;f=A.innerHTML;A.actionBar=e;A.visible=true;A.innerHTML="";A.normal="bb-bb10-action-bar-action-"+g+" bb-bb10-action-bar-action-"+w+"-"+g+" bb-bb10-action-bar-tab-dark bb-bb10-action-bar-tab-normal-dark";A.highlight=A.normal+" bb-bb10-action-bar-tab-selected-dark";A.setAttribute("class",A.normal);A.visible=true;if(A.hasAttribute("data-bb-visible")&&A.getAttribute("data-bb-visible").toLowerCase()=="false"){A.visible=false}y=document.createElement("img");y.setAttribute("class","bb-bb10-action-bar-icon-"+g);y.setAttribute("src",A.getAttribute("data-bb-img"));A.icon=y;A.appendChild(y);l=document.createElement("div");l.setAttribute("class","bb-bb10-action-bar-action-display-"+g+" bb-bb10-action-bar-action-display-"+w+"-"+g);l.innerHTML=f;A.display=l;A.appendChild(l);if(A.hasAttribute("data-bb-selected")&&A.getAttribute("data-bb-selected").toLowerCase()=="true"){bb.actionBar.highlightAction(A)}A.addEventListener("click",function(e){bb.actionBar.highlightAction(this)},false);A.setCaption=function(e){this.display.innerHTML=e;if(this.actionBar.tabOverflowMenu){var t=this.actionBar.tabOverflowMenu.actions,n,r;for(n=0;n<t.length;n++){r=t[n];if(r.visibleTab==this){r.setCaption(e)}}}};A.setCaption=A.setCaption.bind(A);A.getCaption=function(){return this.display.innerHTML};A.getCaption=A.getCaption.bind(A);A.setImage=function(e){this.icon.setAttribute("src",e);if(this.actionBar.tabOverflowMenu){var t=this.actionBar.tabOverflowMenu.actions,n,r;for(n=0;n<t.length;n++){r=t[n];if(r.visibleTab==this){r.setImage(e)}}}};A.setImage=A.setImage.bind(A);A.getImage=function(){return this.icon.getAttribute("src")};A.getImage=A.getImage.bind(A);A.hide=bb.actionBar.actionHide;A.hide=A.hide.bind(A);A.show=bb.actionBar.actionShow;A.show=A.show.bind(A)}var O;if(e.tabOverflowBtn){O=e.tabOverflowBtn;O.res=g;f=O.innerHTML;O.actionBar=e;O.visible=true;O.innerHTML="";O.normal="bb-bb10-action-bar-action-"+g+" bb-bb10-action-bar-action-"+w+"-"+g+" bb-bb10-action-bar-tab-dark bb-bb10-action-bar-tab-normal-dark";O.highlight=O.normal+" bb-bb10-action-bar-tab-selected-dark";O.setAttribute("class",O.normal);y=document.createElement("img");y.setAttribute("class","bb-bb10-action-bar-icon-"+g);y.setAttribute("src",bb.transparentPixel);y.normal="bb-bb10-action-bar-icon-"+g+" bb-bb10-action-bar-tab-overflow-"+g+"-dark bb-bb10-action-bar-tab-overflow-"+w+"-"+g;y.highlight="bb-bb10-action-bar-icon-"+g;y.setAttribute("class",y.normal);O.appendChild(y);l=document.createElement("div");l.setAttribute("class","bb-bb10-action-bar-action-display-"+g+" bb-bb10-action-bar-action-display-"+w+"-"+g);l.innerHTML=f;O.display=l;O.appendChild(l);O.icon=y;l.innerHTML=" ";O.display=l;O.tabHighlight=document.createElement("div");O.tabHighlight.setAttribute("class","bb-bb10-action-bar-tab-overflow-"+g+"-dark bb-bb10-action-bar-tab-overflow-highlight-"+g+" bb-bb10-action-bar-tab-overflow-highlight-"+w+"-"+g);O.appendChild(O.tabHighlight);O.style.width=bb.actionBar.getTabOverflowBtnWidth(O)-1+"px";O.reset=function(){this.icon.setAttribute("src",bb.transparentPixel);this.icon.setAttribute("class",this.icon.normal);this.tabHighlight.style.display="none";this.display.innerHTML=" "};O.reset=O.reset.bind(O)}var M;for(b=0;b<r.length;b++){M=r[b];M.res=g;M.actionBar=e;f=M.innerHTML;y=document.createElement("img");y.setAttribute("src",M.getAttribute("data-bb-img"));y.setAttribute("class","bb-bb10-action-bar-icon-"+g);M.normal="bb-bb10-action-bar-action-"+g+" bb-bb10-action-bar-action-"+w+"-"+g+" bb-bb10-action-bar-button-dark";M.visible=true;if(M.hasAttribute("data-bb-visible")&&M.getAttribute("data-bb-visible").toLowerCase()=="false"){M.visible=false}M.icon=y;M.innerHTML="";M.setAttribute("class",M.normal);M.appendChild(y);l=document.createElement("div");l.setAttribute("class","bb-bb10-action-bar-action-display-"+g);l.innerHTML=f;M.display=l;M.appendChild(l);M.highlight=document.createElement("div");M.highlight.setAttribute("class","bb-bb10-action-bar-action-highlight");M.highlight.style["height"]=bb.device.is1024x600?"4px":"8px";M.highlight.style["background-color"]="transparent";M.appendChild(M.highlight);M.setCaption=function(e){this.display.innerHTML=e};M.setCaption=M.setCaption.bind(M);M.getCaption=function(){return this.display.innerHTML};M.getCaption=M.getCaption.bind(M);M.setImage=function(e){this.icon.setAttribute("src",e)};M.setImage=M.setImage.bind(M);M.getImage=function(){return this.icon.getAttribute("src")};M.getImage=M.getImage.bind(M);M.hide=bb.actionBar.actionHide;M.hide=M.hide.bind(M);M.show=bb.actionBar.actionShow;M.show=M.show.bind(M);M.ontouchstart=function(){this.highlight.style["background-color"]=bb.options.highlightColor};M.ontouchend=function(){this.highlight.style["background-color"]="transparent"}}if(e.actionOverflowBtn){actionOverflow=e.actionOverflowBtn;actionOverflow.res=g;actionOverflow.actionBar=e;actionOverflow.visible=true;f=actionOverflow.innerHTML;y=document.createElement("img");y.setAttribute("src",bb.transparentPixel);y.setAttribute("class","bb-bb10-action-bar-icon-"+g+" bb-bb10-action-bar-overflow-button-"+g+"-dark bb-bb10-action-bar-overflow-button-"+w+"-"+g);actionOverflow.icon=y;actionOverflow.normal="bb-bb10-action-bar-action-"+g+" bb-bb10-action-bar-action-"+w+"-"+g+" bb-bb10-action-bar-button-dark";actionOverflow.innerHTML="";actionOverflow.setAttribute("class",actionOverflow.normal);actionOverflow.appendChild(y);var l=document.createElement("div");l.setAttribute("class","bb-bb10-action-bar-action-display-"+g);l.innerHTML=f;actionOverflow.display=l;actionOverflow.appendChild(l);actionOverflow.highlight=document.createElement("div");actionOverflow.highlight.setAttribute("class","bb-bb10-action-bar-action-highlight");actionOverflow.highlight.style["height"]=bb.device.is1024x600?"4px":"8px";actionOverflow.highlight.style["background-color"]="transparent";actionOverflow.appendChild(actionOverflow.highlight);actionOverflow.ontouchstart=function(){this.highlight.style["background-color"]=bb.options.highlightColor};actionOverflow.ontouchend=function(){this.highlight.style["background-color"]="transparent"}}if(e.menu){e.menu.centerMenuItems()}if(e.tabOverflowMenu){e.tabOverflowMenu.centerMenuItems();e.tabOverflowMenu.initSelected()}e.reLayoutActionBar()},actionShow:function(){if(this.visible)return;this.style.display="";this.visible=true;this.actionBar.reLayoutActionBar()},actionHide:function(){if(!this.visible)return;this.style.display="none";this.visible=false;this.actionBar.reLayoutActionBar()},getTabOverflowBtnWidth:function(e){if(!e)return 0;if(bb.device.is1024x600){return bb.getOrientation()=="portrait"?77:123}else if(bb.device.is1280x768||bb.device.is1280x720){return bb.getOrientation()=="portrait"?154:256}else if(bb.device.is720x720){return 144}else{return bb.getOrientation()=="portrait"?154:256}},getActionOverflowBtnWidth:function(e){if(!e)return 0;if(bb.device.is1024x600){return bb.getOrientation()=="portrait"?77:123}else if(bb.device.is1280x768||bb.device.is1280x720){return bb.getOrientation()=="portrait"?154:256}else if(bb.device.is720x720){return 144}else{return bb.getOrientation()=="portrait"?154:256}},getBackBtnWidth:function(e){if(!e)return 0;if(bb.device.is1024x600){return bb.getOrientation()=="portrait"?93:150}else if(bb.device.is1280x768||bb.device.is1280x720){return bb.getOrientation()=="portrait"?187:300}else if(bb.device.is720x720){return 174}else{return bb.getOrientation()=="portrait"?187:300}},highlightAction:function(e,t){var n,r,i=e.actionBar.mainBarTabs;for(n=0;n<i.length;n++){r=i[n];if(r!=e){bb.actionBar.unhighlightAction(r)}}if(e.actionBar.tabOverflowMenu){i=e.actionBar.tabOverflowMenu.actions;for(n=0;n<i.length;n++){r=i[n];if(r!=t){bb.actionBar.unhighlightAction(r)}}e.actionBar.tabOverflowBtn.style["border-top-color"]="";e.actionBar.tabOverflowBtn.setAttribute("class",e.actionBar.tabOverflowBtn.normal)}e.style["border-top-color"]=bb.options.highlightColor;e.setAttribute("class",e.highlight);if(t){t.setAttribute("class",t.normal+" bb10Highlight")}if(e.actionBar.tabOverflowMenu&&!t){if(e.actionBar.tabOverflowBtn&&e==e.actionBar.tabOverflowBtn){t.setAttribute("class",t.normal+" bb10Highlight")}else{i=e.actionBar.tabOverflowMenu.actions;for(n=0;n<i.length;n++){r=i[n];if(r.visibleTab==e){r.setAttribute("class",r.normal+" bb10Highlight")}}}}if(e.actionBar.tabOverflowBtn&&e.actionBar.tabOverflowBtn.reset){e.actionBar.tabOverflowBtn.reset()}},unhighlightAction:function(e){var t;e.style["border-top-color"]="";e.setAttribute("class",e.normal);if(e.actionBar&&e.actionBar.tabOverflowMenu){tabs=e.actionBar.tabOverflowMenu.actions;for(i=0;i<tabs.length;i++){t=tabs[i];t.setAttribute("class",t.normal)}}}};_bb_bbmBubble={apply:function(e){for(var t=0;t<e.length;t++){bb.bbmBubble.style(e[t])}},style:function(e){if(e.hasAttribute("data-bb-style")){var t=e.getAttribute("data-bb-style").toLowerCase(),n;if(t=="left"){e.setAttribute("class","bb-bbm-bubble-left")}else{e.setAttribute("class","bb-bbm-bubble-right")}var r=e.querySelectorAll("[data-bb-type=item]");for(n=0;n>r.length;n++){e.removeChild(r[n])}var i=document.createElement("div");i.setAttribute("class","top-left image");e.appendChild(i);i=document.createElement("div");i.setAttribute("class","top-right image");e.appendChild(i);i=document.createElement("div");i.setAttribute("class","inside");e.appendChild(i);var s=document.createElement("div");s.setAttribute("class","nogap");i.appendChild(s);i=document.createElement("div");i.setAttribute("class","bottom-left image");e.appendChild(i);i=document.createElement("div");i.setAttribute("class","bottom-right image");e.appendChild(i);for(n=0;n<r.length;n++){var o=r[n],u=o.innerHTML;o.innerHTML='<img src="'+o.getAttribute("data-bb-img")+'" />\n'+'<div class="details">'+u+"</div>\n";s.appendChild(o)}}e.getStyle=function(){return this.getAttribute("data-bb-style")};e.getStyle=e.getStyle.bind(e);e.setStyle=function(e){if(e=="left"){this.setAttribute("data-bb-style",e);this.setAttribute("class","bb-bbm-bubble-left")}else if(e=="right"){this.setAttribute("data-bb-style",e);this.setAttribute("class","bb-bbm-bubble-right")}bb.refresh()};e.setStyle=e.setStyle.bind(e);e.show=function(){this.style.display="block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);return e}};bb.contextMenu={create:function(e){var t="1280x768-1280x720",n;if(bb.device.is1024x600){t="1024x600";n=100}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720";n=300}var r=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),o;r.setAttribute("class","bb-bb10-context-menu bb-bb10-context-menu-"+t+"-dark");r.actions=[];r.hideEvents=[];r.res=t;r.threshold=n;r.visible=false;r.overlay=document.createElement("div");r.overlay.threshold=n;r.overlay.setAttribute("class","bb-bb10-context-menu-overlay");r.overlay.menu=r;e.appendChild(r.overlay);r.overlay.ontouchmove=function(e){if(!this.menu.peeking)return;var t=e.touches[0];if(this.startPos&&this.startPos-t.pageX>this.threshold){this.menu.show(this.menu.selected);this.closeMenu=false}};r.overlay.ontouchend=function(){if(this.closeMenu){this.menu.hide();event.preventDefault()}};r.overlay.ontouchstart=function(e){this.closeMenu=true;if(!this.menu.peeking&&this.menu.visible){e.preventDefault()}else if(!this.menu.peeking)return;var t=e.touches[0];this.startPos=t.pageX;e.preventDefault()};o=document.createElement("div");o.setAttribute("class","bb-bb10-context-menu-item-"+t+" bb-bb10-context-menu-header-dark");r.header=o;r.appendChild(o);i.setAttribute("class","bb-bb10-context-menu-header-title-"+t+" bb-bb10-context-menu-header-title-dark");i.style.width=bb.contextMenu.getWidth()-20+"px";r.topTitle=i;o.appendChild(i);s.setAttribute("class","bb-bb10-context-menu-header-description-"+t);s.style.width=bb.contextMenu.getWidth()-20+"px";r.description=s;o.appendChild(s);r.scrollContainer=document.createElement("div");r.scrollContainer.setAttribute("class","bb-bb10-context-menu-scroller");r.appendChild(r.scrollContainer);r.style.left=bb.contextMenu.getLeft();r.show=function(e){if(e){this.header.style.display="";this.header.style.visibility="";if(e.title){this.topTitle.innerHTML=e.title}if(e.description){this.description.innerHTML=e.description}this.selected=e;r.scrollContainer.style.top=bb.device.isPlayBook?"64px":"130px"}else{this.header.style.display="none";this.selected=undefined;r.scrollContainer.style.top="0px"}r.scrollContainer.style["overflow-y"]="scroll";r.scrollContainer.style["overflow-x"]="hidden";r.scrollContainer.style["-webkit-overflow-scrolling"]="-blackberry-touch";this.peeking=false;this.overlay.style.display="inline";this.style["-webkit-transition"]="all 0.3s ease-in-out";this.style["-webkit-transform"]="translate(-"+bb.contextMenu.getWidth()+"px, 0)";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]="1000";this.addEventListener("touchstart",this.touchHandler,false);this.onclick=function(){this.hide()};this.header.addEventListener("click",this.hide,false);this.style.visibility="visible";this.visible=true};r.show=r.show.bind(r);r.hide=function(){this.overlay.style.display="none";this.removeEventListener("touchstart",this.touchHandler,false);this.removeEventListener("touchmove",this.touchMoveHandler,false);this.style["-webkit-transition"]="all 0.5s ease-in-out";this.style["-webkit-transform"]="translate("+bb.contextMenu.getWidth()+"px, 0px)";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]="1000";if(!this.peeking){this.header.removeEventListener("click",this.hide,false)}this.peeking=false;this.visible=false;r.scrollContainer.style["overflow-y"]="";r.scrollContainer.style["overflow-x"]="";r.scrollContainer.style["-webkit-overflow-scrolling"]="";for(var e=r.hideEvents.length-1;e>=0;e--){r.hideEvents[e]();r.hideEvents.pop()}if(bb.device.isPlayBook){for(var e=0;e<this.actions.length;e++){this.actions[e].ontouchend()}}};r.hide=r.hide.bind(r);r.peek=function(e){if(e){this.header.style.display="";if(e.title){this.topTitle.innerHTML=e.title}if(e.description){this.description.innerHTML=e.description}this.selected=e;r.scrollContainer.style.top=bb.device.isPlayBook?"64px":"130px"}else{r.scrollContainer.style.top="0px"}this.header.style.visibility="hidden";this.header.style["margin-bottom"]="-"+Math.floor(this.header.offsetHeight/2)+"px";this.peeking=true;this.overlay.style.display="inline";this.style["-webkit-transition"]="all 0.3s ease-in-out";this.style["-webkit-transform"]="translate(-"+bb.contextMenu.getPeekWidth()+", 0)";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]="1000";this.addEventListener("touchstart",this.touchHandler,false);this.addEventListener("touchmove",this.touchMoveHandler,false);this.onclick=function(e){if(e.target==this||e.target==this.scrollContainer){this.show(this.selected)}};this.header.removeEventListener("click",this.hide,false);this.style.visibility="visible";this.visible=true};r.peek=r.peek.bind(r);r.touchHandler=function(e){if(this.peeking){var t=e.touches[0];this.startPos=t.pageX;if(e.target==this.scrollContainer){}else if(e.target.parentNode==this.scrollContainer&&e.target!=this.header){e.preventDefault();e.stopPropagation()}}};r.touchHandler=r.touchHandler.bind(r);r.touchMoveHandler=function(e){if(!this.peeking)return;var t=e.touches[0];if(this.startPos&&this.startPos-t.pageX>this.threshold){this.show(this.selected)}};r.touchMoveHandler=r.touchMoveHandler.bind(r);r.onclick=function(e){if(this.peeking){this.show(this.selected);e.stopPropagation()}};r.centerMenuItems=function(){var e=bb.innerHeight(),t=bb.device.isPlayBook?53:111,n,r;r=this.pinnedAction?this.actions.length-1:this.actions.length;n=e-Math.floor(e/2)-Math.floor(r*t/2)-t;if(n<0)n=0;this.actions[0].style["margin-top"]=n+"px"};r.centerMenuItems=r.centerMenuItems.bind(r);r.orientationChanged=function(e){this.style["-webkit-transition"]="";this.style.left=bb.innerWidth()+"px";this.style.height=bb.innerHeight()+"px";this.centerMenuItems()};r.orientationChanged=r.orientationChanged.bind(r);window.addEventListener("orientationchange",r.orientationChanged,false);bb.windowListeners.push({name:"orientationchange",eventHandler:r.orientationChanged});r.addEventListener("webkitTransitionEnd",function(){if(!this.visible){this.style.visibility="hidden"}});r.add=function(e){var t,n,r=e.innerHTML,i=false;t="bb-bb10-context-menu-item-"+this.res+" bb-bb10-context-menu-item-"+this.res+"-dark";if(e.hasAttribute("data-bb-visible")&&e.getAttribute("data-bb-visible").toLowerCase()=="false"){e.visible=false;e.style.display="none"}else{e.visible=true;this.actions.push(e)}i=e.hasAttribute("data-bb-pin")&&e.getAttribute("data-bb-pin").toLowerCase()=="true";if(i&&!this.pinnedAction){t=t+" bb-bb10-context-menu-item-first-"+this.res+"-dark";e.style["bottom"]="-2px";e.style.position="absolute";e.style.width="100%";this.pinnedAction=e;this.appendChild(e);this.scrollContainer.style.bottom=bb.device.isPlayBook?"64px":"130px"}else{this.scrollContainer.appendChild(e)}if(this.actions.length==1){t=t+" bb-bb10-context-menu-item-first-"+this.res+"-dark"}n=t+" bb-bb10-context-menu-item-hover-"+this.res;e.normal=t;e.highlight=n;e.innerHTML="";var s=document.createElement("div"),o=document.createElement("img");o.setAttribute("src",e.getAttribute("data-bb-img"));o.setAttribute("class","bb-bb10-context-menu-item-image-"+this.res);e.img=o;e.appendChild(o);s.setAttribute("class","bb-bb10-context-menu-item-inner-"+this.res);e.appendChild(s);s.innerHTML=r;e.display=s;e.menu=this;e.setAttribute("class",t);e.ontouchstart=function(e){if(this.menu.peeking){this.style["border-left-color"]=bb.options.highlightColor}else{this.style["background-color"]=bb.options.highlightColor}e.stopPropagation();if(bb.device.isPlayBook){var t,n;for(n=0;n<this.menu.actions.length;n++){t=this.menu.actions[n];if(t!=this){t.ontouchend()}}}};e.ontouchend=function(){if(this.menu.peeking){this.style["border-left-color"]="transparent"}else{this.style["background-color"]=""}};e.addEventListener("click",this.hide,false);e.setCaption=function(e){this.display.innerHTML=e};e.setCaption=e.setCaption.bind(e);e.setImage=function(e){this.img.setAttribute("src",e)};e.setImage=e.setImage.bind(e);e.hide=function(){if(!this.visible)return;this.visible=false;var e=this.menu.actions.indexOf(this);this.menu.actions.splice(e,1);this.style.display="none";this.menu.centerMenuItems()};e.hide=e.hide.bind(e);e.show=function(){if(this.visible)return;this.visible=true;this.menu.actions.push(this);this.style.display="";this.menu.centerMenuItems()};e.show=e.show.bind(e)};r.add=r.add.bind(r);return r},getWidth:function(){if(bb.device.isPlayBook){return"300"}else{return"563"}},getPeekWidth:function(){if(bb.device.isPlayBook){return"55px"}else{return"121px"}},getLeft:function(){return window.innerWidth+3+"px"}};(function(){var e=Math,t=function(e){return e>>0},n=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",r=/android/gi.test(navigator.appVersion),i=/iphone|ipad/gi.test(navigator.appVersion),s=/playbook/gi.test(navigator.appVersion),o=/hp-tablet/gi.test(navigator.appVersion),u="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,a="ontouchstart"in window&&!o,f=n+"Transform"in document.documentElement.style,l=i||s,c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",d=a?"touchstart":"mousedown",v=a?"touchmove":"mousemove",m=a?"touchend":"mouseup",g=a?"touchcancel":"mouseup",y=n=="Moz"?"DOMMouseScroll":"mousewheel",b="translate"+(u?"3d(":"("),w=u?",0)":")",E=function(e,t){var s=this,o=document,c;s.wrapper=typeof e=="object"?e:o.getElementById(e);s.wrapper.style.overflow="hidden";s.scroller=s.wrapper.children[0];s.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,hScrollbar:true,vScrollbar:true,fixedScrollbar:r,hideScrollbar:i,fadeScrollbar:i&&u,scrollbarClass:"",zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(c in t)s.options[c]=t[c];s.x=s.options.x;s.y=s.options.y;s.options.useTransform=f?s.options.useTransform:false;s.options.hScrollbar=s.options.hScroll&&s.options.hScrollbar;s.options.vScrollbar=s.options.vScroll&&s.options.vScrollbar;s.options.zoom=s.options.useTransform&&s.options.zoom;s.options.useTransition=l&&s.options.useTransition;if(s.options.zoom&&r){b="translate(";w=")"}s.scroller.style[n+"TransitionProperty"]=s.options.useTransform?"-"+n.toLowerCase()+"-transform":"top left";s.scroller.style[n+"TransitionDuration"]="0";s.scroller.style[n+"TransformOrigin"]="0 0";if(s.options.useTransition)s.scroller.style[n+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";if(s.options.useTransform)s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w;else s.scroller.style.cssText+=";position:absolute;top:"+s.y+"px;left:"+s.x+"px";if(s.options.useTransition)s.options.fixedScrollbar=true;s.refresh();s._bind(p,window);s._bind(d);if(!a){s._bind("mouseout",s.wrapper);if(s.options.wheelAction!="none")s._bind(y)}if(s.options.checkDOMChanges)s.checkDOMTime=setInterval(function(){s._checkDOMChanges()},500)};E.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case d:if(!a&&e.button!==0)return;t._start(e);break;case v:t._move(e);break;case m:case g:t._end(e);break;case p:t._resize();break;case y:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e);break}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)return;this.refresh()},_scrollbar:function(r){var i=this,s=document,o;if(!i[r+"Scrollbar"]){if(i[r+"ScrollbarWrapper"]){if(f)i[r+"ScrollbarIndicator"].style[n+"Transform"]="";i[r+"ScrollbarWrapper"].parentNode.removeChild(i[r+"ScrollbarWrapper"]);i[r+"ScrollbarWrapper"]=null;i[r+"ScrollbarIndicator"]=null}return}if(!i[r+"ScrollbarWrapper"]){o=s.createElement("div");if(i.options.scrollbarClass)o.className=i.options.scrollbarClass+r.toUpperCase();else o.style.cssText="position:absolute;z-index:100;"+(r=="h"?"height:7px;bottom:1px;left:2px;right:"+(i.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(i.hScrollbar?"7":"2")+"px;top:2px;right:1px");o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:opacity;-"+n+"-transition-duration:"+(i.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(i.options.hideScrollbar?"0":"1");i.wrapper.appendChild(o);i[r+"ScrollbarWrapper"]=o;o=s.createElement("div");if(!i.options.scrollbarClass){o.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.9);-"+n+"-background-clip:padding-box;-"+n+"-box-sizing:border-box;"+(r=="h"?"height:100%":"width:100%")+";-"+n+"-border-radius:3px;border-radius:3px"}o.style.cssText+=";pointer-events:none;-"+n+"-transition-property:-"+n+"-transform;-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+n+"-transition-duration:0;-"+n+"-transform:"+b+"0,0"+w;if(i.options.useTransition)o.style.cssText+=";-"+n+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)";i[r+"ScrollbarWrapper"].appendChild(o);i[r+"ScrollbarIndicator"]=o}if(r=="h"){i.hScrollbarSize=i.hScrollbarWrapper.clientWidth;i.hScrollbarIndicatorSize=e.max(t(i.hScrollbarSize*i.hScrollbarSize/i.scrollerW),8);i.hScrollbarIndicator.style.width=i.hScrollbarIndicatorSize+"px";i.hScrollbarMaxScroll=i.hScrollbarSize-i.hScrollbarIndicatorSize;i.hScrollbarProp=i.hScrollbarMaxScroll/i.maxScrollX}else{i.vScrollbarSize=i.vScrollbarWrapper.clientHeight;i.vScrollbarIndicatorSize=e.max(t(i.vScrollbarSize*i.vScrollbarSize/i.scrollerH),8);i.vScrollbarIndicator.style.height=i.vScrollbarIndicatorSize+"px";i.vScrollbarMaxScroll=i.vScrollbarSize-i.vScrollbarIndicatorSize;i.vScrollbarProp=i.vScrollbarMaxScroll/i.maxScrollY}i._scrollbarPos(r,true)},_resize:function(){var e=this;setTimeout(function(){e.refresh()},r?200:0)},_pos:function(e,r){e=this.hScroll?e:0;r=this.vScroll?r:0;if(this.options.useTransform){this.scroller.style[n+"Transform"]=b+e+"px,"+r+"px"+w+" scale("+this.scale+")"}else{e=t(e);r=t(r);this.scroller.style.left=e+"px";this.scroller.style.top=r+"px"}this.x=e;this.y=r;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(e,r){var i=this,s=e=="h"?i.x:i.y,o;if(!i[e+"Scrollbar"])return;s=i[e+"ScrollbarProp"]*s;if(s<0){if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]+t(s*3);if(o<8)o=8;i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px"}s=0}else if(s>i[e+"ScrollbarMaxScroll"]){if(!i.options.fixedScrollbar){o=i[e+"ScrollbarIndicatorSize"]-t((s-i[e+"ScrollbarMaxScroll"])*3);if(o<8)o=8;i[e+"ScrollbarIndicator"].style[e=="h"?"width":"height"]=o+"px";s=i[e+"ScrollbarMaxScroll"]+(i[e+"ScrollbarIndicatorSize"]-o)}else{s=i[e+"ScrollbarMaxScroll"]}}i[e+"ScrollbarWrapper"].style[n+"TransitionDelay"]="0";i[e+"ScrollbarWrapper"].style.opacity=r&&i.options.hideScrollbar?"0":"1";i[e+"ScrollbarIndicator"].style[n+"Transform"]=b+(e=="h"?s+"px,0":"0,"+s+"px")+w},_start:function(t){var r=this,i=a?t.touches[0]:t,s,o,u,f,l;if(!r.enabled)return;if(r.options.onBeforeScrollStart)r.options.onBeforeScrollStart.call(r,t);if(r.options.useTransition||r.options.zoom)r._transitionTime(0);r.moved=false;r.animating=false;r.zoomed=false;r.distX=0;r.distY=0;r.absDistX=0;r.absDistY=0;r.dirX=0;r.dirY=0;if(r.options.zoom&&a&&t.touches.length>1){f=e.abs(t.touches[0].pageX-t.touches[1].pageX);l=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDistStart=e.sqrt(f*f+l*l);r.originX=e.abs(t.touches[0].pageX+t.touches[1].pageX-r.wrapperOffsetLeft*2)/2-r.x;r.originY=e.abs(t.touches[0].pageY+t.touches[1].pageY-r.wrapperOffsetTop*2)/2-r.y;if(r.options.onZoomStart)r.options.onZoomStart.call(r,t)}if(r.options.momentum){if(r.options.useTransform){s=getComputedStyle(r.scroller,null)[n+"Transform"].replace(/[^0-9-.,]/g,"").split(",");o=s[4]*1;u=s[5]*1}else{o=getComputedStyle(r.scroller,null).left.replace(/[^0-9-]/g,"")*1;u=getComputedStyle(r.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(o!=r.x||u!=r.y){if(r.options.useTransition)r._unbind("webkitTransitionEnd");else h(r.aniTime);r.steps=[];r._pos(o,u)}}r.absStartX=r.x;r.absStartY=r.y;r.startX=r.x;r.startY=r.y;r.pointX=i.pageX;r.pointY=i.pageY;r.startTime=t.timeStamp||Date.now();if(r.options.onScrollStart)r.options.onScrollStart.call(r,t);r._bind(v);r._bind(m);r._bind(g)},_move:function(t){var r=this,i=a?t.touches[0]:t,s=i.pageX-r.pointX,o=i.pageY-r.pointY,u=r.x+s,f=r.y+o,l,c,h,p=t.timeStamp||Date.now();if(r.options.onBeforeScrollMove)r.options.onBeforeScrollMove.call(r,t);if(r.options.zoom&&a&&t.touches.length>1){l=e.abs(t.touches[0].pageX-t.touches[1].pageX);c=e.abs(t.touches[0].pageY-t.touches[1].pageY);r.touchesDist=e.sqrt(l*l+c*c);r.zoomed=true;h=1/r.touchesDistStart*r.touchesDist*this.scale;if(h<r.options.zoomMin)h=.5*r.options.zoomMin*Math.pow(2,h/r.options.zoomMin);else if(h>r.options.zoomMax)h=2*r.options.zoomMax*Math.pow(.5,r.options.zoomMax/h);r.lastScale=h/this.scale;u=this.originX-this.originX*r.lastScale+this.x,f=this.originY-this.originY*r.lastScale+this.y;this.scroller.style[n+"Transform"]=b+u+"px,"+f+"px"+w+" scale("+h+")";if(r.options.onZoom)r.options.onZoom.call(r,t);return}r.pointX=i.pageX;r.pointY=i.pageY;if(u>0||u<r.maxScrollX){u=r.options.bounce?r.x+s/2:u>=0||r.maxScrollX>=0?0:r.maxScrollX}if(f>r.minScrollY||f<r.maxScrollY){f=r.options.bounce?r.y+o/2:f>=r.minScrollY||r.maxScrollY>=0?r.minScrollY:r.maxScrollY}r.distX+=s;r.distY+=o;r.absDistX=e.abs(r.distX);r.absDistY=e.abs(r.distY);if(r.absDistX<6&&r.absDistY<6){return}if(r.options.lockDirection){if(r.absDistX>r.absDistY+5){f=r.y;o=0}else if(r.absDistY>r.absDistX+5){u=r.x;s=0}}r.moved=true;r._pos(u,f);r.dirX=s>0?-1:s<0?1:0;r.dirY=o>0?-1:o<0?1:0;if(p-r.startTime>300){r.startTime=p;r.startX=r.x;r.startY=r.y}if(r.options.onScrollMove)r.options.onScrollMove.call(r,t)},_end:function(r){if(a&&r.touches.length!=0)return;var i=this,s=a?r.changedTouches[0]:r,o,u,f={dist:0,time:0},l={dist:0,time:0},c=(r.timeStamp||Date.now())-i.startTime,h=i.x,p=i.y,d,y,E,S,x;i._unbind(v);i._unbind(m);i._unbind(g);if(i.options.onBeforeScrollEnd)i.options.onBeforeScrollEnd.call(i,r);if(i.zoomed){x=i.scale*i.lastScale;x=Math.max(i.options.zoomMin,x);x=Math.min(i.options.zoomMax,x);i.lastScale=x/i.scale;i.scale=x;i.x=i.originX-i.originX*i.lastScale+i.x;i.y=i.originY-i.originY*i.lastScale+i.y;i.scroller.style[n+"TransitionDuration"]="200ms";i.scroller.style[n+"Transform"]=b+i.x+"px,"+i.y+"px"+w+" scale("+i.scale+")";i.zoomed=false;i.refresh();if(i.options.onZoomEnd)i.options.onZoomEnd.call(i,r);return}if(!i.moved){if(a){if(i.doubleTapTimer&&i.options.zoom){clearTimeout(i.doubleTapTimer);i.doubleTapTimer=null;if(i.options.onZoomStart)i.options.onZoomStart.call(i,r);i.zoom(i.pointX,i.pointY,i.scale==1?i.options.doubleTapZoom:1);if(i.options.onZoomEnd){setTimeout(function(){i.options.onZoomEnd.call(i,r)},200)}}else{i.doubleTapTimer=setTimeout(function(){i.doubleTapTimer=null;o=s.target;while(o.nodeType!=1)o=o.parentNode;if(o.tagName!="SELECT"&&o.tagName!="INPUT"&&o.tagName!="TEXTAREA"){u=document.createEvent("MouseEvents");u.initMouseEvent("click",true,true,r.view,1,s.screenX,s.screenY,s.clientX,s.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);u._fake=true;o.dispatchEvent(u)}},i.options.zoom?250:0)}}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r);return}if(c<300&&i.options.momentum){f=h?i._momentum(h-i.startX,c,-i.x,i.scrollerW-i.wrapperW+i.x,i.options.bounce?i.wrapperW:0):f;l=p?i._momentum(p-i.startY,c,-i.y,i.maxScrollY<0?i.scrollerH-i.wrapperH+i.y-i.minScrollY:0,i.options.bounce?i.wrapperH:0):l;h=i.x+f.dist;p=i.y+l.dist;if(i.x>0&&h>0||i.x<i.maxScrollX&&h<i.maxScrollX)f={dist:0,time:0};if(i.y>i.minScrollY&&p>i.minScrollY||i.y<i.maxScrollY&&p<i.maxScrollY)l={dist:0,time:0}}if(f.dist||l.dist){E=e.max(e.max(f.time,l.time),10);if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold){i.scrollTo(i.absStartX,i.absStartY,200)}else{S=i._snap(h,p);h=S.x;p=S.y;E=e.max(S.time,E)}}i.scrollTo(t(h),t(p),E);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r);return}if(i.options.snap){d=h-i.absStartX;y=p-i.absStartY;if(e.abs(d)<i.options.snapThreshold&&e.abs(y)<i.options.snapThreshold)i.scrollTo(i.absStartX,i.absStartY,200);else{S=i._snap(i.x,i.y);if(S.x!=i.x||S.y!=i.y)i.scrollTo(S.x,S.y,S.time)}if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r);return}i._resetPos(200);if(i.options.onTouchEnd)i.options.onTouchEnd.call(i,r)},_resetPos:function(e){var t=this,r=t.x>=0?0:t.x<t.maxScrollX?t.maxScrollX:t.x,i=t.y>=t.minScrollY||t.maxScrollY>0?t.minScrollY:t.y<t.maxScrollY?t.maxScrollY:t.y;if(r==t.x&&i==t.y){if(t.moved){t.moved=false;if(t.options.onScrollEnd)t.options.onScrollEnd.call(t)}if(t.hScrollbar&&t.options.hideScrollbar){if(n=="webkit")t.hScrollbarWrapper.style[n+"TransitionDelay"]="300ms";t.hScrollbarWrapper.style.opacity="0"}if(t.vScrollbar&&t.options.hideScrollbar){if(n=="webkit")t.vScrollbarWrapper.style[n+"TransitionDelay"]="300ms";t.vScrollbarWrapper.style.opacity="0"}return}t.scrollTo(r,i,e||0)},_wheel:function(e){var t=this,n,r,i,s,o;if("wheelDeltaX"in e){n=e.wheelDeltaX/12;r=e.wheelDeltaY/12}else if("wheelDelta"in e){n=r=e.wheelDelta/12}else if("detail"in e){n=r=-e.detail*3}else{return}if(t.options.wheelAction=="zoom"){o=t.scale*Math.pow(2,1/3*(r?r/Math.abs(r):0));if(o<t.options.zoomMin)o=t.options.zoomMin;if(o>t.options.zoomMax)o=t.options.zoomMax;if(o!=t.scale){if(!t.wheelZoomCount&&t.options.onZoomStart)t.options.onZoomStart.call(t,e);t.wheelZoomCount++;t.zoom(e.pageX,e.pageY,o,400);setTimeout(function(){t.wheelZoomCount--;if(!t.wheelZoomCount&&t.options.onZoomEnd)t.options.onZoomEnd.call(t,e)},400)}return}i=t.x+n;s=t.y+r;if(i>0)i=0;else if(i<t.maxScrollX)i=t.maxScrollX;if(s>t.minScrollY)s=t.minScrollY;else if(s<t.maxScrollY)s=t.maxScrollY;t.scrollTo(i,s,0)},_mouseout:function(e){var t=e.relatedTarget;if(!t){this._end(e);return}while(t=t.parentNode)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;if(e.target!=t.scroller)return;t._unbind("webkitTransitionEnd");t._startAni()},_startAni:function(){var t=this,n=t.x,r=t.y,i=Date.now(),s,o,u;if(t.animating)return;if(!t.steps.length){t._resetPos(400);return}s=t.steps.shift();if(s.x==n&&s.y==r)s.time=0;t.animating=true;t.moved=true;if(t.options.useTransition){t._transitionTime(s.time);t._pos(s.x,s.y);t.animating=false;if(s.time)t._bind("webkitTransitionEnd");else t._resetPos(0);return}u=function(){var a=Date.now(),f,l;if(a>=i+s.time){t._pos(s.x,s.y);t.animating=false;if(t.options.onAnimationEnd)t.options.onAnimationEnd.call(t);t._startAni();return}a=(a-i)/s.time-1;o=e.sqrt(1-a*a);f=(s.x-n)*o+n;l=(s.y-r)*o+r;t._pos(f,l);if(t.animating)t.aniTime=c(u)};u()},_transitionTime:function(e){e+="ms";this.scroller.style[n+"TransitionDuration"]=e;if(this.hScrollbar)this.hScrollbarIndicator.style[n+"TransitionDuration"]=e;if(this.vScrollbar)this.vScrollbarIndicator.style[n+"TransitionDuration"]=e},_momentum:function(n,r,i,s,o){var u=6e-4,a=e.abs(n)/r,f=a*a/(2*u),l=0,c=0;if(n>0&&f>i){c=o/(6/(f/a*u));i=i+c;a=a*i/f;f=i}else if(n<0&&f>s){c=o/(6/(f/a*u));s=s+c;a=a*s/f;f=s}f=f*(n<0?-1:1);l=a/u;return{dist:f,time:t(l)}},_offset:function(e){var t=-e.offsetLeft,n=-e.offsetTop;while(e=e.offsetParent){t-=e.offsetLeft;n-=e.offsetTop}if(e!=this.wrapper){t*=this.scale;n*=this.scale}return{left:t,top:n}},_snap:function(n,r){var i=this,s,o,u,a,f,l;u=i.pagesX.length-1;for(s=0,o=i.pagesX.length;s<o;s++){if(n>=i.pagesX[s]){u=s;break}}if(u==i.currPageX&&u>0&&i.dirX<0)u--;n=i.pagesX[u];f=e.abs(n-i.pagesX[i.currPageX]);f=f?e.abs(i.x-n)/f*500:0;i.currPageX=u;u=i.pagesY.length-1;for(s=0;s<u;s++){if(r>=i.pagesY[s]){u=s;break}}if(u==i.currPageY&&u>0&&i.dirY<0)u--;r=i.pagesY[u];l=e.abs(r-i.pagesY[i.currPageY]);l=l?e.abs(i.y-r)/l*500:0;i.currPageY=u;a=t(e.max(f,l))||200;return{x:n,y:r,time:a}},_bind:function(e,t,n){(t||this.scroller).addEventListener(e,this,!!n)},_unbind:function(e,t,n){(t||this.scroller).removeEventListener(e,this,!!n)},destroy:function(){var e=this;e.scroller.style[n+"Transform"]="";e.hScrollbar=false;e.vScrollbar=false;e._scrollbar("h");e._scrollbar("v");e._unbind(p,window);e._unbind(d);e._unbind(v);e._unbind(m);e._unbind(g);if(!e.options.hasTouch){e._unbind("mouseout",e.wrapper);e._unbind(y)}if(e.options.useTransition)e._unbind("webkitTransitionEnd");if(e.options.checkDOMChanges)clearInterval(e.checkDOMTime);if(e.options.onDestroy)e.options.onDestroy.call(e)},refresh:function(){var e=this,r,i,s,o,u=0,a=0;if(e.scale<e.options.zoomMin)e.scale=e.options.zoomMin;e.wrapperW=e.wrapper.clientWidth||1;e.wrapperH=e.wrapper.clientHeight||1;e.minScrollY=-e.options.topOffset||0;e.scrollerW=t(e.scroller.offsetWidth*e.scale);e.scrollerH=t((e.scroller.offsetHeight+e.minScrollY)*e.scale);e.maxScrollX=e.wrapperW-e.scrollerW;e.maxScrollY=e.wrapperH-e.scrollerH+e.minScrollY;e.dirX=0;e.dirY=0;if(e.options.onRefresh)e.options.onRefresh.call(e);e.hScroll=e.options.hScroll&&e.maxScrollX<0;e.vScroll=e.options.vScroll&&(!e.options.bounceLock&&!e.hScroll||e.scrollerH>e.wrapperH);e.hScrollbar=e.hScroll&&e.options.hScrollbar;e.vScrollbar=e.vScroll&&e.options.vScrollbar&&e.scrollerH>e.wrapperH;r=e._offset(e.wrapper);e.wrapperOffsetLeft=-r.left;e.wrapperOffsetTop=-r.top;if(typeof e.options.snap=="string"){e.pagesX=[];e.pagesY=[];o=e.scroller.querySelectorAll(e.options.snap);for(i=0,s=o.length;i<s;i++){u=e._offset(o[i]);u.left+=e.wrapperOffsetLeft;u.top+=e.wrapperOffsetTop;e.pagesX[i]=u.left<e.maxScrollX?e.maxScrollX:u.left*e.scale;e.pagesY[i]=u.top<e.maxScrollY?e.maxScrollY:u.top*e.scale}}else if(e.options.snap){e.pagesX=[];while(u>=e.maxScrollX){e.pagesX[a]=u;u=u-e.wrapperW;a++}if(e.maxScrollX%e.wrapperW)e.pagesX[e.pagesX.length]=e.maxScrollX-e.pagesX[e.pagesX.length-1]+e.pagesX[e.pagesX.length-1];u=0;a=0;e.pagesY=[];while(u>=e.maxScrollY){e.pagesY[a]=u;u=u-e.wrapperH;a++}if(e.maxScrollY%e.wrapperH)e.pagesY[e.pagesY.length]=e.maxScrollY-e.pagesY[e.pagesY.length-1]+e.pagesY[e.pagesY.length-1]}e._scrollbar("h");e._scrollbar("v");if(!e.zoomed){e.scroller.style[n+"TransitionDuration"]="0";e._resetPos(200)}},scrollTo:function(e,t,n,r){var i=this,s=e,o,u;i.stop();if(!s.length)s=[{x:e,y:t,time:n,relative:r}];for(o=0,u=s.length;o<u;o++){if(s[o].relative){s[o].x=i.x-s[o].x;s[o].y=i.y-s[o].y}i.steps.push({x:s[o].x,y:s[o].y,time:s[o].time||0})}i._startAni()},scrollToElement:function(t,n){var r=this,i;t=t.nodeType?t:r.scroller.querySelector(t);if(!t)return;i=r._offset(t);i.left+=r.wrapperOffsetLeft;i.top+=r.wrapperOffsetTop;i.left=i.left>0?0:i.left<r.maxScrollX?r.maxScrollX:i.left;i.top=i.top>r.minScrollY?r.minScrollY:i.top<r.maxScrollY?r.maxScrollY:i.top;n=n===undefined?e.max(e.abs(i.left)*2,e.abs(i.top)*2):n;r.scrollTo(i.left,i.top,n)},scrollToPage:function(e,t,n){var r=this,i,s;n=n===undefined?400:n;if(r.options.onScrollStart)r.options.onScrollStart.call(r);if(r.options.snap){e=e=="next"?r.currPageX+1:e=="prev"?r.currPageX-1:e;t=t=="next"?r.currPageY+1:t=="prev"?r.currPageY-1:t;e=e<0?0:e>r.pagesX.length-1?r.pagesX.length-1:e;t=t<0?0:t>r.pagesY.length-1?r.pagesY.length-1:t;r.currPageX=e;r.currPageY=t;i=r.pagesX[e];s=r.pagesY[t]}else{i=-r.wrapperW*e;s=-r.wrapperH*t;if(i<r.maxScrollX)i=r.maxScrollX;if(s<r.maxScrollY)s=r.maxScrollY}r.scrollTo(i,s,n)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(v);this._unbind(m);this._unbind(g)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition)this._unbind("webkitTransitionEnd");else h(this.aniTime);this.steps=[];this.moved=false;this.animating=false},zoom:function(e,t,r,i){var s=this,o=r/s.scale;if(!s.options.useTransform)return;s.zoomed=true;i=i===undefined?200:i;e=e-s.wrapperOffsetLeft-s.x;t=t-s.wrapperOffsetTop-s.y;s.x=e-e*o+s.x;s.y=t-t*o+s.y;s.scale=r;s.refresh();s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x;s.y=s.y>s.minScrollY?s.minScrollY:s.y<s.maxScrollY?s.maxScrollY:s.y;s.scroller.style[n+"TransitionDuration"]=i+"ms";s.scroller.style[n+"Transform"]=b+s.x+"px,"+s.y+"px"+w+" scale("+r+")";s.zoomed=false},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};if(typeof exports!=="undefined")exports.iScroll=E;else window.iScroll=E})();bb.menuBar={height:100,menuOpen:false,menu:false,apply:function(e,t){if(bb.device.isPlayBook||bb.device.isBB10){bb.menuBar.createSwipeMenu(e,t);e.parentNode.removeChild(e);if(window.blackberry){if(bb.device.isPlayBook&&blackberry.app.event){blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar)}else if(bb.device.isBB10&&blackberry.app){blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)}}}else if(window.blackberry&&blackberry.ui.menu){bb.menuBar.createBlackberryMenu(e);e.parentNode.removeChild(e)}else{console.log("Unable to create Blackberry/onSwipeDown menu.")}},createBlackberryMenu:function(e){var t,n,r,i;t=e.getElementsByTagName("div");for(var s=0;s<t.length;s++){i=t[s];if(i.getAttribute("data-bb-type")==="menu-item"){r=i.innerHTML;if(r){n=new blackberry.ui.menu.MenuItem(false,s,r,i.onclick);blackberry.ui.menu.addMenuItem(n);if(i.hasAttribute("data-bb-selected")&&i.getAttribute("data-bb-selected")==="true"){blackberry.ui.menu.setDefaultMenuItem(n)}}else{console.log("can't add menu item without data-bb-caption")}}else if(i.getAttribute("data-bb-type")==="menu-separator"){n=new blackberry.ui.menu.MenuItem(true,s);blackberry.ui.menu.addMenuItem(n)}else{console.log("invalid menu item type")}}},createSwipeMenu:function(e,t){if(bb.device.isBB10){var n=document.createElement("div"),r="1280x768-1280x720",i,s,o,u=[],a,f,l,c,h,p;if(bb.device.is1024x600){r="1024x600";bb.menuBar.height=100}else if(bb.device.is1280x768||bb.device.is1280x720){r="1280x768-1280x720";bb.menuBar.height=140}n.setAttribute("class","bb-bb10-menu-bar-"+r+" bb-bb10-menu-bar-dark");v=e.querySelectorAll("[data-bb-type=menu-item]");if(v.length>0){for(i=0;i<v.length;i++){o=v[i];s=o.hasAttribute("data-bb-type")?o.getAttribute("data-bb-type").toLowerCase():undefined;if(s=="menu-item"){l=o.innerHTML;f=o.getAttribute("data-bb-img");if(l&&f&&u.length<5){p=document.createElement("div");u.push(p);p.setAttribute("class","bb-bb10-menu-bar-item-"+r);o.innerHTML="";a=document.createElement("img");a.setAttribute("src",f);p.appendChild(a);c=document.createElement("div");c.setAttribute("class","bb-bb10-menu-bar-item-caption-"+r);c.innerHTML=l;p.appendChild(c);p.onclick=o.onclick;n.appendChild(p)}else{if(u.length>=5){console.log("too many menu items.")}else{console.log("missing menu item caption or image.")}}}else{console.log("invalid menu item type for bb10")}}}if(u.length>0){h=Math.floor(100/u.length);for(i=0;i<u.length;i++){o=u[i];if(i==u.length-1){o.style.width=h-1+"%";o.style.float="right"}else{o.style.width=h+"%"}}}else{n.style.display="none";bb.menuBar.menu=null}n.style["-webkit-transform"]="translate(0,0)";n.addEventListener("click",bb.menuBar.onMenuBarClicked,false);document.body.appendChild(n);bb.menuBar.menu=n}else{var d=document.createElement("div"),v,m,g,o,a,y,c,b,w;d.setAttribute("class","pb-menu-bar");v=e.getElementsByTagName("div");if(v.length>0){m=document.createElement("ul");d.appendChild(m);for(g=0;g<v.length;g++){o=v[g];if(o.getAttribute("data-bb-type")==="menu-item"){y=o.innerHTML;iconPath=o.getAttribute("data-bb-img");if(y&&iconPath){w=document.createElement("li");o.innerHTML="";a=new Image;a.src=iconPath;w.appendChild(a);c=document.createElement("div");c.setAttribute("class","pb-menu-bar-caption");c.innerText=y;w.appendChild(c);w.onclick=o.onclick;m.appendChild(w)}}else if(o.getAttribute("data-bb-type")==="menu-separator"){m=document.createElement("ul");d.appendChild(m)}else{console.log("invalid menu item type")}}}d.style["-webkit-transform"]="translate(0,0)";d.addEventListener("click",bb.menuBar.onMenuBarClicked,false);document.body.appendChild(d);bb.menuBar.menu=d}if(!bb.screen.overlay){bb.screen.overlay=document.createElement("div");bb.screen.overlay.setAttribute("class","bb-bb10-context-menu-overlay")}t.appendChild(bb.screen.overlay);bb.menuBar.menu.overlay=bb.screen.overlay},showMenuBar:function(){if(!bb.menuBar.menuOpen){bb.menuBar.menu.overlay.style.display="inline";if(bb.device.isPlayBook){blackberry.app.event.onSwipeDown(bb.menuBar.hideMenuBar)}else if(bb.device.isBB10){blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar);blackberry.event.addEventListener("swipedown",bb.menuBar.hideMenuBar)}bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out";bb.menuBar.menu.style["-webkit-transform"]="translate(0, "+(bb.menuBar.height+3)+"px)";bb.menuBar.menuOpen=true;bb.menuBar.menu.overlay.addEventListener("touchstart",bb.menuBar.overlayTouchHandler,false)}},hideMenuBar:function(){if(bb.menuBar.menuOpen){bb.menuBar.menu.overlay.style.display="none";if(bb.device.isPlayBook){blackberry.app.event.onSwipeDown(bb.menuBar.showMenuBar)}else if(bb.device.isBB10){blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar);blackberry.event.addEventListener("swipedown",bb.menuBar.showMenuBar)}bb.menuBar.menu.style["-webkit-transition"]="all 0.5s ease-in-out";bb.menuBar.menu.style["-webkit-transform"]="translate(0, -"+(bb.menuBar.height+3)+"px)";bb.menuBar.menuOpen=false;bb.menuBar.menu.overlay.removeEventListener("touchstart",bb.menuBar.overlayTouchHandler,false)}},overlayTouchHandler:function(e){e.preventDefault();e.stopPropagation();bb.menuBar.hideMenuBar()},onMenuBarClicked:function(){bb.menuBar.hideMenuBar()},clearMenu:function(){if(window.blackberry){if(bb.menuBar.menu&&(bb.device.isPlayBook||bb.device.isBB10)){if(bb.device.isPlayBook&&blackberry.app.event){blackberry.app.event.onSwipeDown("")}else if(bb.device.isBB10&&blackberry.app){blackberry.event.removeEventListener("swipedown",bb.menuBar.showMenuBar);blackberry.event.removeEventListener("swipedown",bb.menuBar.hideMenuBar)}bb.menuBar.menu.parentNode.removeChild(bb.menuBar.menu);bb.menuBar.menu=false;bb.menuBar.menuOpen=false}else if(blackberry.ui&&blackberry.ui.menu){blackberry.ui.menu.clearMenuItems()}}}};_bb_progress={NORMAL:0,PAUSED:1,ERROR:2,apply:function(e){for(var t=0;t<e.length;t++){bb.progress.style(e[t],true)}},style:function(e,t){var n,r,i,s=0,o=1,u=2;if(bb.device.isBB10){n=bb.screen.controlColor;r=bb.options.highlightColor;i=bb.options.shades.darkHighlight}else{n="light";r=bb.device.isPlayBook?bb.options.highlightColor:"#92B43B";i="#8FB03B"}outerElement=document.createElement("div");outerElement.progress=e;outerElement.state=bb.progress.NORMAL;if(e.parentNode){e.parentNode.insertBefore(outerElement,e)}e.style.display="none";outerElement.appendChild(e);outerElement.maxValue=e.hasAttribute("max")?parseInt(e.getAttribute("max")):0;outerElement.value=e.hasAttribute("value")?parseInt(e.getAttribute("value")):0;outerElement.className="bb-progress";outerElement.outer=document.createElement("div");outerElement.outer.setAttribute("class","outer bb-progress-outer-"+n+" bb-progress-outer-idle-background-"+n);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");if(bb.device.isBB10){outerElement.fill.normal="bb-progress-fill bb10Highlight"}else{outerElement.fill.normal="bb-progress-fill bbProgressHighlight"}outerElement.fill.setAttribute("class",outerElement.fill.normal);outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.outer.appendChild(outerElement.inner);e.outerElement=outerElement;e.setValue=function(e){var t=0,s,o;if(e&&e<0||e&&e>parseInt(this.outerElement.maxValue)){return}else if(e){this.outerElement.value=e;this.value=e}else if(e==0){this.outerElement.value=0;this.value=0}else{e=parseInt(this.outerElement.value)}if(e==this.outerElement.maxValue){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from("+i+"), to("+r+"))";t=1}else if(e==0){this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+n+" bb-progress-outer-idle-background-"+n)}else{if(this.outerElement.state==bb.progress.PAUSED){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from(#EDC842), to(#BA991E))"}else if(this.outerElement.state==bb.progress.ERROR){this.outerElement.fill.style.background="-webkit-gradient(linear, center top, center bottom, from( #E04242), to(#D91111))"}else{this.outerElement.outer.setAttribute("class","outer bb-progress-outer-"+n);this.outerElement.fill.setAttribute("class",this.outerElement.fill.normal);this.outerElement.fill.style.background=""}t=this.outerElement.value/parseInt(this.outerElement.maxValue)}o=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*t);this.outerElement.fill.style.width=o+"px"};e.setValue=e.setValue.bind(e);e.setState=function(e){this.outerElement.state=e;this.setValue()};e.setState=e.setState.bind(e);e.show=function(){this.outerElement.style.display="block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.outerElement.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.outerElement.parentNode.removeChild(this.outerElement);bb.refresh()};e.remove=e.remove.bind(e);e.setMax=function(e){if(!e||e<0||e==this.max)return;this.max=e;this.outerElement.maxValue=e};e.setMax=e.setMax.bind(e);if(t){e.onbbuidomready=function(){this.setValue();document.removeEventListener("bbuidomready",this.onbbuidomready,false)};e.onbbuidomready=e.onbbuidomready.bind(e);document.addEventListener("bbuidomready",e.onbbuidomready,false)}else{window.setTimeout(e.setValue,0)}outerElement.doOrientationChange=function(){window.setTimeout(this.progress.setValue,0)};outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement);window.addEventListener("resize",outerElement.doOrientationChange,false);bb.windowListeners.push({name:"resize",eventHandler:outerElement.doOrientationChange});return outerElement}};bb.screen={scriptCounter:0,totalScripts:0,controlColor:"light",listColor:"light",overlay:null,tabOverlay:null,contextMenu:null,currentScreen:null,focusedInput:null,animating:false,apply:function(e){var t,n;bb.screen.contextMenu=null;if(bb.device.isBB10&&bb.device.isPlayBook){t="bb-bb10-1024x600-screen"}else if(bb.device.isBB10){t="bb-bb10-1280x768-1280x720-screen"}else if(bb.device.isHiRes){t="bb-hires-screen"}for(var r=0;r<e.length;r++){n=e[r];bb.screen.currentScreen=n;n.setAttribute("class",t);var i=n.querySelectorAll("[data-bb-type=menu]");if(i.length>0){i=i[0];bb.menuBar.apply(i,n)}if(bb.device.isBB10){var s=n.querySelectorAll("[data-bb-type=title]"),o=n.querySelectorAll("[data-bb-type=action-bar]"),u=n.querySelectorAll("[data-bb-type=context-menu]"),a,f,l=[],c=null,h,p=bb.screen.getActionBarHeight(),d=bb.screen.getTitleBarHeight();if(s.length>0){s=s[0];n.titleBar=s}else{s=null}if(o.length>0){o=o[0];n.actionBar=o}else{o=null}a=document.createElement("div");n.appendChild(a);if(!n.hasAttribute("data-bb-scroll-effect")||n.getAttribute("data-bb-scroll-effect").toLowerCase()!="off"){n.bbUIscrollWrapper=a}f=document.createElement("div");a.appendChild(f);for(h=0;h<n.childNodes.length-1;h++){c=n.childNodes[h];if(c!=o&&c!=i&&c!=s){l.push(c)}}for(h=0;h<l.length;h++){f.appendChild(l[h])}n.actionBarHeight=p;n.titleBarHeight=d;n.outerScrollArea=a;a.addEventListener("scroll",function(){evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)},false);if(n.getAttribute("data-bb-indicator")){var v=document.createElement("div"),m=document.createElement("div");a.scrollArea=f;a.overlay=v;v.style["position"]="absolute";v.style["bottom"]="0px";v.style["top"]="0px";v.style["left"]="0px";v.style["right"]="0px";v.touchstart=function(e){e.preventDefault();e.stopPropagation()};v.touchend=function(e){e.preventDefault();e.stopPropagation()};v.click=function(e){e.preventDefault();e.stopPropagation()};a.appendChild(v);f.style.display="none";m.setAttribute("data-bb-type","activity-indicator");m.setAttribute("data-bb-size","large");if(bb.device.is720x720){m.style.margin="30% auto 0px auto"}else if(bb.getOrientation().toLowerCase()=="landscape"){m.style.margin="20% auto 0px auto"}else{m.style.margin="60% auto 0px auto"}v.appendChild(m);a.bbuidomprocessed=function(){this.scrollArea.style.display="";this.removeChild(this.overlay);document.removeEventListener("bbuidomprocessed",this.bbuidomprocessed,false);if(bb.device.isPlayBook&&bb.scroller){bb.scroller.refresh()}};a.bbuidomprocessed=a.bbuidomprocessed.bind(a);document.addEventListener("bbuidomprocessed",a.bbuidomprocessed,false)}if(s&&o){a.style["overflow"]="auto";a.style["position"]="absolute";a.style["bottom"]=p+"px";a.style["top"]=d+"px";a.style["left"]="0px";a.style["right"]="0px"}else if(s){a.style["overflow"]="auto";a.style["position"]="absolute";a.style["bottom"]="0px";a.style["top"]=d+"px";a.style["left"]="0px";a.style["right"]="0px"}else if(o){a.style["overflow"]="auto";a.style["position"]="absolute";a.style["bottom"]=p+"px";a.style["top"]="0px";a.style["left"]="0px";a.style["right"]="0px"}else{a.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:0px;left:0px;right:0px;");a.style["overflow"]="auto";a.style["position"]="absolute";a.style["bottom"]="0px";a.style["top"]="0px";a.style["left"]="0px";a.style["right"]="0px"}if(s){bb.titleBar.apply(s)}if(o){bb.actionBar.apply(o,n)}if(u.length>0){bb.screen.processContext(u[0],n)}else{u=null}}else if(bb.device.isPlayBook){var s=n.querySelectorAll("[data-bb-type=title]"),a,f,l=[],c=null,h,o=n.querySelectorAll("[data-bb-type=action-bar]"),u=n.querySelectorAll("[data-bb-type=context-menu]");for(h=0;h<o.length;h++){o[h].style.display="none"}for(h=0;h<u.length;h++){u[h].style.display="none"}if(s.length>0){s=s[0]}else{s=null}a=document.createElement("div");n.appendChild(a);if(!n.hasAttribute("data-bb-scroll-effect")||n.getAttribute("data-bb-scroll-effect").toLowerCase()!="off"){n.bbUIscrollWrapper=a}f=document.createElement("div");a.appendChild(f);for(h=0;h<n.childNodes.length-1;h++){c=n.childNodes[h];if(c!=s){l.push(c)}}for(h=0;h<l.length;h++){f.appendChild(l[h])}if(s){a.style["overflow"]="auto";a.style["bottom"]="0px";a.style["position"]="absolute";a.style["top"]="55px";a.style["left"]="0px";a.style["right"]="0px";bb.titleBar.apply(s)}else{a.setAttribute("style","overflow:auto;bottom:0px;position:absolute;top:0px;left:0px;right:0px;");a.style["overflow"]="auto";a.style["bottom"]="0px";a.style["position"]="absolute";a.style["top"]="0px";a.style["left"]="0px";a.style["right"]="0px"}}else{var s=n.querySelectorAll("[data-bb-type=title]"),o=n.querySelectorAll("[data-bb-type=action-bar]"),u=n.querySelectorAll("[data-bb-type=context-menu]");for(h=0;h<o.length;h++){o[h].style.display="none"}for(h=0;h<u.length;h++){u[h].style.display="none"}if(s.length>0){s=s[0];bb.titleBar.apply(s)}}n.refresh=function(){if(!bb.scroller)return;bb.scroller.refresh()};n.refresh=n.refresh.bind(n);n.scrollTo=function(e,t){if(bb.scroller){bb.scroller.scrollTo(e,t)}else if(bb.device.isBB10){this.bbUIscrollWrapper.scrollTop=e}};n.scrollTo=n.scrollTo.bind(n);n.scrollToElement=function(e){if(bb.scroller){bb.scroller.scrollToElement(e)}else if(bb.device.isBB10){if(!e)return;var t=0,n=e;if(n.offsetParent){do{t+=n.offsetTop}while(n=n.offsetParent)}if(bb.screen.currentScreen.titleBar){t-=bb.screen.currentScreen.titleBarHeight}if(bb.screen.currentScreen.actionBar){t-=bb.screen.getActionBarHeight()}this.scrollTo(t)}};n.scrollToElement=n.scrollToElement.bind(n)}},processContext:function(e,t){t.appendChild(e);e.menu=bb.contextMenu.create(t);e.appendChild(e.menu);bb.screen.contextMenu=e.menu;var n=e.querySelectorAll("[data-bb-type=action]"),r;for(r=0;r<n.length;r++){e.menu.add(n[r])}e.menu.centerMenuItems()},fadeIn:function(e){var t=.3,n="ease-out",r=e.style;r["-webkit-animation-name"]="bbUI-fade-in";r["-webkit-animation-duration"]=t+"s";r["-webkit-animation-timing-function"]=n;r["-webkit-transform"]="translate3d(0,0,0)";r["-webkit-backface-visibility"]="hidden"},fadeOut:function(e){var t=.3,n="ease-out",r=e.style;r["-webkit-animation-name"]="bbUI-fade-out";r["-webkit-animation-duration"]=t+"s";r["-webkit-animation-timing-function"]=n;r["-webkit-transform"]="translate3d(0,0,0)";r["-webkit-backface-visibility"]="hidden"},slideLeft:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.width=bb.innerWidth()+"px";i["-webkit-animation-name"]="bbUI-slide-left";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideOutLeft:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.width=bb.innerWidth()+"px";i["-webkit-animation-name"]="bbUI-slide-out-left";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideRight:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.width=bb.innerWidth()+"px";i["-webkit-animation-name"]="bbUI-slide-right";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideOutRight:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.width=bb.innerWidth()+"px";i["-webkit-animation-name"]="bbUI-slide-out-right";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideUp:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.height=bb.innerHeight()+"px";i["-webkit-animation-name"]="bbUI-slide-up";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideOutUp:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.height=bb.innerHeight()+"px";i["-webkit-animation-name"]="bbUI-slide-out-up";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideDown:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.height=bb.innerHeight()+"px";i["-webkit-animation-name"]="bbUI-slide-down";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},slideOutDown:function(e){var t=0,n=.3,r="ease-out",i=e.style;i.height=bb.innerHeight()+"px";i["-webkit-animation-name"]="bbUI-slide-out-down";i["-webkit-animation-duration"]=n+"s";i["-webkit-animation-timing-function"]=r;i["-webkit-transform"]="translate3d(0,0,0)";i["-webkit-backface-visibility"]="hidden"},reAdjustHeight:function(){if(bb.device.isBB5){document.body.style.height=screen.height-27+"px"}else if(bb.device.isBB6){document.body.style.height=screen.height-17+"px"}else if(bb.device.isBB7&&navigator.appVersion.indexOf("Ripple")<0){document.body.style.height=screen.height+"px"}},getActionBarHeight:function(){if(bb.device.is1024x600){return bb.getOrientation().toLowerCase()=="portrait"?73:73}else if(bb.device.is1280x768||bb.device.is1280x720){return bb.getOrientation().toLowerCase()=="portrait"?140:100}else if(bb.device.is720x720){return 110}else{return bb.getOrientation().toLowerCase()=="portrait"?140:100}},getTitleBarHeight:function(){if(bb.device.is1024x600){return 65}else if(bb.device.is1280x768||bb.device.is1280x720){return 111}else{return 111}}};bb.tabOverflow={create:function(e){var t=document.createElement("div"),n;t.screen=e;t.itemClicked=false;t.visible=false;t.actions=[];t.tabOverflowState={display:undefined,img:undefined,style:undefined,caption:undefined};if(bb.device.is1024x600){t.res="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t.res="1280x768-1280x720"}else{t.res="1280x768-1280x720"}t.setAttribute("class","bb-bb10-tab-overflow-menu bb-bb10-tab-overflow-menu-dark");e.parentNode.appendChild(t);t.style["z-index"]="-100";t.style.display="none";t.style.width=t.width+"px";if(!bb.screen.tabOverlay){n=document.createElement("div");n.menu=t;bb.screen.tabOverlay=n;n.setAttribute("class","bb-bb10-tab-overflow-menu-overlay ");e.appendChild(n);n.ontouchstart=function(e){e.preventDefault();e.stopPropagation();this.menu.hide()}}t.overlay=bb.screen.tabOverlay;t.doEndTransition=function(){if(this.visible){this.style["z-index"]=""}else{this.style.display="none";this.style.width="0px";this.screen.removeEventListener("webkitTransitionEnd",t.doEndTransition);this.screen.style["-webkit-transition"]="";this.screen.style["-webkit-transform"]="";this.screen.style["-webkit-backface-visibility"]=""}};t.doEndTransition=t.doEndTransition.bind(t);t.show=function(){this.itemClicked=false;this.visible=true;var e=this.actionBar.tabOverflowBtn;this.tabOverflowState.display=e.tabHighlight.style.display;this.tabOverflowState.img=e.icon.src;this.tabOverflowState.caption=e.display.innerHTML;this.tabOverflowState.style=e.icon.getAttribute("class");this.screen.addEventListener("webkitTransitionEnd",t.doEndTransition);this.setDimensions();e.reset()};t.show=t.show.bind(t);t.setDimensions=function(){this.style.display="";this.style.width=bb.tabOverflow.getWidth()+"px";this.screen.parentNode.style.position="absolute";this.screen.parentNode.style.left="0px";this.screen.parentNode.style.top="0px";this.screen.parentNode.style.bottom="0px";this.screen.parentNode.style.right="0px";this.screen.parentNode.style.width="100%";this.screen.parentNode.style["overflow"]="hidden";this.overlay.style.display="block";this.screen.style["-webkit-transition"]="0.2s ease-out";this.screen.style["-webkit-transform"]="translate3d("+bb.tabOverflow.getWidth()+"px,0px,0px)";this.screen.style["-webkit-backface-visibility"]="hidden"};t.setDimensions=t.setDimensions.bind(t);t.hide=function(){this.visible=false;this.style["z-index"]="-100";this.screen.style["-webkit-transform"]="translate3d(0px,0px,0px)";this.overlay.style.display="none";if(!this.itemClicked){var e=this.actionBar.tabOverflowBtn;e.icon.setAttribute("src",this.tabOverflowState.img);e.icon.setAttribute("class",this.tabOverflowState.style);e.tabHighlight.style.display=this.tabOverflowState.display;e.display.innerHTML=this.tabOverflowState.caption}};t.hide=t.hide.bind(t);t.onclick=function(){this.hide()};t.centerMenuItems=function(){var e=bb.innerHeight(),t=111,n;if(bb.device.is1024x600){t=53}else if(bb.device.is1280x768||bb.device.is1280x720){t=111}n=e-Math.floor(e/2)-Math.floor(this.actions.length*t/2)-t;if(n<0)n=0;this.actions[0].style["margin-top"]=n+"px"};t.centerMenuItems=t.centerMenuItems.bind(t);t.initSelected=function(){var e,t;for(e=0;e<this.actions.length;e++){t=this.actions[e];if(t.initialSelected){t.setOverflowTab(true);break}}};t.initSelected=t.initSelected.bind(t);t.orientationChanged=function(e){this.centerMenuItems();if(this.visible){this.setDimensions()}};t.orientationChanged=t.orientationChanged.bind(t);window.addEventListener("orientationchange",t.orientationChanged,false);bb.windowListeners.push({name:"orientationchange",eventHandler:t.orientationChanged});t.add=function(e){var t,n=e.innerHTML,r=e.getAttribute("data-bb-accent-text"),i=document.createElement("div"),s="bb-bb10-tab-overflow-menu-item-inner-"+this.res,o=document.createElement("img"),u,a,f;t="bb-bb10-tab-overflow-menu-item-"+this.res+" bb-bb10-tab-overflow-menu-item-"+this.res+"-dark";this.appendChild(e);if(e.hasAttribute("data-bb-visible")&&e.getAttribute("data-bb-visible").toLowerCase()=="false"){e.visible=false;e.style.display="none"}else{e.visible=true;this.actions.push(e)}if(this.actions.length==1){t=t+" bb-bb10-tab-overflow-menu-item-first-"+this.res+"-dark"}e.normal=t;e.accentText=null;e.menu=this;e.caption=n;e.setAttribute("class",e.normal);e.innerHTML="";if(!e.visibleTab){e.visibleTab=e.actionBar.tabOverflowBtn}u=document.createElement("table");a=document.createElement("tr");u.appendChild(a);e.appendChild(u);f=document.createElement("td");o.setAttribute("src",e.getAttribute("data-bb-img"));o.setAttribute("class","bb-bb10-tab-overflow-menu-item-image-"+this.res);e.img=o;f.appendChild(o);a.appendChild(f);f=document.createElement("td");i.innerHTML=n;e.display=i;f.appendChild(i);if(r){e.accentText=document.createElement("div");e.accentText.innerHTML=r;e.accentText.setAttribute("class","tab-accent-text");f.appendChild(e.accentText);s=s+" bb-bb10-tab-overflow-menu-item-double-"+this.res}else{s=s+" bb-bb10-tab-overflow-menu-item-single-"+this.res}i.setAttribute("class",s);a.appendChild(f);e.setOverflowTab=function(e){var t=this.actionBar.tabOverflowBtn;if(e){bb.actionBar.highlightAction(this.visibleTab,this)}if(this.visibleTab==t){t.icon.setAttribute("src",this.img.src);t.icon.setAttribute("class",t.icon.highlight);t.tabHighlight.style.display="block";t.display.innerHTML=this.caption}};e.setOverflowTab=e.setOverflowTab.bind(e);e.initialSelected=e.hasAttribute("data-bb-selected")&&e.getAttribute("data-bb-selected").toLowerCase()=="true";e.oldClick=e.onclick;e.onclick=function(){var e=this.actionBar.tabOverflowBtn;this.menu.itemClicked=true;bb.actionBar.highlightAction(this.visibleTab,this);if(this.visibleTab==e){this.setOverflowTab(false)}if(this.oldClick){this.oldClick()}};e.setCaption=function(e){this.display.innerHTML=e};e.setCaption=e.setCaption.bind(e);e.setImage=function(e){this.img.setAttribute("src",e)};e.setImage=e.setImage.bind(e);e.show=function(){if(this.visible)return;this.visible=true;this.menu.actions.push(this);this.style.display="";this.menu.centerMenuItems()};e.show=e.show.bind(e);e.hide=function(){if(!this.visible)return;this.visible=false;var e=this.menu.actions.indexOf(this);this.menu.actions.splice(e,1);this.style.display="none";this.menu.centerMenuItems()};e.hide=e.hide.bind(e)};t.add=t.add.bind(t);return t},getWidth:function(){if(bb.device.is1024x600){return bb.getOrientation()=="portrait"?bb.innerWidth()-77:400}else if(bb.device.is1280x768||bb.device.is1280x720){return bb.getOrientation()=="portrait"?bb.innerWidth()-154:700}else{return bb.getOrientation()=="portrait"?bb.innerWidth()-154:700}}};bb.titleBar={apply:function(titleBar){if(bb.device.isBB10){var res="1280x768-1280x720",orientation=bb.getOrientation(),button,caption,titleBarClass,details,topTitleArea=document.createElement("div"),img,accentText;if(bb.device.is1024x600){res="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){res="1280x768-1280x720"}titleBar.topTitleArea=topTitleArea;titleBar.appendChild(topTitleArea);if(bb.options.coloredTitleBar){titleBarClass="bb-bb10-title-bar-"+res+" bb-bb10-title-bar-"+orientation+"-"+res+" bb10-title-colored"}else{titleBarClass="bb-bb10-title-bar-"+res+" bb-bb10-title-bar-"+orientation+"-"+res+" bb-bb10-title-bar-"+bb.screen.controlColor}topTitleArea.setAttribute("class",titleBarClass);caption=document.createElement("div");titleBar.caption=caption;caption.setAttribute("class","bb-bb10-title-bar-caption-"+res+" bb-bb10-title-bar-caption-"+orientation+"-"+res);caption.innerHTML=titleBar.getAttribute("data-bb-caption");topTitleArea.appendChild(caption);if(titleBar.hasAttribute("data-bb-back-caption")){button=document.createElement("div");button.innerHTML=titleBar.getAttribute("data-bb-back-caption");topTitleArea.appendChild(button);titleBar.backButton=button;button.onclick=bb.popScreen;bb.titleBar.styleBB10Button(button);button.style.left="0px"}if(titleBar.hasAttribute("data-bb-action-caption")){button=document.createElement("div");button.innerHTML=titleBar.getAttribute("data-bb-action-caption");if(titleBar.hasAttribute("onactionclick")){button.titleBar=titleBar;button.onactionclick=titleBar.getAttribute("onactionclick");titleBar.onactionclick=function(){eval(this.actionButton.onactionclick)};button.onclick=function(){if(this.titleBar.onactionclick){this.titleBar.onactionclick()}}}else if(titleBar.onactionclick){button.onclick=titleBar.onactionclick}bb.titleBar.styleBB10Button(button);button.style.right="0px";topTitleArea.appendChild(button);titleBar.actionButton=button}if(titleBar.actionButton||titleBar.backButton){titleBar.evenButtonWidths=function(){var e=this.backButton?parseInt(window.getComputedStyle(this.backButton).width):0,t=this.actionButton?parseInt(window.getComputedStyle(this.actionButton).width):0,n;if(this.actionButton&&this.backButton){n=e>t?e:t;this.backButton.style.width=n+"px";this.actionButton.style.width=n+"px";this.caption.style["margin-left"]=n+24+"px";this.caption.style["margin-right"]=n+24+"px"}else if(this.actionButton){this.caption.style["margin-left"]="0px";this.caption.style["margin-right"]=t+24+"px"}else if(this.backButton){this.caption.style["margin-right"]="0px";this.caption.style["margin-left"]=e+24+"px"}};titleBar.evenButtonWidths=titleBar.evenButtonWidths.bind(titleBar);window.setTimeout(titleBar.evenButtonWidths,0)}if(!titleBar.actionButton&&!titleBar.backButton&&(titleBar.hasAttribute("data-bb-img")||titleBar.hasAttribute("data-bb-accent-text"))){caption.setAttribute("class","bb-bb10-title-bar-caption-left-"+res);details=document.createElement("div");titleBar.details=details;topTitleArea.appendChild(details);details.appendChild(caption);if(titleBar.hasAttribute("data-bb-img")){img=document.createElement("img");titleBar.img=img;topTitleArea.insertBefore(img,details);details.setAttribute("class","bb-bb10-title-bar-caption-details-img-"+res);img.style.opacity="0";img.style["-webkit-transition"]="opacity 0.5s linear";img.style["-webkit-backface-visibility"]="hidden";img.style["-webkit-perspective"]=1e3;img.style["-webkit-transform"]="translate3d(0,0,0)";titleBar.onbbuidomready=function(){this.img.onload=function(){this.style.opacity="1.0"};this.img.src=this.getAttribute("data-bb-img");document.removeEventListener("bbuidomready",this.onbbuidomready,false)};titleBar.onbbuidomready=titleBar.onbbuidomready.bind(titleBar);document.addEventListener("bbuidomready",titleBar.onbbuidomready,false)}if(titleBar.hasAttribute("data-bb-accent-text")){if(bb.device.is1024x600){caption.style["line-height"]="40px"}else if(bb.device.is1280x768||bb.device.is1280x720){caption.style["line-height"]="70px"}else{caption.style["line-height"]="70px"}accentText=document.createElement("div");accentText.setAttribute("class","bb-bb10-title-bar-accent-text-"+res);if(bb.options.coloredTitleBar){accentText.style.color="silver"}titleBar.accentText=accentText;accentText.innerHTML=titleBar.getAttribute("data-bb-accent-text");details.appendChild(accentText)}}titleBar.setCaption=function(e){this.caption.innerHTML=e};titleBar.setCaption=titleBar.setCaption.bind(titleBar);titleBar.getCaption=function(){return this.caption.innerHTML};titleBar.getCaption=titleBar.getCaption.bind(titleBar);titleBar.setBackCaption=function(e){this.backButton.firstChild.innerHTML=e;if(this.actionButton){this.backButton.style.width="";this.evenButtonWidths()}};titleBar.setBackCaption=titleBar.setBackCaption.bind(titleBar);titleBar.getBackCaption=function(){return this.backButton.firstChild.innerHTML};titleBar.getBackCaption=titleBar.getBackCaption.bind(titleBar);titleBar.setActionCaption=function(e){this.actionButton.firstChild.innerHTML=e;if(this.backButton){this.actionButton.style.width="";this.evenButtonWidths()}};titleBar.setActionCaption=titleBar.setActionCaption.bind(titleBar);titleBar.getActionCaption=function(){return this.actionButton.firstChild.innerHTML};titleBar.getActionCaption=titleBar.getActionCaption.bind(titleBar);titleBar.getAccentText=function(){return this.accentText.innerHTML};titleBar.getAccentText=titleBar.getAccentText.bind(titleBar)}else if(bb.device.isPlayBook){titleBar.setAttribute("class","pb-title-bar");titleBar.innerHTML=titleBar.getAttribute("data-bb-caption");if(titleBar.hasAttribute("data-bb-back-caption")){var button=document.createElement("div"),buttonInner=document.createElement("div");button.setAttribute("class","pb-title-bar-back");button.onclick=bb.popScreen;buttonInner.setAttribute("class","pb-title-bar-back-inner");buttonInner.innerHTML=titleBar.getAttribute("data-bb-back-caption");button.appendChild(buttonInner);titleBar.appendChild(button)}}else{if(titleBar.hasAttribute("data-bb-caption")){if(bb.device.isHiRes){titleBar.setAttribute("class","bb-hires-screen-title")}else{titleBar.setAttribute("class","bb-lowres-screen-title")}titleBar.innerHTML=titleBar.getAttribute("data-bb-caption")}}},styleBB10Button:function(e){var t="1280x768-1280x720",n=document.createElement("div"),r,i,s;if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}if(bb.options.coloredTitleBar){r="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+t+" bb10-title-button-colored";i="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+t+" bb10-title-button-colored-highlight";s="bb-bb10-titlebar-button-container-"+t+" bb10-title-button-container-colored"}else{r="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+t+" bb-bb10-titlebar-button-"+bb.screen.controlColor;i="bb-bb10-titlebar-button bb-bb10-titlebar-button-"+t+" bb-bb10-titlebar-button-highlight-"+bb.screen.controlColor;s="bb-bb10-titlebar-button-container-"+t+" bb-bb10-titlebar-button-container-"+bb.screen.controlColor}e.enabled=true;n.innerHTML=e.innerHTML;e.innerHTML="";e.appendChild(n);n.setAttribute("class",r);e.setAttribute("class",s);e.outerNormal=s;e.innerElement=n;n.normal=r;n.highlight=i;e.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};e.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)};e.trappedClick=e.onclick;e.onclick=undefined;if(e.trappedClick!==null){e.addEventListener("click",function(e){if(this.enabled){this.trappedClick()}},false)}}};_bb10_activityIndicator={apply:function(e){var t,n,r,i,s=bb.screen.controlColor,o="1280x768-1280x720",u,a,f;if(bb.device.is1024x600){o="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){o="1280x768-1280x720"}else if(bb.device.is720x720){o="720x720"}if(e.length>0){var l=document.createElement("canvas"),c,h;l.setAttribute("height","184px");l.setAttribute("width","184px");c=l.getContext("2d");c.beginPath();c.moveTo(92,154);c.arcTo(154,154,154,92,62);c.arcTo(154,30,92,30,62);c.arcTo(81,30,81,20,10);c.arcTo(81,10,91,10,10);c.arcTo(173,10,173,92,82);c.arcTo(173,173,92,173,82);c.arcTo(81,173,81,164,10);c.arcTo(81,154,92,154,10);c.closePath();c.strokeStyle="transparent";c.stroke();var h=c.createLinearGradient(0,50,0,154);h.addColorStop(0,"transparent");h.addColorStop(1,bb.options.highlightColor);c.fillStyle=h;c.fill();f=l.toDataURL()}for(t=0;t<e.length;t++){n=e[t];u=n.hasAttribute("data-bb-size")?n.getAttribute("data-bb-size").toLowerCase():"medium";if(u=="large"){if(bb.device.is1024x600){a="93px"}else if(bb.device.is1280x768||bb.device.is1280x720){a="184px"}else if(bb.device.is720x720){a="170px"}else{a="184px"}}else if(u=="small"){if(bb.device.is1024x600){a="21px"}else if(bb.device.is1280x768||bb.device.is1280x720){a="41px"}else{a="41px"}}else{u="medium";if(bb.device.is1024x600){a="46px"}else if(bb.device.is1280x768||bb.device.is1280x720){a="93px"}else if(bb.device.is720x720){a="88px"}else{a="93px"}}n.style.width=a;i=document.createElement("div");i.setAttribute("class","bb-bb10-activity-margin-"+o+" bb-bb10-activity-"+u+"-"+o+" bb-activity-"+s);n.appendChild(i);r=document.createElement("div");r.setAttribute("class","bb-bb10-activity-"+u+"-"+o);r.style["background-image"]='url("'+f+'")';i.appendChild(r);r.style["-webkit-animation-name"]="activity-rotate";r.style["-webkit-animation-duration"]="0.8s";r.style["-webkit-animation-iteration-count"]="infinite";r.style["-webkit-animation-timing-function"]="linear";n.show=function(){this.style.display="";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bb10_button={apply:function(e){for(var t=0;t<e.length;t++){bb.button.style(e[t])}},style:function(e){var t="1280x768-1280x720";if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}var n,r,i,s,o=document.createElement("div"),u=document.createElement("div");disabled=e.hasAttribute("data-bb-disabled"),normal="bb-bb10-button bb-bb10-button-"+t,highlight="bb-bb10-button bb-bb10-button-"+t+" bb10-button-highlight",outerNormal="bb-bb10-button-container-"+t+" bb-bb10-button-container-"+bb.screen.controlColor,outerNormalWithoutImageOnly=outerNormal;e.isImageOnly=false;e.enabled=!disabled;i=e.innerHTML;o.innerHTML=i;e.innerHTML="";e.stretched=false;e.captionElement=o;e.appendChild(u);e.innerElement=u;if(e.hasAttribute("data-bb-style")){var a=e.getAttribute("data-bb-style");if(a=="stretch"){outerNormal=outerNormal+" bb-bb10-button-stretch";e.stretched=true}}r=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):undefined;if(r){if(!i||i.length==0){outerNormal=outerNormal+" bb-bb10-button-container-image-only-"+t;o.style["background-image"]='url("'+r+'")';e.style["line-height"]="0px";o.setAttribute("class","bb-bb10-button-caption-with-image-only-"+t);e.isImageOnly=true}else{o.setAttribute("class","bb-bb10-button-caption-with-image-"+t);s=document.createElement("div");e.imgElement=s;s.setAttribute("class","bb-bb10-button-image-"+t);s.style["background-image"]='url("'+r+'")';u.appendChild(s)}}u.appendChild(o);n=normal+" bb-bb10-button-disabled-"+bb.screen.controlColor;normal=normal+" bb-bb10-button-"+bb.screen.controlColor;if(disabled){e.removeAttribute("data-bb-disabled");u.setAttribute("class",n)}else{u.setAttribute("class",normal)}e.setAttribute("class",outerNormal);e.outerNormal=outerNormal;e.outerNormalWithoutImageOnly=outerNormalWithoutImageOnly;e.innerElement=u;u.normal=normal;u.highlight=highlight;u.disabledStyle=n;if(!disabled){e.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};e.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)}}e.trappedClick=e.onclick;e.onclick=undefined;if(e.trappedClick!==null){e.addEventListener("click",function(e){if(this.enabled){this.trappedClick()}},false)}e.setCaption=function(e){if(this.isImageOnly&&e.length>0){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-"+t);var n=document.createElement("div");this.imgElement=n;n.setAttribute("class","bb-bb10-button-image-"+t);n.style["background-image"]=this.captionElement.style["background-image"];this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(n);this.innerElement.appendChild(this.captionElement);this.setAttribute("class",this.outerNormalWithoutImageOnly);this.captionElement.style["background-image"]="";this.isImageOnly=false}else if(e.length==0&&this.imgElement){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-only-"+t);this.setAttribute("class",this.outerNormalWithoutImageOnly+" bb-bb10-button-container-image-only-"+t);this.captionElement.style["background-image"]=this.imgElement.style["background-image"];this.isImageOnly=true;this.innerElement.removeChild(this.imgElement);this.imgElement=null}this.captionElement.innerHTML=e};e.setImage=function(e){if(this.isImageOnly){this.captionElement.style["background-image"]='url("'+e+'")'}else if(this.imgElement&&e.length>0){this.imgElement.style["background-image"]='url("'+e+'")'}else if(e.length>0){this.captionElement.setAttribute("class","bb-bb10-button-caption-with-image-"+t);var n=document.createElement("div");this.imgElement=n;n.setAttribute("class","bb-bb10-button-image-"+t);n.style["background-image"]='url("'+e+'")';this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(n);this.innerElement.appendChild(this.captionElement)}else if(this.imgElement&&e.length==0){this.innerElement.removeChild(this.imgElement);this.imgElement=null;this.captionElement.setAttribute("class","")}};e.enable=function(){if(this.enabled)return;this.innerElement.setAttribute("class",this.innerElement.normal);this.ontouchstart=function(){this.innerElement.setAttribute("class",this.innerElement.highlight)};this.ontouchend=function(){this.innerElement.setAttribute("class",this.innerElement.normal)};this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!this.enabled)return;this.innerElement.setAttribute("class",this.innerElement.disabledStyle);this.ontouchstart=null;this.ontouchend=null;this.enabled=false};e.disable=e.disable.bind(e);e.show=function(){this.style.display=this.stretched?"block":"inline-block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);return e}};_bb10_checkbox={apply:function(e){for(var t=0;t<e.length;t++){bb.checkbox.style(e[t])}},style:function(e){var t,n,r,i,s="1280x768-1280x720",o=bb.screen.controlColor;if(bb.device.is1024x600){s="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){s="1280x768-1280x720"}t=document.createElement("div");t.setAttribute("class","bb-bb10-checkbox-target-"+s);if(e.parentNode){e.parentNode.insertBefore(t,e)}e.style.display="none";t.appendChild(e);t.input=e;e.touchTarget=t;n=document.createElement("div");n.setAttribute("class","bb-bb10-checkbox-outer-"+s+" bb-bb10-checkbox-outer-"+o);t.appendChild(n);r=document.createElement("div");r.normal="bb-bb10-checkbox-inner-"+s+" bb-bb10-checkbox-inner-"+o;r.setAttribute("class",r.normal);n.appendChild(r);i=document.createElement("div");i.hiddenClass="bb-bb10-checkbox-check-hidden-"+s+" bb-bb10-checkbox-check-image";i.displayClass="bb-bb10-checkbox-check-display-"+s+" bb-bb10-checkbox-check-image";i.setAttribute("class",i.hiddenClass);i.style["-webkit-transition-property"]="all";i.style["-webkit-transition-duration"]="0.1s";r.appendChild(i);t.checkElement=i;t.innerElement=r;t.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)";t.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)";t.ontouchstart=function(){if(!this.input.checked&&!this.input.disabled){this.innerElement.style.background=this.touchHighlight}};t.ontouchend=function(){if(!this.input.checked&&!this.input.disabled){this.innerElement.style.background=""}};t.onclick=function(){if(!this.input.disabled){var e=document.createEvent("HTMLEvents");e.initEvent("change",false,true);this.input.checked=!this.input.checked;this.drawChecked();this.input.dispatchEvent(e)}};t.drawChecked=function(){if(this.input.checked){this.checkElement.setAttribute("class",this.checkElement.displayClass);this.innerElement.style["background-image"]=t.highlight}else{this.checkElement.setAttribute("class",this.checkElement.hiddenClass);this.innerElement.style["background-image"]=""}if(this.input.disabled){this.innerElement.parentNode.setAttribute("class","bb-bb10-checkbox-outer-"+s+" bb-bb10-checkbox-outer-disabled-"+o);this.innerElement.setAttribute("class","bb-bb10-checkbox-inner-"+s+" bb-bb10-checkbox-inner-disabled-"+o);this.innerElement.style.background="#c0c0c0"}else{this.innerElement.parentNode.setAttribute("class","bb-bb10-checkbox-outer-"+s+" bb-bb10-checkbox-outer-"+o);this.innerElement.setAttribute("class","bb-bb10-checkbox-inner-"+s+" bb-bb10-checkbox-inner-"+o)}};t.drawChecked=t.drawChecked.bind(t);e.setChecked=function(e){if(e==this.checked)return;this.checked=e;this.touchTarget.drawChecked()};e.setChecked=e.setChecked.bind(e);e.getChecked=function(){return this.checked};e.getChecked=e.getChecked.bind(e);e.enable=function(){this.removeAttribute("disabled");this.enabled=true;this.touchTarget.drawChecked()};e.enable=e.enable.bind(e);e.disable=function(){this.enabled=false;this.setAttribute("disabled","disabled");this.touchTarget.drawChecked()};e.disable=e.disable.bind(e);e.show=function(){this.touchTarget.style.display="block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.touchTarget.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.touchTarget.parentNode.removeChild(this.touchTarget);bb.refresh()};e.remove=e.remove.bind(e);t.drawChecked();return t}};_bb10_dropdown={apply:function(e){for(i=0;i<e.length;i++){bb.dropdown.style(e[i])}},style:function(e){var t="1280x768-1280x720";if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}var n,r,i,s,o,u,a,f,l,c,h=!e.hasAttribute("disabled"),p="bb-bb10-dropdown bb-bb10-dropdown-"+t+" bb-bb10-dropdown-"+bb.screen.controlColor+" bb-bb10-dropdown-"+t,d="bb-bb10-dropdown bb-bb10-dropdown-"+t+" bb-bb10-dropdown-highlight-"+bb.screen.controlColor+" bb10Highlight bb-bb10-dropdown-"+t,v="bb-bb10-dropdown-container-"+t+" bb-bb10-dropdown-container-"+bb.screen.controlColor+" bb-bb10-dropdown-container-"+t,m="bb-bb10-dropdown-container-inner-"+t+" bb-bb10-dropdown-container-inner-"+bb.screen.controlColor,g="bb-bb10-dropdown-inner-"+t+" bb-bb10-dropdown-inner-"+bb.screen.controlColor;e.style.display="none";e.enabled=h;a=document.createElement("div");a.select=e;a.items=[];a.setAttribute("data-bb-type","dropdown");e.dropdown=a;if(e.parentNode){e.parentNode.insertBefore(a,e)}a.appendChild(e);o=document.createElement("div");o.setAttribute("class",m);a.appendChild(o);if(e.hasAttribute("data-bb-style")){var y=e.getAttribute("data-bb-style");if(y=="stretch"){p=p+" bb-bb10-dropdown-stretch";d=d+" bb-bb10-dropdown-stretch"}}u=document.createElement("div");if(e.enabled){u.setAttribute("class",p)}else{u.setAttribute("class",p+" bb-bb10-dropdown-disabled-"+bb.screen.controlColor)}o.appendChild(u);s=document.createElement("div");s.setAttribute("class",g);u.appendChild(s);f=document.createElement("div");a.labelElement=f;f.setAttribute("class","bb-bb10-dropdown-label-"+t);if(e.hasAttribute("data-bb-label")){f.innerHTML=e.getAttribute("data-bb-label")}s.appendChild(f);n=document.createElement("div");n.setAttribute("class","bb-bb10-dropdown-arrow-"+t+"-"+bb.screen.controlColor);s.appendChild(n);a.img=n;l=document.createElement("div");a.captionElement=l;l.setAttribute("class","bb-bb10-dropdown-caption-"+t);s.appendChild(l);var b=document.createElement("div");b.style.position="relative";b.style["margin-top"]="10px";b.style.overflow="hidden";o.appendChild(b);var w=document.createElement("div");b.appendChild(w);c=document.createElement("div");a.itemsElement=c;c.setAttribute("class","bb-bb10-dropdown-items");w.appendChild(c);a.refreshOptions=function(){var r=e.getElementsByTagName("option"),s="",o,u;this.itemsElement.innerHTML="";this.items=[];this.options=r;for(i=0;i<r.length;i++){o=r[i];u=document.createElement("div");this.items.push(u);u.selectedStyle="bb-bb10-dropdown-item-"+t+" bb-bb10-dropdown-item-"+bb.screen.controlColor+" bb-bb10-dropdown-item-selected-"+bb.screen.controlColor;u.normalStyle="bb-bb10-dropdown-item-"+t+" bb-bb10-dropdown-item-"+bb.screen.controlColor;u.index=i;u.select=this.select;u.dropdown=this;if(!u.dropdown.selected){u.dropdown.selected=u}u.innerHTML=o.innerHTML;this.itemsElement.appendChild(u);n=document.createElement("div");n.setAttribute("class","bb-bb10-dropdown-selected-image-"+t+"-"+bb.screen.controlColor);u.img=n;u.appendChild(n);if(o.hasAttribute("selected")||o.selected){s=o.innerHTML;u.setAttribute("class",u.selectedStyle);n.style.visibility="visible";u.dropdown.selected=u}else{u.setAttribute("class",u.normalStyle)}u.ontouchstart=function(e){this.style["background-color"]=bb.options.highlightColor;this.style["color"]="white"};u.ontouchend=function(e){this.style["background-color"]="transparent";this.style["color"]=""};u.onclick=function(){this.select.setSelectedItem(this.index)}}if(s==""&&r.length>0){s=r[0].innerHTML}if(s!=""){l.innerHTML=s}};a.refreshOptions=a.refreshOptions.bind(a);a.refreshOptions();a.setAttribute("class",v);a.buttonOuter=u;a.isRefreshed=false;a.caption=l;u.dropdown=a;a.open=false;u.normal=p;u.highlight=d;a.scroller=new iScroll(b,{vScrollbar:false,onBeforeScrollStart:function(e){if(bb.scroller){bb.scroller.disable()}e.preventDefault()},onBeforeScrollEnd:function(e){if(bb.scroller){bb.scroller.enable()}}});bb.dropdownScrollers.push(a.scroller);a.scrollArea=b;u.dotouchstart=function(e){this.setAttribute("class",this.highlight)};u.dotouchend=function(e){this.setAttribute("class",this.normal)};u.doclick=function(e){if(!this.dropdown.open){this.dropdown.internalShow()}else{this.dropdown.internalHide()}};if(e.enabled){u.ontouchstart=u.dotouchstart;u.ontouchend=u.dotouchend;u.onclick=u.doclick}a.internalShow=function(){var e;this.open=true;if(this.options.length>5){this.numItems=5}else{this.numItems=this.options.length}if(bb.device.is1024x600){e=this.numItems*43;this.style.height=45+e+"px"}else if(bb.device.is1280x768||bb.device.is1280x720){e=this.numItems*99;this.style.height=95+e+"px"}else{e=this.numItems*99;this.style.height=95+e+"px"}this.scrollArea.style.height=e-10+"px";if(!this.isRefreshed){this.scroller.refresh();this.isRefreshed=true}this.scroller.scrollToElement(this.selected,0);this.caption.style.opacity="0.0";this.caption.style["-webkit-transition"]="opacity 0.5s linear";this.caption.style["-webkit-backface-visibility"]="hidden";this.caption.style["-webkit-perspective"]=1e3;this.caption.style["-webkit-transform"]="translate3d(0,0,0)";this.img.style.opacity="1.0";this.img.style["-webkit-transition"]="all 0.5s ease-in-out";this.img.style["-webkit-transform"]="rotate(-360deg)";if(bb.scroller){bb.scroller.refresh()}this.scrollIntoView(false)};a.internalShow=a.internalShow.bind(a);a.internalHide=function(){this.open=false;this.style.height="59px";if(bb.device.is1024x600){this.style.height="43px"}else if(bb.device.is1280x768||bb.device.is1280x720){this.style.height="95px"}else{this.style.height="95px"}this.caption.style.opacity="1.0";this.caption.style["-webkit-transition"]="opacity 0.5s linear";this.caption.style["-webkit-backface-visibility"]="hidden";this.caption.style["-webkit-perspective"]=1e3;this.img.style.opacity="0.0";this.img.style["-webkit-transition"]="all 0.5s ease-in-out";this.img.style["-webkit-transform"]="rotate(0deg)";if(bb.scroller){bb.scroller.refresh()}};a.internalHide=a.internalHide.bind(a);e.setSelectedItem=function(e){if(this.selectedIndex!=e){var t=this.dropdown.items[e];if(!t)return;if(this.dropdown.selected){this.dropdown.selected.setAttribute("class",t.normalStyle);this.dropdown.selected.img.style.visibility="hidden"}t.setAttribute("class",t.selectedStyle);t.img.style.visibility="visible";this.dropdown.selected=t;this.selectedIndex=e;this.dropdown.caption.innerHTML=this.options[e].text;this.dropdown.internalHide();window.setTimeout(this.fireEvent,0)}};e.setSelectedItem=e.setSelectedItem.bind(e);e.setSelectedText=function(e){for(var t=0;t<this.options.length;t++){if(this.options[t].text==e){this.setSelectedItem(t);return}}};e.setSelectedText=e.setSelectedText.bind(e);e.fireEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("change",false,true);this.dispatchEvent(e)};e.fireEvent=e.fireEvent.bind(e);e.enable=function(){if(this.enabled)return;this.dropdown.buttonOuter.ontouchstart=this.dropdown.buttonOuter.dotouchstart;this.dropdown.buttonOuter.ontouchend=this.dropdown.buttonOuter.dotouchend;this.dropdown.buttonOuter.onclick=this.dropdown.buttonOuter.doclick;this.dropdown.buttonOuter.setAttribute("class",p);this.removeAttribute("disabled");this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!e.enabled)return;this.dropdown.internalHide();this.dropdown.buttonOuter.ontouchstart=null;this.dropdown.buttonOuter.ontouchend=null;this.dropdown.buttonOuter.onclick=null;this.dropdown.buttonOuter.setAttribute("class",p+" bb-bb10-dropdown-disabled-"+bb.screen.controlColor);this.enabled=false;this.setAttribute("disabled","disabled")};e.disable=e.disable.bind(e);e.show=function(){this.dropdown.style.display="block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.dropdown.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.dropdown.parentNode.removeChild(this.dropdown);bb.refresh()};e.remove=e.remove.bind(e);e.refresh=function(){this.dropdown.internalHide();this.dropdown.isRefreshed=false;this.dropdown.refreshOptions()};e.refresh=e.refresh.bind(e);e.setCaption=function(e){this.dropdown.labelElement.innerHTML=e;this.setAttribute("data-bb-label",e)};e.setCaption=e.setCaption.bind(e);e.getCaption=function(){return this.dropdown.labelElement.innerHTML};e.getCaption=e.getCaption.bind(e);return a}};_bb10_fileInput={apply:function(e){var t,n,r,i,s="1280x768-1280x720";if(bb.device.is1024x600){s="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){s="1280x768-1280x720"}for(t=0;t<e.length;t++){n=e[t];n.setAttribute("class","bb-bb10-file-button-"+s);r=document.createElement("div");r.setAttribute("data-bb-type","button");r.innerHTML=n.hasAttribute("data-bb-caption")?n.getAttribute("data-bb-caption"):"Choose File";r.origCaption=r.innerHTML;bb.button.apply([r]);r.input=n;n.parentNode.insertBefore(r,n);r.appendChild(n);r.handleChange=function(){if(this.input.value){this.setCaption(this.input.value.replace(/^.*[\\\/]/,""))}else{this.setCaption(this.origCaption)}};r.handleChange=r.handleChange.bind(r);n.addEventListener("change",r.handleChange,false)}}};_bb10_grid={apply:function(e){var t="1280x768-1280x720",n=false,r;if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}for(var i=0;i<e.length;i++){var s,o,u,a,f,l,c=e[i];c.setAttribute("class","bb-bb10-grid-"+t);c.isSquare=c.hasAttribute("data-bb-style")&&c.getAttribute("data-bb-style").toLowerCase()=="square";n=c.hasAttribute("data-bb-header-style")?c.getAttribute("data-bb-header-style").toLowerCase()=="solid":false;r=c.hasAttribute("data-bb-header-justify")?c.getAttribute("data-bb-header-justify").toLowerCase():"center";if(c.hasAttribute("data-bb-context")&&c.getAttribute("data-bb-context").toLowerCase()=="true"){l=bb.screen.contextMenu}o=c.querySelectorAll("[data-bb-type=group], [data-bb-type=row]");for(s=0;s<o.length;s++){f=o[s];if(f.hasAttribute("data-bb-type")){u=f.getAttribute("data-bb-type").toLowerCase();if(u=="group"&&f.hasAttribute("data-bb-title")){a=document.createElement("div");a.normal="bb-bb10-grid-header-"+t;a.innerHTML="<p>"+f.getAttribute("data-bb-title")+"</p>";if(n){a.normal=a.normal+" bb10Accent";a.style.color="white";a.style["border-bottom-color"]="transparent"}else{a.normal=a.normal+" bb-bb10-grid-header-normal-"+bb.screen.listColor;a.style["border-bottom-color"]=bb.options.shades.darkOutline}if(r=="left"){a.normal=a.normal+" bb-bb10-grid-header-left-"+t}else if(r=="right"){a.normal=a.normal+" bb-bb10-grid-header-right-"+t}else{a.normal=a.normal+" bb-bb10-grid-header-center"}a.setAttribute("class",a.normal);if(f.firstChild){f.insertBefore(a,f.firstChild)}else{f.appendChild(a)}}else if(u=="row"){var h,p,d=0,v,m,g,y,b,w,E,b,S,x,T,N=-1,C=f.querySelectorAll("[data-bb-type=item]");g=C.length;if(g==0)continue;if(f.hasAttribute("data-bb-columns")){N=f.getAttribute("data-bb-columns")}p=document.createElement("table");p.style.width="100%";f.appendChild(p);v=document.createElement("tr");p.appendChild(v);if(N>0){if(C.length>N&&!bb.device.isPlayBook){f.style["overflow-y"]="hidden";f.style["overflow-x"]="scroll";x=window.innerWidth/(parseInt(N)+.5)}else{x=window.innerWidth/N-6}}else{x=window.innerWidth/g-6}for(h=0;h<g;h++){y=C[h];if(bb.device.isPlayBook&&N>0&&h>N-1){y.style.display="none";continue}b=y.innerHTML;a=y.getAttribute("data-bb-title");T=b||a;y.innerHTML="";m=document.createElement("td");v.appendChild(m);m.appendChild(y);d++;if(c.isSquare){S=x}else{S=Math.ceil(x*.5625)}y.style.width=x+"px";y.style.height=S+"px";w=document.createElement("img");w.style.height=S+"px";w.style.width=x+"px";w.style.opacity="0";w.style["-webkit-transition"]="opacity 0.5s linear";w.style["-webkit-backface-visibility"]="hidden";w.style["-webkit-perspective"]=1e3;w.style["-webkit-transform"]="translate3d(0,0,0)";w.itemNode=y;y.image=w;y.appendChild(w);y.onbbuidomready=function(){if(bb.isScrolledIntoView(this)){this.image.onload=function(){this.style.opacity="1.0"};this.image.src=this.getAttribute("data-bb-img")}else{document.addEventListener("bbuiscrolling",this.onbbuiscrolling,false);this.listener={name:"bbuiscrolling",eventHandler:this.onbbuiscrolling};bb.documentListeners.push(this.listener)}document.removeEventListener("bbuidomready",this.onbbuidomready,false)};y.onbbuidomready=y.onbbuidomready.bind(y);document.addEventListener("bbuidomready",y.onbbuidomready,false);y.onbbuiscrolling=function(){if(bb.isScrolledIntoView(this)){this.image.onload=function(){this.style.opacity="1.0"};this.image.src=this.getAttribute("data-bb-img");document.removeEventListener("bbuiscrolling",this.onbbuiscrolling,false);var e=bb.documentListeners.indexOf(this.listener);if(e>=0){bb.documentListeners.splice(e,1)}}};y.onbbuiscrolling=y.onbbuiscrolling.bind(y);if(T){E=document.createElement("div");if(a&&b){E.setAttribute("class","bb-bb10-grid-item-overlay-"+t+" bb-bb10-grid-item-overlay-two-rows-"+t);E.innerHTML='<div><p class="title title-two-rows">'+a+"<br/>"+b+"</p></div>"}else if(a){E.setAttribute("class","bb-bb10-grid-item-overlay-"+t+" bb-bb10-grid-item-overlay-one-row-"+t);E.innerHTML='<div><p class="title title-one-row">'+a+"</p></div>"}else if(b){E.setAttribute("class","bb-bb10-grid-item-overlay-"+t+" bb-bb10-grid-item-overlay-one-row-"+t);E.innerHTML='<div><p class="title title-one-row">'+b+"</p></div>"}y.appendChild(E)}else{E=null}y.overlay=E;y.title=a;y.description=b;y.fingerDown=false;y.contextShown=false;y.contextMenu=l;y.ontouchstart=function(){if(this.overlay){this.overlay.style["opacity"]="1.0";this.overlay.style["background-color"]=bb.options.highlightColor}y.fingerDown=true;y.contextShown=false;if(y.contextMenu){window.setTimeout(this.touchTimer,667)}};y.ontouchend=function(){if(this.overlay){this.overlay.style["opacity"]="";this.overlay.style["background-color"]=""}y.fingerDown=false;if(y.contextShown){event.preventDefault();event.stopPropagation()}};y.touchTimer=function(){if(y.fingerDown){y.contextShown=true;y.contextMenu.peek({title:this.title,description:this.description,selected:this})}};y.touchTimer=y.touchTimer.bind(y)}if(N>0&&d<N){var k=N-d;f.extraColumns=[];for(h=0;h<k;h++){m=document.createElement("td");v.appendChild(m);m.style.width=x+"px";f.extraColumns.push(m)}}}}}c.orientationChanged=function(e){var t=this.querySelectorAll("[data-bb-type=row]"),n,r,i,s,o,u,a,f;for(n=0;n<t.length;n++){var l=-1;s=t[n];i=s.querySelectorAll("[data-bb-type=item]");o=i.length;if(s.hasAttribute("data-bb-columns")){l=s.getAttribute("data-bb-columns")}if(l>0){if(i.length>l&&!bb.device.isPlayBook){a=window.innerWidth/(parseInt(l)+.5)}else{a=window.innerWidth/l-6}}else{a=window.innerWidth/o-6}for(r=0;r<o;r++){u=i[r];if(c.isSquare){f=a}else{f=Math.ceil(a*.5625)}u.image.style.height=f+"px";u.image.style.width=a+"px";u.image.style["-webkit-transition-property"]="all";u.image.style["-webkit-transition-duration"]="0.2s";u.image.style["-webkit-transition-timing-function"]="linear";u.image.style["-webkit-transform"]="translate3d(0,0,0)";u.style.width=a+"px";u.style.height=f+"px";u.style["-webkit-transition-property"]="all";u.style["-webkit-transition-duration"]="0.2s";u.style["-webkit-transition-timing-function"]="linear";u.style["-webkit-transform"]="translate3d(0,0,0)"}if(s.extraColumns){for(r=0;r<s.extraColumns.length;r++){s.extraColumns[r].style.width=a+"px"}}}};c.orientationChanged=c.orientationChanged.bind(c);window.addEventListener("resize",c.orientationChanged,false);bb.windowListeners.push({name:"resize",eventHandler:c.orientationChanged});c.show=function(){this.style.display="block";bb.refresh()};c.show=c.show.bind(c);c.hide=function(){this.style.display="none";bb.refresh()};c.hide=c.hide.bind(c);c.remove=function(){this.parentNode.removeChild(this);bb.refresh()};c.remove=c.remove.bind(c)}}};_bb10_imageList={apply:function(elements){var res="1280x768-1280x720",i,j,outerElement,items;if(bb.device.is1024x600){res="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){res="1280x768-1280x720"}else if(bb.device.is720x720){res="720x720"}for(i=0;i<elements.length;i++){outerElement=elements[i];outerElement.items=[];outerElement.setAttribute("class","bb-bb10-image-list");outerElement.hideImages=outerElement.hasAttribute("data-bb-images")?outerElement.getAttribute("data-bb-images").toLowerCase()=="none":false;if(!outerElement.hideImages){outerElement.imageEffect=outerElement.hasAttribute("data-bb-image-effect")?outerElement.getAttribute("data-bb-image-effect").toLowerCase():undefined;outerElement.imagePlaceholder=outerElement.hasAttribute("data-bb-image-placeholder")?outerElement.getAttribute("data-bb-image-placeholder"):undefined}outerElement.listStyle=outerElement.hasAttribute("data-bb-style")?outerElement.getAttribute("data-bb-style").toLowerCase():"default";outerElement.solidHeader=outerElement.hasAttribute("data-bb-header-style")?outerElement.getAttribute("data-bb-header-style").toLowerCase()=="solid":false;outerElement.headerJustify=outerElement.hasAttribute("data-bb-header-justify")?outerElement.getAttribute("data-bb-header-justify").toLowerCase():"center";if(outerElement.hasAttribute("data-bb-context")&&outerElement.getAttribute("data-bb-context").toLowerCase()=="true"){outerElement.contextMenu=bb.screen.contextMenu}outerElement.styleItem=function(innerChildNode){if(innerChildNode.hasAttribute("data-bb-type")){var type=innerChildNode.getAttribute("data-bb-type").toLowerCase(),description=innerChildNode.innerHTML,title,overlay,accentText,img,details,detailsClass,descriptionDiv,btn,btnBorder,highlight,normal,btnInner;if(type=="header"){normal="bb-bb10-image-list-header bb-bb10-image-list-header-"+res;if(this.solidHeader){normal=normal+" bb10Accent";innerChildNode.style.color="white";innerChildNode.style["border-bottom-color"]="transparent"}else{normal=normal+" bb-bb10-image-list-header-normal-"+bb.screen.listColor;innerChildNode.style["border-bottom-color"]=bb.options.shades.darkOutline}if(this.headerJustify=="left"){normal=normal+" bb-bb10-image-list-header-left-"+res}else if(this.headerJustify=="right"){normal=normal+" bb-bb10-image-list-header-right-"+res}else{normal=normal+" bb-bb10-image-list-header-center"}innerChildNode.normal=normal;innerChildNode.innerHTML="<p>"+description+"</p>";innerChildNode.setAttribute("class",normal)}else if(type=="item"){normal="bb-bb10-image-list-item bb-bb10-image-list-item-"+bb.screen.listColor+" bb-bb10-image-list-item-"+res;highlight=normal+" bb-bb10-image-list-item-hover bb10Highlight";innerChildNode.normal=normal;innerChildNode.highlight=highlight;innerChildNode.setAttribute("class",normal);innerChildNode.innerHTML="";if(!this.hideImages){img=document.createElement("img");img.outerElement=this;innerChildNode.img=img;if(this.imagePlaceholder){img.placeholder=this.imagePlaceholder;img.path=innerChildNode.hasAttribute("data-bb-img")?innerChildNode.getAttribute("data-bb-img"):this.imagePlaceholder}else{img.path=innerChildNode.getAttribute("data-bb-img")}innerChildNode.appendChild(img);if(this.imageEffect){img.style.opacity="0";img.style["-webkit-transition"]="opacity 0.5s linear";innerChildNode.imageList=this;innerChildNode.bbuilistready=function(){this.img.onload=function(){this.style.opacity="1.0"};this.img.src=this.img.path;if(this.imageList.imagePlaceholder){this.img.onerror=function(){if(this.src==this.placeholder)return;this.src=this.placeholder}}document.removeEventListener("bbuilistready",this.bbuilistready,false)};innerChildNode.bbuilistready=innerChildNode.bbuilistready.bind(innerChildNode);document.addEventListener("bbuilistready",innerChildNode.bbuilistready,false)}else{img.src=img.path;if(this.imagePlaceholder){img.onerror=function(){if(this.src==this.placeholder)return;this.src=this.placeholder;if(this.outerElement.imageEffect){this.show()}}}}}details=document.createElement("div");details.innerChildNode=innerChildNode;innerChildNode.details=details;innerChildNode.appendChild(details);detailsClass="bb-bb10-image-list-item-details-"+res;if(this.hideImages){detailsClass=detailsClass+" bb-bb10-image-list-item-noimage-"+res}title=document.createElement("div");title.setAttribute("class","title");title.innerHTML=innerChildNode.getAttribute("data-bb-title");details.title=title;if(title.innerHTML.length==0){title.innerHTML=" "}details.appendChild(title);descriptionDiv=document.createElement("div");descriptionDiv.setAttribute("class","description");details.description=descriptionDiv;details.appendChild(descriptionDiv);overlay=document.createElement("div");overlay.setAttribute("class","bb-bb10-image-list-item-overlay-"+res);innerChildNode.appendChild(overlay);if(this.listStyle=="arrowlist"||this.listStyle=="arrowbuttons"||this.listStyle=="addbuttons"||this.listStyle=="removebuttons"){btn=document.createElement("div");innerChildNode.appendChild(btn);innerChildNode.btn=btn;btn.outerElement=this;btn.innerChildNode=innerChildNode;if(innerChildNode.onbtnclick){btn.onbtnclick=innerChildNode.onbtnclick}else if(innerChildNode.hasAttribute("onbtnclick")){innerChildNode.onbtnclick=innerChildNode.getAttribute("onbtnclick");btn.onbtnclick=function(){eval(this.innerChildNode.onbtnclick)}}detailsClass=detailsClass+" details-button-margin";btn.setAttribute("class","button");btnBorder=document.createElement("div");btnBorder.normal="bb-bb10-image-list-item-button-border-"+res+" bb-bb10-image-list-item-button-"+bb.screen.listColor;btnBorder.setAttribute("class",btnBorder.normal);btn.btnBorder=btnBorder;btn.appendChild(btnBorder);btnInner=document.createElement("div");btnInner.normal="bb-bb10-image-list-item-button-inner-"+res;btnInner.highlight=btnInner.normal;btn.btnInner=btnInner;btnBorder.appendChild(btnInner);if(this.listStyle!=="arrowlist"){if(this.listStyle=="arrowbuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-chevron-dark"}else if(this.listStyle=="addbuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-add-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-add-dark"}else if(this.listStyle=="removebuttons"){btnInner.normal=btnInner.normal+" bb-image-list-item-remove-"+bb.screen.listColor;btnInner.highlight=btnInner.highlight+" bb-image-list-item-remove-dark"}btn.ontouchstart=function(){if(!this.onbtnclick)return;this.btnInner.setAttribute("class",this.btnInner.highlight);this.btnBorder.style.background="-webkit-gradient(linear, center top, center bottom, from(rgb("+(bb.options.shades.R+32)+","+(bb.options.shades.G+32)+","+(bb.options.shades.B+32)+")), to("+bb.options.highlightColor+"))"};btn.ontouchend=function(){if(!this.onbtnclick)return;this.btnBorder.style.background="";this.btnInner.setAttribute("class",this.btnInner.normal)};btn.onclick=function(e){e.stopPropagation();if(this.onbtnclick){this.outerElement.selected=this.innerChildNode;this.onbtnclick()}}}else{btnInner.normal=btnInner.normal+" bb-image-list-item-chevron-"+bb.screen.listColor;btnBorder.style["background"]="transparent";btnBorder.style["border-color"]="transparent"}btnInner.setAttribute("class",btnInner.normal)}else{if(innerChildNode.hasAttribute("data-bb-accent-text")){accentText=document.createElement("div");accentText.setAttribute("class","accent-text");accentText.innerHTML=innerChildNode.getAttribute("data-bb-accent-text");details.appendChild(accentText);details.accentText=accentText}}if(description.length==0){description=" ";descriptionDiv.style.visibilty="hidden";if(bb.device.is1024x600){title.style["margin-top"]="16px";overlay.style["margin-top"]="-72px"}else if(bb.device.is1280x768||bb.device.is1280x720){title.style["margin-top"]="-7px";overlay.style["margin-top"]="-121px"}else if(bb.device.is720x720){title.style["margin-top"]="-14px";overlay.style["margin-top"]="-108px"}else{title.style["margin-top"]="-7px";overlay.style["margin-top"]="-121px"}if(accentText){if(bb.device.is1024x600){accentText.style["margin-top"]="-52px"}else if(bb.device.is1280x768||bb.device.is1280x720){accentText.style["margin-top"]="-82px"}else if(bb.device.is720x720){accentText.style["margin-top"]="-82px"}else{accentText.style["margin-top"]="-82px"}}}descriptionDiv.innerHTML=description;details.setAttribute("class",detailsClass);innerChildNode.fingerDown=false;innerChildNode.contextShown=false;innerChildNode.overlay=overlay;innerChildNode.contextMenu=this.contextMenu;innerChildNode.description=description;innerChildNode.title=title.innerHTML;innerChildNode.ontouchstart=function(){if(!innerChildNode.trappedClick&&!this.contextMenu)return;innerChildNode.fingerDown=true;innerChildNode.contextShown=false;if(innerChildNode.contextMenu){window.setTimeout(this.touchTimer,667)}};innerChildNode.ontouchend=function(e){if(!innerChildNode.trappedClick&&!this.contextMenu)return;this.overlay.style["border-color"]="transparent";innerChildNode.fingerDown=false;if(innerChildNode.contextShown){e.preventDefault();e.stopPropagation()}};innerChildNode.touchTimer=function(){if(innerChildNode.fingerDown){innerChildNode.contextShown=true;this.setAttribute("class",this.highlight);this.overlay.style["border-color"]=bb.options.shades.darkOutline;innerChildNode.contextMenu.hideEvents.push(this.finishHighlight);innerChildNode.contextMenu.peek({title:this.title,description:this.description,selected:this})}};innerChildNode.touchTimer=innerChildNode.touchTimer.bind(innerChildNode);innerChildNode.trappedClick=innerChildNode.onclick;innerChildNode.onclick=undefined;innerChildNode.outerElement=this;innerChildNode.addEventListener("click",function(e){if(!innerChildNode.trappedClick)return;this.outerElement.selected=this;if(this.trappedClick){setTimeout(this.trappedClick,0)}},false);innerChildNode.finishHighlight=function(){if(bb.screen.animating){setTimeout(this.finishHighlight,250)}else{this.setAttribute("class",this.normal)}};innerChildNode.finishHighlight=innerChildNode.finishHighlight.bind(innerChildNode);innerChildNode.remove=function(){this.style.height="0px";this.style.opacity="0.0";this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-transform"]="translate3d(0,0,0)";if(bb.scroller){bb.scroller.refresh()}window.setTimeout(this.details.performRemove,100)};innerChildNode.remove=innerChildNode.remove.bind(innerChildNode);details.performRemove=function(){var e=this.innerChildNode.parentNode,t=e.items.indexOf(this.innerChildNode);e.removeChild(this.innerChildNode);e.items.splice(t,1)};details.performRemove=details.performRemove.bind(details);innerChildNode.getTitle=function(){return this.title};innerChildNode.getTitle=innerChildNode.getTitle.bind(innerChildNode);innerChildNode.getDescription=function(){return this.details.description.innerHTML};innerChildNode.getDescription=innerChildNode.getDescription.bind(innerChildNode);innerChildNode.getAccentText=function(){return this.details.accentText?this.details.accentText.innerHTML:undefined};innerChildNode.getAccentText=innerChildNode.getAccentText.bind(innerChildNode);innerChildNode.getImage=function(){return this.img?this.img.getAttribute("src"):undefined};innerChildNode.getImage=innerChildNode.getImage.bind(innerChildNode)}}};outerElement.styleItem=outerElement.styleItem.bind(outerElement);outerElement.appendItem=function(e){this.styleItem(e);this.appendChild(e);this.items.push(e);var t=document.createEvent("Events");t.initEvent("bbuilistready",true,true);document.dispatchEvent(t);if(bb.scroller){bb.scroller.refresh()}};outerElement.appendItem=outerElement.appendItem.bind(outerElement);outerElement.refresh=function(e){if(!e||!e.length||e.length<=0)return;var t,n,r=document.createElement("div");this.items=[];for(t=0;t<e.length;t++){n=e[t];this.styleItem(n);this.items.push(n);r.appendChild(n)}this.innerHTML="";this.appendChild(r);var i=document.createEvent("Events");i.initEvent("bbuilistready",true,true);document.dispatchEvent(i)};outerElement.refresh=outerElement.refresh.bind(outerElement);outerElement.insertItemBefore=function(e,t){this.styleItem(e);this.insertBefore(e,t);this.items.splice(this.items.indexOf(t),0,e);var n=document.createEvent("Events");n.initEvent("bbuilistready",true,true);document.dispatchEvent(n);if(bb.scroller){bb.scroller.refresh()}};outerElement.insertItemBefore=outerElement.insertItemBefore.bind(outerElement);outerElement.getItems=function(){var e,t=[];for(e=0;e<this.items.length;e++){t.push(this.items[e])}return t};outerElement.getItems=outerElement.getItems.bind(outerElement);outerElement.clear=function(){this.items=[];outerElement.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};outerElement.clear=outerElement.clear.bind(outerElement);outerElement.show=function(){this.style.display="block";bb.refresh()};outerElement.show=outerElement.show.bind(outerElement);outerElement.hide=function(){this.style.display="none";bb.refresh()};outerElement.hide=outerElement.hide.bind(outerElement);outerElement.remove=function(){this.parentNode.removeChild(this);bb.refresh()};outerElement.remove=outerElement.remove.bind(outerElement);items=outerElement.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var item;for(j=0;j<items.length;j++){item=items[j];outerElement.styleItem(item);outerElement.items.push(item)}}}};_bb10_labelControlContainers={apply:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p="1280x768-1280x720";if(bb.device.is1024x600){p="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){p="1280x768-1280x720"}for(t=0;t<e.length;t++){n=e[t];r=n.querySelectorAll("[data-bb-type=row]");if(r.length>0){i=document.createElement("table");i.setAttribute("class","bb-bb10-label-control-rows");n.insertBefore(i,r[0]);for(s=0;s<r.length;s++){o=r[s];u=document.createElement("tr");u.setAttribute("class","bb-bb10-label-control-label-row-"+p);i.appendChild(u);a=document.createElement("td");u.appendChild(a);f=o.querySelectorAll("[data-bb-type=label]")[0];f.setAttribute("class","bb-bb10-label-control-label-"+p);o.removeChild(f);a.appendChild(f);u=document.createElement("tr");i.appendChild(u);l=document.createElement("td");u.appendChild(l);c=o.querySelectorAll("[data-bb-type=button],[data-bb-type=input],[data-bb-type=dropdown],textarea,input[type=file]")[0];if(c){o.removeChild(c);l.appendChild(c)}n.removeChild(o)}}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bb10_pillButtons={apply:function(e){var t,n;for(t=0;t<e.length;t++){n=e[t];bb.pillButtons.style(n,true)}},style:function(e,t){var n="1280x768-1280x720";if(bb.device.is1024x600){n="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){n="1280x768-1280x720"}var r,i="bb-bb10-pill-buttons-container-"+n+" bb-bb10-pill-buttons-container-"+bb.screen.controlColor,s="bb-bb10-pill-button-"+n,o,u,a=e.querySelectorAll("[data-bb-type=pill-button]"),f=Math.floor(100/a.length),l=10,c,h,p,d,v;e.sidePadding=l;e.setAttribute("class","bb-bb10-pill-buttons-"+n);o=document.createElement("div");e.appendChild(o);o.setAttribute("class",i);e.selectedColor=bb.screen.controlColor=="dark"?"#909090":"#555555";pill=document.createElement("div");pillInner=document.createElement("div");pill.appendChild(pillInner);pill.setAttribute("class",s+" bb-bb10-pill-button-selected-"+n+"-"+bb.screen.controlColor+" bb-bb10-pill-buttons-pill");pillInner.setAttribute("class","bb-bb10-pill-button-inner-"+n+" bb-bb10-pill-button-inner-selected-"+n+"-"+bb.screen.controlColor);pill.style.opacity="0";e.pill=pill;o.appendChild(pill);e.style["padding-left"]=l+"px";e.style["padding-right"]=l+"px";h=document.createElement("table");e.table=h;p=document.createElement("tr");h.tr=p;h.appendChild(p);h.setAttribute("class","bb-bb10-pill-buttons-table");h.style.opacity="0";o.appendChild(h);e.styleButton=function(t){t.isSelected=false;u=document.createElement("div");u.innerHTML=t.innerHTML;t.innerHTML="";t.appendChild(u);t.border=u;t.outerElement=e;if(t.getAttribute("data-bb-selected")=="true"){t.isSelected=true;e.selected=t;t.style.color=e.selectedColor}t.setAttribute("class",s);u.setAttribute("class","bb-bb10-pill-button-inner-"+n);t.style["z-index"]=4;t.style.width="100%";t.dotouchstart=function(e){if(this.isSelected)return;var t=this.outerElement.selected;t.style.color="";if(bb.screen.controlColor=="light"){this.outerElement.pill.style["background-color"]="#DDDDDD"}this.outerElement.setPillLeft(this)};t.dotouchstart=t.dotouchstart.bind(t);t.dotouchend=function(e){if(this.isSelected)return;var t=this.outerElement.selected;t.isSelected=false;this.isSelected=true;this.outerElement.selected=this;this.style.color=this.outerElement.selectedColor;if(bb.screen.controlColor=="light"){this.outerElement.pill.style["background-color"]=""}var n=document.createEvent("MouseEvents");n.initMouseEvent("click",true,true);n.doClick=true;this.dispatchEvent(n)};t.dotouchend=t.dotouchend.bind(t);if(bb.device.isRipple){t.onmousedown=t.dotouchstart;t.onmouseup=t.dotouchend}else{t.ontouchstart=t.dotouchstart;t.ontouchend=t.dotouchend}t.addEventListener("click",function(e){e.stopPropagation()},true);return t};e.styleButton=e.styleButton.bind(e);for(v=0;v<a.length;v++){c=a[v];c=e.styleButton(c);d=document.createElement("td");p.appendChild(d);d.appendChild(c);d.style.width=f+"%"}e.recalculateSize=function(){var e=this.table.querySelectorAll("td"),t=parseInt(window.getComputedStyle(this).width)-this.sidePadding,n=Math.floor((t-e.length*4)/e.length)+"px",r;for(r=0;r<e.length;r++){e[r].style.width=n}this.table.style.width=t+"px";this.pill.style.width=n};e.recalculateSize=e.recalculateSize.bind(e);e.setPillLeft=function(e){if(!e){e=this.selected}this.pill.style["-webkit-transform"]="translate3d("+e.parentNode.offsetLeft+"px,0px,0px)"};e.setPillLeft=e.setPillLeft.bind(e);e.initialize=function(){this.recalculateSize();this.setPillLeft();this.table.style.opacity="1";this.table.style["-webkit-transition"]="opacity 0.1s linear";this.pill.style.opacity="1"};e.initialize=e.initialize.bind(e);if(t){e.onbbuidomready=function(){this.initialize();document.removeEventListener("bbuidomready",this.onbbuidomready,false)};e.onbbuidomready=e.onbbuidomready.bind(e);document.addEventListener("bbuidomready",e.onbbuidomready,false)}else{window.setTimeout(e.initialize,0)}e.doOrientationChange=function(){this.setPillLeft()};e.doOrientationChange=e.doOrientationChange.bind(e);window.addEventListener("resize",e.doOrientationChange,false);bb.windowListeners.push({name:"resize",eventHandler:e.doOrientationChange});e.show=function(){this.style.display="block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);e.clear=function(){var e=this.table.querySelectorAll("td"),t;for(t=0;t<e.length;t++){this.table.tr.removeChild(e[t])}this.pill.style.opacity="0"};e.clear=e.clear.bind(e);e.appendButton=function(t){t=e.styleButton(t);var n=document.createElement("td");this.table.tr.appendChild(n);n.appendChild(t);this.initialize()};e.appendButton=e.appendButton.bind(e);e.getButtons=function(){var e=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");var t=new Array;for(var n=0;n<e.length;n++){t[n]=e[n].firstChild.innerHTML}return t};e.getButtons=e.getButtons.bind(e);return e}};_bb10_radio={apply:function(e){for(var t=0;t<e.length;t++){bb.radio.style(e[t])}},style:function(e){var t="1280x768-1280x720",e,n,r,i,s,o=bb.screen.controlColor,u=e;if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}e=document.createElement("div");e.setAttribute("class","bb-bb10-radio-container-"+t+"-"+o);e.input=u;u.outerElement=e;u.res=t;u.style.display="none";u.radio=e;if(u.parentNode){u.parentNode.insertBefore(e,u)}e.appendChild(u);r=document.createElement("div");r.setAttribute("class","bb-bb10-radio-dot-"+t);r.highlight="-webkit-linear-gradient(top,  rgb("+(bb.options.shades.R+32)+", "+(bb.options.shades.G+32)+", "+(bb.options.shades.B+32)+") 0%, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 100%)";r.touchHighlight="-webkit-linear-gradient(top,  rgba("+(bb.options.shades.R-64)+", "+(bb.options.shades.G-64)+", "+(bb.options.shades.B-64)+",0.25) 0%, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+",0.25) 100%)";if(u.checked){r.style.background=r.highlight}e.dotDiv=r;e.appendChild(r);i=document.createElement("div");i.setAttribute("class","bb-bb10-radio-dot-center-"+t);if(!u.checked){bb.radio.resetDot(i)}r.appendChild(i);r.centerDotDiv=i;r.slideOutUp=function(){if(bb.device.is1024x600){this.style.height="0px";this.style.width="10px";this.style.top="9px";this.style.left="15px"}else{this.style.height="0px";this.style.width="20px";this.style.top="18px";this.style.left="30px"}bb.radio.resetDot(this.centerDotDiv);this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1e3;this.style["-webkit-transform"]="translate3d(0,0,0)"};r.slideOutUp=r.slideOutUp.bind(r);r.slideOutDown=function(){if(bb.device.is1024x600){this.style.height="0px";this.style.width="10px";this.style.top="30px";this.style.left="15px"}else{this.style.height="0px";this.style.width="20px";this.style.top="60px";this.style.left="30px"}bb.radio.resetDot(this.centerDotDiv);this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="linear";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1e3;this.style["-webkit-transform"]="translate3d(0,0,0)"};r.slideOutDown=r.slideOutDown.bind(r);r.slideIn=function(){if(bb.device.is1024x600){this.style.height="20px";this.style.width="20px";this.style.top="10px";this.style.left="9px";this.centerDotDiv.style.height="10px";this.centerDotDiv.style.width="10px";this.centerDotDiv.style.top="5px";this.centerDotDiv.style.left="5px"}else{this.style.height="40px";this.style.width="40px";this.style.top="19px";this.style.left="19px";this.centerDotDiv.style.height="18px";this.centerDotDiv.style.width="18px";this.centerDotDiv.style.top="11px";this.centerDotDiv.style.left="11px"}this.style["-webkit-transition-property"]="all";this.style["-webkit-transition-duration"]="0.1s";this.style["-webkit-transition-timing-function"]="ease-in";this.style["-webkit-backface-visibility"]="hidden";this.style["-webkit-perspective"]=1e3;this.style["-webkit-transform"]="translate3d(0,0,0)";this.centerDotDiv.style["-webkit-transition-delay"]="0.1s";this.centerDotDiv.style["-webkit-transition-property"]="all";this.centerDotDiv.style["-webkit-transition-duration"]="0.1s";this.centerDotDiv.style["-webkit-transition-timing-function"]="ease-in";this.centerDotDiv.style["-webkit-perspective"]=1e3;this.centerDotDiv.style["-webkit-transform"]="translate3d(0,0,0)"};r.slideIn=r.slideIn.bind(r);e.selectedRadio=undefined;e.slideFromTop=true;e.ontouchstart=function(){if(!this.input.checked){this.slideFromTop=true;this.selectedRadio=this.getCurrentlyChecked();if(this.selectedRadio){if(this.getTop(this.selectedRadio.radio)>=this.getTop(this)){this.slideFromTop=false}}this.dotDiv.style["-webkit-transition"]="none";if(bb.device.is1024x600){this.dotDiv.style.height="20px";this.dotDiv.style.width="20px";this.dotDiv.style.top="10px";this.dotDiv.style.left="9px"}else{this.dotDiv.style.height="40px";this.dotDiv.style.width="40px";this.dotDiv.style.top="19px";this.dotDiv.style.left="19px"}bb.radio.resetDot(this.dotDiv.centerDotDiv);this.dotDiv.style.background=this.dotDiv.touchHighlight}};e.ontouchend=function(){if(!this.input.checked){this.dotDiv.style["-webkit-transition"]="none";if(bb.device.is1024x600){this.dotDiv.style.height="0px";this.dotDiv.style.width="9px";this.dotDiv.style.left="16px"}else{this.dotDiv.style.height="0px";this.dotDiv.style.width="18px";this.dotDiv.style.left="32px"}if(this.slideFromTop){this.dotDiv.style.top=bb.device.is1024x600?"9px":"18px"}else{this.dotDiv.style.top=bb.device.is1024x600?"30px":"60px"}window.setTimeout(this.doclick,0)}};e.doclick=function(){if(!this.input.checked&&!this.input.disabled){var e=document.createEvent("HTMLEvents");e.initEvent("change",false,true);this.dotDiv.style.background=this.dotDiv.highlight;this.dotDiv.slideIn();if(this.selectedRadio){this.selectedRadio.removeAttribute("checked");this.selectedRadio.dispatchEvent(e);if(this.slideFromTop){this.selectedRadio.radio.dotDiv.slideOutDown()}else{this.selectedRadio.radio.dotDiv.slideOutUp()}}this.input.setAttribute("checked","true");this.input.dispatchEvent(e)}};e.doclick=e.doclick.bind(e);e.getCurrentlyChecked=function(){var e=document.querySelectorAll("input[type=radio][name="+this.input.name+"][checked=true]");if(e.length>0){return e[0]}else{return undefined}};e.getCurrentlyChecked=e.getCurrentlyChecked.bind(e);e.getTop=function(e){var t=0;while(e){t=t+e.offsetTop;e=e.offsetParent}return t};u.setChecked=function(){if(!this.checked){this.slideFromTop=true;this.outerElement.selectedRadio=this.outerElement.getCurrentlyChecked();if(this.outerElement.selectedRadio){if(this.outerElement.getTop(this.outerElement.selectedRadio.radio)>=this.outerElement.getTop(this.outerElement)){this.outerElement.slideFromTop=false}}this.outerElement.dotDiv.style["-webkit-transition"]="none";if(bb.device.is1024x600){this.outerElement.dotDiv.style.height="0px";this.outerElement.dotDiv.style.width="9px";this.outerElement.dotDiv.style.left="16px"}else{this.outerElement.dotDiv.style.height="0px";this.outerElement.dotDiv.style.width="18px";this.outerElement.dotDiv.style.left="32px"}if(this.outerElement.slideFromTop){this.outerElement.dotDiv.style.top=bb.device.is1024x600?"9px":"18px"}else{this.outerElement.dotDiv.style.top=bb.device.is1024x600?"30px":"60px"}var e=document.createEvent("MouseEvents");e.initMouseEvent("click",true,true);this.outerElement.dispatchEvent(e)}};u.setChecked=u.setChecked.bind(u);u.getChecked=function(){return this.checked};u.setChecked=u.setChecked.bind(u);u.enable=function(){if(!this.disabled)return;this.disabled=false;this.outerElement.dotDiv.setAttribute("class","bb-bb10-radio-dot-"+this.res)};u.enable=u.enable.bind(u);u.disable=function(){if(this.disabled)return;this.disabled=true;this.outerElement.dotDiv.setAttribute("class","bb-bb10-radio-dot-"+this.res+"-disabled")};u.disable=u.disable.bind(u);u.isEnabled=function(){return!this.disabled};u.isEnabled=u.isEnabled.bind(u);u.show=function(){this.outerElement.style.display="block";bb.refresh()};u.show=u.show.bind(u);u.hide=function(){this.outerElement.style.display="none";bb.refresh()};u.hide=u.hide.bind(u);u.remove=function(){this.outerElement.parentNode.removeChild(this.outerElement);bb.refresh()};u.remove=u.remove.bind(u);return e},resetDot:function(e){e.style["-webkit-transition"]="none";if(bb.device.is1024x600){e.style.height="0px";e.style.width="0px";e.style.top="10px";e.style.left="9px"}else{e.style.height="0px";e.style.width="0px";e.style.top="20px";e.style.left="20px"}},enableGroup:function(e){var t=document.getElementsByName(e);for(i=0;i<t.length;i++){if(t[i].type==="radio")t[i].enable()}},disableGroup:function(e){var t=document.getElementsByName(e);for(i=0;i<t.length;i++){if(t[i].type==="radio")t[i].disable()}}};_bb10_roundPanel={apply:function(e){if(bb.device.isBB10){var t,n,r,i,s="1280x768-1280x720";if(bb.device.is1024x600){s="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){s="1280x768-1280x720"}for(t=0;t<e.length;t++){r=e[t];r.setAttribute("class","bb-bb10-round-panel-"+s+" bb-bb10-round-panel-light");i=r.querySelectorAll("[data-bb-type=panel-header]");for(n=0;n<i.length;n++){i[n].setAttribute("class","bb-bb10-panel-header-"+s+" bb-bb10-panel-header-"+s+"-light")}r.show=function(){this.style.display="block";bb.refresh()};r.show=r.show.bind(r);r.hide=function(){this.style.display="none";bb.refresh()};r.hide=r.hide.bind(r);r.remove=function(){this.parentNode.removeChild(this);bb.refresh()};r.remove=r.remove.bind(r)}}else{for(var t=0;t<e.length;t++){var r=e[t];r.setAttribute("class","bb-playbook-round-panel");var i=r.querySelectorAll("[data-bb-type=panel-header]");for(var n=0;n<i.length;n++){if(bb.device.isHiRes){i[n].setAttribute("class","bb-hires-panel-header")}else{i[n].setAttribute("class","bb-lowres-panel-header")}}r.show=function(){this.style.display="block";bb.refresh()};r.show=r.show.bind(r);r.hide=function(){this.style.display="none";bb.refresh()};r.hide=r.hide.bind(r);r.remove=function(){this.parentNode.removeChild(this);bb.refresh()};r.remove=r.remove.bind(r)}}}};_bb10_slider={apply:function(e){var t,n,r,i=bb.screen.controlColor,r="1280x768-1280x720";if(bb.device.is1024x600){r="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){r="1280x768-1280x720"}for(t=0;t<e.length;t++){n=e[t];outerElement=document.createElement("div");outerElement.range=n;n.parentNode.insertBefore(outerElement,n);n.style.display="none";outerElement.appendChild(n);outerElement.minValue=n.hasAttribute("min")?parseInt(n.getAttribute("min")):0;outerElement.maxValue=n.hasAttribute("max")?parseInt(n.getAttribute("max")):0;outerElement.value=n.hasAttribute("value")?parseInt(n.getAttribute("value")):0;outerElement.step=n.hasAttribute("step")?parseInt(n.getAttribute("step")):0;outerElement.isActivated=false;outerElement.initialXPos=0;outerElement.currentXPos=0;outerElement.transientXPos=0;outerElement.className="bb-bb10-slider-"+r;outerElement.outer=document.createElement("div");outerElement.outer.setAttribute("class","outer bb-bb10-slider-outer-"+i);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");outerElement.fill.className="fill";outerElement.fill.active="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)";outerElement.fill.dormant="-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)";outerElement.fill.style.background=outerElement.fill.dormant;outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.inner.outerElement=outerElement;outerElement.outer.appendChild(outerElement.inner);outerElement.halo=document.createElement("div");outerElement.halo.className="halo";outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))";outerElement.inner.appendChild(outerElement.halo);outerElement.indicator=document.createElement("div");outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+i);outerElement.inner.appendChild(outerElement.indicator);n.outerElement=outerElement;n.setValue=function(e){var t=0,n,r;if(e&&(e<parseInt(this.outerElement.minValue)||e>parseInt(this.outerElement.maxValue))){return}else if(e){this.outerElement.value=e;this.value=e;r=document.createEvent("HTMLEvents");r.initEvent("change",false,true);this.dispatchEvent(r)}if(this.outerElement.value==this.outerElement.maxValue){t=1}else{t=this.outerElement.value/(parseInt(this.outerElement.maxValue)+parseInt(this.outerElement.minValue))}this.outerElement.currentXPos=Math.floor(parseInt(window.getComputedStyle(this.outerElement.outer).width)*t);this.outerElement.fill.style.width=this.outerElement.currentXPos+"px";this.outerElement.inner.style["-webkit-transform"]="translate3d("+this.outerElement.currentXPos+"px,0px,0px)"};n.setValue=n.setValue.bind(n);window.setTimeout(n.setValue,0);outerElement.inner.animateBegin=function(e){if(this.outerElement.isActivated===false){this.outerElement.isActivated=true;this.outerElement.initialXPos=e.touches[0].pageX;this.outerElement.halo.style["-webkit-transform"]="scale(1)";this.outerElement.halo.style["-webkit-animation-name"]="explode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+i+" indicator-hover-"+i);this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)";this.outerElement.fill.style.background=this.outerElement.fill.active}};outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner);outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.inner.animateEnd=function(){if(this.outerElement.isActivated===true){this.outerElement.isActivated=false;this.outerElement.currentXPos=this.outerElement.transientXPos;this.outerElement.value=parseInt(this.outerElement.range.value);this.outerElement.halo.style["-webkit-transform"]="scale(0)";this.outerElement.halo.style["-webkit-animation-name"]="implode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-slider-indicator-"+i);this.outerElement.indicator.style.background="";this.outerElement.fill.style.background=this.outerElement.fill.dormant}};outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner);outerElement.inner.addEventListener("touchend",outerElement.inner.animateEnd,false);outerElement.moveSlider=function(e){if(this.isActivated===true){e.stopPropagation();e.preventDefault();this.transientXPos=this.currentXPos+e.touches[0].pageX-this.initialXPos;this.transientXPos=Math.max(0,Math.min(this.transientXPos,parseInt(window.getComputedStyle(this.outer).width)));this.notifyUpdated();this.fill.style.width=this.transientXPos+"px";this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)"}};outerElement.moveSlider=outerElement.moveSlider.bind(outerElement);outerElement.notifyUpdated=function(){var e=this.transientXPos/parseInt(window.getComputedStyle(this.outer).width),t=Math.ceil((parseInt(this.minValue)+parseInt(this.maxValue))*e);if(Math.abs(t-parseInt(this.range.value))>this.step){this.range.value=t;var n=document.createEvent("HTMLEvents");n.initEvent("change",false,true);this.range.dispatchEvent(n)}};outerElement.notifyUpdated=outerElement.notifyUpdated.bind(outerElement);outerElement.doOrientationChange=function(){window.setTimeout(outerElement.range.setValue,0)};outerElement.doOrientationChange=outerElement.doOrientationChange.bind(outerElement);document.addEventListener("touchmove",outerElement.moveSlider,false);bb.documentListeners.push({name:"touchmove",eventHandler:outerElement.moveSlider});document.addEventListener("touchend",outerElement.inner.animateEnd,false);bb.documentListeners.push({name:"touchend",eventHandler:outerElement.inner.animateEnd});window.addEventListener("resize",outerElement.doOrientationChange,false);bb.windowListeners.push({name:"resize",eventHandler:outerElement.doOrientationChange})}}};_bb10_textInput={apply:function(e){for(var t=0;t<e.length;t++){bb.textInput.style(e[t])}},style:function(e){var t="1280x768-1280x720",n="",r=document.createElement("div");if(bb.device.is1024x600){t="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){t="1280x768-1280x720"}if(e.hasAttribute("class")){n=e.getAttribute("class")}if(e.parentNode){e.parentNode.insertBefore(r,e)}r.appendChild(e);r.input=e;r.setAttribute("data-bb-type","input");r.normal="bb-bb10-input-container bb-bb10-input-container-"+t;e.normal=n+" bb-bb10-input bb-bb10-input-"+t;e.focused=n+" bb-bb10-input bb-bb10-input-focused-"+t;if(e.disabled){e.setAttribute("class",e.normal+" bb-bb10-input-disabled")}else{e.setAttribute("class",e.normal)}e.isFocused=false;e.clickCount=0;e.container=r;e.clearBtn=e.getAttribute("data-bb-clear")!="none";e.hasClearBtn=false;if(e.type){var i=e.type.toLowerCase();if(i=="date"||i=="time"||i=="datetime"||i=="month"||i=="datetime-local"||i=="color"||i=="search"){e.clearBtn=false}}if(e.disabled){r.setAttribute("class",r.normal+" bb-bb10-input-container-disabled")}else{r.setAttribute("class",r.normal)}e.doFocus=function(){if(this.readOnly==false){this.container.setAttribute("class",this.container.normal+" bb-bb10-input-container-focused-"+t);if(this.clearBtn&&this.value){this.setAttribute("class",this.focused);this.hasClearBtn=true}else{this.setAttribute("class",this.normal);this.hasClearBtn=false}this.container.style["border-color"]=bb.options.highlightColor;this.isFocused=true;this.clickCount=0;bb.screen.focusedInput=this}};e.doFocus=e.doFocus.bind(e);e.addEventListener("focus",e.doFocus,false);e.doBlur=function(){this.container.setAttribute("class",this.container.normal);if(this.clearBtn){this.setAttribute("class",this.normal)}this.container.style["border-color"]="";this.isFocused=false;bb.screen.focusedInput=null};e.doBlur=e.doBlur.bind(e);e.addEventListener("blur",e.doBlur,false);e.updateClearButton=function(){if(this.clearBtn){if(this.value.length==0&&this.hasClearBtn||this.value.length>0&&!this.hasClearBtn)e.doFocus()}};e.updateClearButton=e.updateClearButton.bind(e);e.addEventListener("input",e.updateClearButton,false);if(e.clearBtn){e.container.ontouchstart=function(t){if(t.target==this){t.preventDefault();t.stopPropagation();this.input.value="";e.doFocus()}}}e.show=function(){this.container.style.display=""};e.show=e.show.bind(e);e.hide=function(){this.container.style.display="none"};e.hide=e.hide.bind(e);e.remove=function(){if(this.container.parentNode){this.container.parentNode.removeChild(this.container)}};e.remove=e.remove.bind(e);e.enable=function(){if(!this.disabled)return;this.disabled=false;this.container.setAttribute("class",this.container.normal);this.setAttribute("class",this.normal)};e.enable=e.enable.bind(e);e.disable=function(){if(this.disabled)return;this.disabled=true;this.container.setAttribute("class",this.container.normal+" bb-bb10-input-container-disabled");this.setAttribute("class",this.normal+" bb-bb10-input-disabled")};e.disable=e.disable.bind(e);return r}};_bb10_toggle={apply:function(e){for(var t=0;t<e.length;t++){bb.toggle.style(e[t],true)}},style:function(outerElement,offdom){var res="1280x768-1280x720",table,tr,td,color=bb.screen.controlColor;if(bb.device.is1024x600){res="1024x600"}else if(bb.device.is1280x768||bb.device.is1280x720){res="1280x768-1280x720"}outerElement.checked=false;outerElement.enabled=true;outerElement.buffer=bb.device.is1024x600?35:70;outerElement.isActivated=false;outerElement.initialXPos=0;outerElement.currentXPos=0;outerElement.transientXPos=0;outerElement.movedWithSlider=false;outerElement.startValue=false;if(outerElement.hasAttribute("data-bb-disabled")){outerElement.enabled=!(outerElement.getAttribute("data-bb-disabled").toLowerCase()=="true")}outerElement.className="bb-bb10-toggle-"+res;outerElement.outer=document.createElement("div");if(outerElement.enabled){outerElement.normal="outer bb-bb10-toggle-outer-"+color+" bb-bb10-toggle-outer-enabled-"+color}else{outerElement.normal="outer bb-bb10-toggle-outer-"+color+" bb-bb10-toggle-outer-disabled"}outerElement.outer.setAttribute("class",outerElement.normal);outerElement.appendChild(outerElement.outer);outerElement.fill=document.createElement("div");outerElement.fill.className="fill";outerElement.fill.style.background=outerElement.fill.dormant;outerElement.outer.appendChild(outerElement.fill);outerElement.inner=document.createElement("div");outerElement.inner.className="inner";outerElement.inner.outerElement=outerElement;outerElement.fill.appendChild(outerElement.inner);table=document.createElement("table");table.className="table";tr=document.createElement("tr");table.appendChild(tr);outerElement.inner.appendChild(table);td=document.createElement("td");td.className="left";tr.appendChild(td);outerElement.yes=document.createElement("div");outerElement.yes.className="yes";outerElement.yes.innerHTML=outerElement.getAttribute("data-bb-on");td.appendChild(outerElement.yes);td=document.createElement("td");td.className="center";tr.appendChild(td);td=document.createElement("td");td.className="right";tr.appendChild(td);outerElement.no=document.createElement("div");outerElement.no.className="no";outerElement.no.innerHTML=outerElement.getAttribute("data-bb-off");td.appendChild(outerElement.no);outerElement.container=document.createElement("div");outerElement.container.className="indicator-container";outerElement.appendChild(outerElement.container);outerElement.halo=document.createElement("div");outerElement.halo.className="halo";outerElement.halo.style.background="-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 43, from(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), color-stop(0.8, rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.15)), to(rgba("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+", 0.7)))";outerElement.container.appendChild(outerElement.halo);outerElement.indicator=document.createElement("div");if(outerElement.enabled){outerElement.indicator.normal="indicator bb-bb10-toggle-indicator-enabled-"+color}else{outerElement.indicator.normal="indicator bb-bb10-toggle-indicator-disabled-"+color}outerElement.indicator.setAttribute("class",outerElement.indicator.normal);outerElement.container.appendChild(outerElement.indicator);if(outerElement.hasAttribute("onchange")){outerElement.onchangeEval=outerElement.getAttribute("onchange");outerElement.onchange=function(){eval(this.onchangeEval)}}outerElement.inner.animateBegin=function(e){if(!this.outerElement.enabled)return;if(this.outerElement.isActivated===false){this.outerElement.startValue=this.outerElement.checked;this.outerElement.movedWithSlider=false;this.outerElement.isActivated=true;this.outerElement.initialXPos=e.touches[0].pageX;this.outerElement.halo.style["-webkit-transform"]="scale(1)";this.outerElement.halo.style["-webkit-animation-name"]="explode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-toggle-indicator-enabled-"+color+" indicator-hover-"+color);this.outerElement.indicator.style.background="-webkit-linear-gradient(top, rgb("+bb.options.shades.R+", "+bb.options.shades.G+", "+bb.options.shades.B+") 0%, rgb("+(bb.options.shades.R+16)+", "+(bb.options.shades.G+16)+", "+(bb.options.shades.B+16)+") 100%)"}};outerElement.inner.animateBegin=outerElement.inner.animateBegin.bind(outerElement.inner);outerElement.inner.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.container.addEventListener("touchstart",outerElement.inner.animateBegin,false);outerElement.inner.animateEnd=function(){if(!this.outerElement.enabled)return;if(this.outerElement.isActivated===true){this.outerElement.isActivated=false;this.outerElement.currentXPos=this.outerElement.transientXPos;this.outerElement.halo.style["-webkit-transform"]="scale(0)";this.outerElement.halo.style["-webkit-animation-name"]="implode";this.outerElement.indicator.setAttribute("class","indicator bb-bb10-toggle-indicator-enabled-"+color);this.outerElement.indicator.style.background="";this.outerElement.positionButton();if(this.outerElement.movedWithSlider){if(this.outerElement.startValue!=this.outerElement.checked){if(this.outerElement.onchange){this.outerElement.onchange()}}}}};outerElement.inner.animateEnd=outerElement.inner.animateEnd.bind(outerElement.inner);outerElement.addEventListener("touchend",outerElement.inner.animateEnd,false);outerElement.moveToggle=function(e){if(!this.enabled)return;if(this.isActivated===true){this.movedWithSlider=true;e.stopPropagation();e.preventDefault();var t=parseInt(window.getComputedStyle(this.fill).width)-this.buffer,n;this.transientXPos=this.currentXPos+e.touches[0].pageX-this.initialXPos;this.transientXPos=Math.max(0,Math.min(this.transientXPos,t));this.inner.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)";this.container.style["-webkit-transform"]="translate3d("+this.transientXPos+"px,0px,0px)";n=this.transientXPos/t;this.checked=n>.5}};outerElement.moveToggle=outerElement.moveToggle.bind(outerElement);outerElement.doClick=function(){if(!this.enabled)return;if(!this.movedWithSlider){this.setChecked(!this.checked)}};outerElement.doClick=outerElement.doClick.bind(outerElement);outerElement.addEventListener("click",outerElement.doClick,false);outerElement.positionButton=function(){var e=this.checked?parseInt(window.getComputedStyle(this.fill).width)-this.buffer:0;this.inner.style["-webkit-transform"]="translate3d("+e+"px,0px,0px)";this.inner.style["-webkit-transition-duration"]="0.1s";this.inner.style["-webkit-transition-timing-function"]="linear";this.inner.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""});this.container.style["-webkit-transform"]="translate3d("+e+"px,0px,0px)";this.container.style["-webkit-transition-duration"]="0.1s";this.container.style["-webkit-transition-timing-function"]="linear";this.container.addEventListener("webkitTransitionEnd",function(){this.style["-webkit-transition"]=""});if(this.checked&&this.enabled){this.indicator.style["background-image"]="-webkit-linear-gradient(top, "+bb.options.highlightColor+" 0%, "+bb.options.shades.darkHighlight+" 100%)"}else{this.indicator.style["background-image"]=""}this.currentXPos=e};outerElement.positionButton=outerElement.positionButton.bind(outerElement);outerElement.setChecked=function(e){if(e!=this.checked){this.checked=e;if(this.onchange){this.onchange()}}this.positionButton()};outerElement.setChecked=outerElement.setChecked.bind(outerElement);outerElement.getChecked=function(){return this.checked};outerElement.getChecked=outerElement.getChecked.bind(outerElement);outerElement.show=function(){this.style.display="block";bb.refresh()};outerElement.show=outerElement.show.bind(outerElement);outerElement.hide=function(){this.style.display="none";bb.refresh()};outerElement.hide=outerElement.hide.bind(outerElement);outerElement.remove=function(){this.parentNode.removeChild(this);bb.refresh()};outerElement.remove=outerElement.remove.bind(outerElement);outerElement.setOnCaption=function(e){this.yes.innerHTML=e};outerElement.setOnCaption=outerElement.setOnCaption.bind(outerElement);outerElement.setOffCaption=function(e){this.no.innerHTML=e};outerElement.setOffCaption=outerElement.setOffCaption.bind(outerElement);outerElement.getOnCaption=function(){return this.yes.innerHTML};outerElement.getOnCaption=outerElement.getOnCaption.bind(outerElement);outerElement.getOffCaption=function(){return this.no.innerHTML};outerElement.getOffCaption=outerElement.getOffCaption.bind(outerElement);outerElement.enable=function(){if(this.enabled)return;this.enabled=true;this.indicator.normal="indicator bb-bb10-toggle-indicator-enabled-"+color;this.indicator.setAttribute("class",this.indicator.normal);this.normal="outer bb-bb10-toggle-outer-"+color+" bb-bb10-toggle-outer-enabled-"+color;this.outer.setAttribute("class",this.normal);this.positionButton()};outerElement.enable=outerElement.enable.bind(outerElement);outerElement.disable=function(){if(!this.enabled)return;this.enabled=false;this.indicator.normal="indicator bb-bb10-toggle-indicator-disabled-"+color;this.indicator.setAttribute("class",this.indicator.normal);this.normal="outer bb-bb10-toggle-outer-"+color+" bb-bb10-toggle-outer-disabled";this.outer.setAttribute("class",this.normal);this.positionButton()};outerElement.disable=outerElement.disable.bind(outerElement);outerElement.checked=outerElement.hasAttribute("data-bb-checked")?outerElement.getAttribute("data-bb-checked").toLowerCase()=="true":false;if(offdom){outerElement.onbbuidomready=function(){this.positionButton();document.removeEventListener("bbuidomready",this.onbbuidomready,false)};outerElement.onbbuidomready=outerElement.onbbuidomready.bind(outerElement);document.addEventListener("bbuidomready",outerElement.onbbuidomready,false)}else{setTimeout(outerElement.positionButton,0)}document.addEventListener("touchmove",outerElement.moveToggle,false);bb.documentListeners.push({name:"touchmove",eventHandler:outerElement.moveToggle});document.addEventListener("touchend",outerElement.inner.animateEnd,false);bb.documentListeners.push({name:"touchend",eventHandler:outerElement.inner.animateEnd});return outerElement}};_bb5_button={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.innerHTML,i="bb5-button",s="bb5-button-highlight";n.innerHTML="";n.setAttribute("class","bb-bb5-button");var o=document.createElement("a");o.setAttribute("class",i);o.setAttribute("x-blackberry-focusable","true");o.setAttribute("onmouseover","this.setAttribute('class','"+s+"')");o.setAttribute("onmouseout","this.setAttribute('class','"+i+"')");n.appendChild(o);var u=document.createElement("span");u.innerHTML=r;o.appendChild(u)}}};_bb5_labelControlContainers={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.setAttribute("class","bb-label-control-horizontal-row");var r=n.querySelectorAll("[data-bb-type=label]");for(var i=0;i<r.length;i++){var s=r[i];s.setAttribute("class","bb-label")}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bb5_pillButtons={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.setAttribute("class","bb-pill-buttons");var r=n.querySelectorAll("[data-bb-type=pill-button]");for(var i=0;i<r.length;i++){var s=r[i];s.setAttribute("x-blackberry-focusable","true");var o=s.innerHTML;s.innerHTML="<span>"+o+"</span>";if(i===0){s.setAttribute("class","buttonLeft")}else if(i==r.length-1){s.setAttribute("class","buttonRight")}else{s.setAttribute("class","buttonMiddle")}if(s.hasAttribute("data-bb-selected")&&s.getAttribute("data-bb-selected").toLowerCase()=="true"){bb.pillButtons.selectButton(s)}s.onmousedown=function(){bb.pillButtons.selectButton(this);var e=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");for(var t=0;t<e.length;t++){var n=e[t];if(n!=this){bb.pillButtons.deSelectButton(n)}}}}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bbPlayBook_activityIndicator={apply:function(e){var t,n,r,i,s=bb.screen.controlColor,o,u,a;if(e.length>0){var f=document.createElement("canvas"),l,c;f.setAttribute("height","184px");f.setAttribute("width","184px");l=f.getContext("2d");l.beginPath();l.moveTo(92,154);l.arcTo(154,154,154,92,62);l.arcTo(154,30,92,30,62);l.arcTo(81,30,81,20,10);l.arcTo(81,10,91,10,10);l.arcTo(173,10,173,92,82);l.arcTo(173,173,92,173,82);l.arcTo(81,173,81,164,10);l.arcTo(81,154,92,154,10);l.closePath();l.strokeStyle="transparent";l.stroke();var c=l.createLinearGradient(0,50,0,154);c.addColorStop(0,"transparent");c.addColorStop(1,bb.options.highlightColor);l.fillStyle=c;l.fill();a=f.toDataURL()}for(t=0;t<e.length;t++){n=e[t];o=n.hasAttribute("data-bb-size")?n.getAttribute("data-bb-size").toLowerCase():"medium";if(o=="large"){u="93px"}else if(o=="small"){u="21px"}else{o="medium";u="46px"}n.style.width=u;i=document.createElement("div");i.setAttribute("class","bb-pb-activity-margin bb-pb-activity-"+o+" bb-activity-"+s);n.appendChild(i);r=document.createElement("div");r.setAttribute("class","bb-pb-activity-"+o);r.style["background-image"]='url("'+a+'")';i.appendChild(r);r.style["-webkit-animation-name"]="activity-rotate";r.style["-webkit-animation-duration"]="0.8s";r.style["-webkit-animation-iteration-count"]="infinite";r.style["-webkit-animation-timing-function"]="linear";n.show=function(){this.style.display="";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n);return n}}};_bbPlayBook_button={apply:function(e){for(var t=0;t<e.length;t++){bb.button.style(e[t])}},style:function(e){var t,n,r,i,s=document.createElement("div"),o=document.createElement("div");disabled=e.hasAttribute("data-bb-disabled"),normal="bb-pb-button",highlight="bb-pb-button-container bb-pb-button-container-"+bb.screen.controlColor+" pb-button-"+bb.screen.controlColor+"-highlight";outerNormal="bb-pb-button-container bb-pb-button-container-"+bb.screen.controlColor+" bb-pb-button-font-"+bb.screen.controlColor,outerNormalWithoutImageOnly=outerNormal;e.isImageOnly=false;e.enabled=!disabled;r=e.innerHTML;s.innerHTML=r;e.innerHTML="";e.stretched=false;e.captionElement=s;e.appendChild(o);e.innerElement=o;if(e.hasAttribute("data-bb-style")){var u=e.getAttribute("data-bb-style");if(u=="stretch"){e.stretched=true;outerNormal=outerNormal+" bb-pb-button-stretch";highlight=highlight+" bb-pb-button-stretch"}}n=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):undefined;if(n){if(!r||r.length==0){outerNormal=outerNormal+" bb-pb-button-container-image-only";highlight=highlight+" bb-pb-button-container-image-only";s.style["background-image"]='url("'+n+'")';e.style["line-height"]="0px";s.setAttribute("class","bb-pb-button-caption-with-image-only");e.isImageOnly=true}else{s.setAttribute("class","bb-pb-button-caption-with-image");i=document.createElement("div");e.imgElement=i;i.setAttribute("class","bb-pb-button-image");i.style["background-image"]='url("'+n+'")';o.appendChild(i)}}o.appendChild(s);t=normal+" bb-pb-button-disabled-"+bb.screen.controlColor;normal=normal+" bb-pb-button-"+bb.screen.controlColor;if(disabled){e.removeAttribute("data-bb-disabled");o.setAttribute("class",t)}else{o.setAttribute("class",normal)}e.setAttribute("class",outerNormal);e.outerNormal=outerNormal;e.highlight=highlight;e.outerNormalWithoutImageOnly=outerNormalWithoutImageOnly;e.innerElement=o;o.normal=normal;o.disabledStyle=t;if(!disabled){e.ontouchstart=function(){this.setAttribute("class",this.highlight)};e.ontouchend=function(){this.setAttribute("class",this.outerNormal);this.style.color=""}}e.trappedClick=e.onclick;e.onclick=undefined;if(e.trappedClick!==null){e.addEventListener("click",function(e){if(this.enabled){this.trappedClick()}},false)}e.setCaption=function(e){if(this.isImageOnly&&e.length>0){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image");var t=document.createElement("div");this.imgElement=t;t.setAttribute("class","bb-pb-button-image");t.style["background-image"]=this.captionElement.style["background-image"];this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(t);this.innerElement.appendChild(this.captionElement);this.setAttribute("class",this.outerNormalWithoutImageOnly);this.captionElement.style["background-image"]="";this.isImageOnly=false}else if(e.length==0&&this.imgElement){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image-only");this.setAttribute("class",this.outerNormalWithoutImageOnly+" bb-pb-button-container-image-only");this.captionElement.style["background-image"]=this.imgElement.style["background-image"];this.isImageOnly=true;this.innerElement.removeChild(this.imgElement);this.imgElement=null}this.captionElement.innerHTML=e};e.setImage=function(e){if(this.isImageOnly){this.captionElement.style["background-image"]='url("'+e+'")'}else if(this.imgElement&&e.length>0){this.imgElement.style["background-image"]='url("'+e+'")'}else if(e.length>0){this.captionElement.setAttribute("class","bb-pb-button-caption-with-image");var t=document.createElement("div");this.imgElement=t;t.setAttribute("class","bb-pb-button-image");t.style["background-image"]='url("'+e+'")';this.innerElement.removeChild(this.captionElement);this.innerElement.appendChild(t);this.innerElement.appendChild(this.captionElement)}else if(this.imgElement&&e.length==0){this.innerElement.removeChild(this.imgElement);this.imgElement=null;this.captionElement.setAttribute("class","")}};e.enable=function(){if(this.enabled)return;this.innerElement.setAttribute("class",this.innerElement.normal);this.ontouchstart=function(){this.setAttribute("class",this.highlight)};this.ontouchend=function(){this.setAttribute("class",this.outerNormal)};this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!this.enabled)return;this.innerElement.setAttribute("class",this.innerElement.disabledStyle);this.ontouchstart=null;this.ontouchend=null;this.enabled=false};e.disable=e.disable.bind(e);e.show=function(){this.style.display=this.stretched?"block":"inline-block";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);return e}};_bbPlayBook_imageList={apply:function(e){var t,n,r,i;for(var t=0;t<e.length;t++){r=e[t];r.items=[];r.hideImages=r.hasAttribute("data-bb-images")?r.getAttribute("data-bb-images").toLowerCase()=="none":false;if(!r.hideImages){r.imagePlaceholder=r.hasAttribute("data-bb-image-placeholder")?r.getAttribute("data-bb-image-placeholder"):undefined}r.headerJustify=r.hasAttribute("data-bb-header-justify")?r.getAttribute("data-bb-header-justify").toLowerCase():"center";r.listStyle=r.hasAttribute("data-bb-style")?r.getAttribute("data-bb-style").toLowerCase():"default";r.headerStyle=r.hasAttribute("data-bb-header-style")?r.getAttribute("data-bb-header-style").toLowerCase():"default";r.setAttribute("class","bb-pb-image-list");r.styleItem=function(e){var e,t,n,i,s,o,u,a,f,l,c,h,p,d;if(e.hasAttribute("data-bb-type")){t=e.getAttribute("data-bb-type").toLowerCase();n=e.innerHTML;i="";if(e.hasAttribute("data-bb-accent-text")){i=e.getAttribute("data-bb-accent-text")}if(t=="header"){s="bb-pb-image-list-header";o="bb-pb-image-list-header-hover bb10Highlight";if(r.headerStyle=="solid"){s=s+" bb-pb-image-list-header-solid bb10Accent"}else{s=s+" bb-pb-image-list-header-default"}if(this.headerJustify=="left"){s=s+" bb-pb-image-list-header-left";o=o+" bb-pb-image-list-header-left"}else if(this.headerJustify=="right"){s=s+" bb-pb-image-list-header-right";o=o+" bb-pb-image-list-header-right"}else{s=s+" bb-"+res+"-image-list-header-center";o=o+" bb-pb-image-list-header-center"}e.normal=s;e.highlight=o;e.innerHTML="<p>"+n+"</p>";e.setAttribute("class",s);e.ontouchstart=function(){this.setAttribute("class",this.highlight)};e.ontouchend=function(){this.setAttribute("class",this.normal)}}else if(t=="item"){e.normal="bb-pb-image-list-item";e.highlight="bb-pb-image-list-item bb-pb-image-list-item-hover bb10Highlight";e.innerHTML="";e.setAttribute("class","bb-pb-image-list-item");e.ontouchstart=function(){this.setAttribute("class",this.highlight)};e.ontouchend=function(){this.setAttribute("class",this.normal)};if(!this.hideImages){c=document.createElement("img");e.img=c;if(this.imagePlaceholder){c.placeholder=this.imagePlaceholder;c.src=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):this.imagePlaceholder;c.onerror=function(){if(this.src==this.placeholder)return;this.src=this.placeholder}}else{c.setAttribute("src",e.getAttribute("data-bb-img"))}e.appendChild(c)}u=document.createElement("div");e.appendChild(u);if(this.hideImages){u.normal="bb-pb-image-list-details bb-pb-image-list-noimage"}else{u.normal="bb-pb-image-list-details"}a=document.createElement("div");a.innerHTML=e.getAttribute("data-bb-title");a.className="title";e.titleDiv=a;u.appendChild(a);if(this.listStyle=="arrowlist"){u.normal=u.normal+" details-button-margin";h=document.createElement("div");e.appendChild(h);e.btn=h;h.setAttribute("class","button");p=document.createElement("div");p.normal="bb-pb-image-list-item-button-border";p.setAttribute("class",p.normal);h.appendChild(p);d=document.createElement("div");d.setAttribute("class","bb-pb-image-list-item-button-inner bb-image-list-item-chevron-light");p.appendChild(d)}else{l=document.createElement("div");l.innerHTML=i;l.className="accent-text";e.accentDiv=l;u.appendChild(l)}u.setAttribute("class",u.normal);f=document.createElement("div");f.className="description";e.descriptionDiv=f;u.appendChild(f);if(n.length==0){n=" ";f.style.visibilty="hidden";a.style["margin-top"]="19px";if(l){l.style["margin-top"]="-23px"}if(this.listStyle=="arrowlist"){h.style["margin-top"]="-69px"}}f.innerHTML=n;e.remove=function(){var e=this.parentNode,t=e.items.indexOf(this);this.parentNode.removeChild(this);e.items.splice(t,1);if(bb.scroller){bb.scroller.refresh()}};e.remove=e.remove.bind(e);e.trappedClick=e.onclick;e.onclick=undefined;e.outerElement=this;e.addEventListener("click",function(e){this.outerElement.selected=this;if(this.trappedClick){this.trappedClick()}},false);e.getTitle=function(){return this.titleDiv.innerHTML};e.getTitle=e.getTitle.bind(e);e.getDescription=function(){return this.descriptionDiv.innerHTML};e.getDescription=e.getDescription.bind(e);e.getAccentText=function(){return this.accentDiv?this.accentDiv.innerHTML:undefined};e.getAccentText=e.getAccentText.bind(e);e.getImage=function(){return this.img?this.img.getAttribute("src"):undefined};e.getImage=e.getImage.bind(e)}}};r.styleItem=r.styleItem.bind(r);r.appendItem=function(e){this.styleItem(e);this.appendChild(e);this.items.push(e);if(bb.scroller){bb.scroller.refresh()}};r.appendItem=r.appendItem.bind(r);r.refresh=function(e){if(!e||!e.length||e.length<=0)return;var t,n,r=document.createElement("div");this.items=[];for(t=0;t<e.length;t++){n=e[t];this.styleItem(n);this.items.push(n);r.appendChild(n)}this.innerHTML="";this.appendChild(r)};r.refresh=r.refresh.bind(r);r.insertItemBefore=function(e,t){this.styleItem(e);this.insertBefore(e,t);this.items.splice(this.items.indexOf(t),0,e);if(bb.scroller){bb.scroller.refresh()}};r.insertItemBefore=r.insertItemBefore.bind(r);r.getItems=function(){var e,t=[];for(e=0;e<this.items.length;e++){t.push(this.items[e])}return t};r.getItems=r.getItems.bind(r);r.clear=function(){this.items=[];r.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};r.clear=r.clear.bind(r);r.show=function(){this.style.display="block";if(bb.scroller){bb.scroller.refresh()}};r.show=r.show.bind(r);r.hide=function(){this.style.display="none";if(bb.scroller){bb.scroller.refresh()}};r.hide=r.hide.bind(r);r.remove=function(){this.parentNode.removeChild(this);if(bb.scroller){bb.scroller.refresh()}};r.remove=r.remove.bind(r);i=r.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var s;for(n=0;n<i.length;n++){s=i[n];r.styleItem(s);r.items.push(s)}}}};_bbPlayBook_roundPanel={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.setAttribute("class","bb-playbook-round-panel");var r=n.querySelectorAll("[data-bb-type=panel-header]");for(var i=0;i<r.length;i++){if(bb.device.isHiRes){r[i].setAttribute("class","bb-hires-panel-header")}else{r[i].setAttribute("class","bb-lowres-panel-header")}}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bbPlayBook_textInput={apply:function(e){var t,n,r;for(t=0;t<e.length;t++){n=e[t];r="";if(n.hasAttribute("class")){r=n.getAttribute("class")}n.normal=r+" bb-pb-input";n.focused=r+" bb-pb-input-focused bb-pb-input";n.setAttribute("class",n.normal);n.isFocused=false;n.clickCount=0;n.addEventListener("focus",function(){if(this.readOnly==false){this.setAttribute("class",this.focused);this.isFocused=true;this.clickCount=0}},false);n.addEventListener("blur",function(){this.setAttribute("class",this.normal);this.isFocused=false;this.removeEventListener("click",n.handleDeleteClick,false)},false);n.addEventListener("click",function(e){if(this.clickCount==0){this.clickCount++;return}if(e.target==this&&this.isFocused){var t=false;if(e.clientX>this.clientWidth-40&&this.readOnly==false){t=true}if(t){this.value=""}}},false)}}};_bb_5_6_7_imageList={apply:function(e){var t,n,r,i;for(var t=0;t<e.length;t++){r=e[t];r.items=[];r.hideImages=r.hasAttribute("data-bb-images")?r.getAttribute("data-bb-images").toLowerCase()=="none":false;if(!r.hideImages){r.imagePlaceholder=r.hasAttribute("data-bb-image-placeholder")?r.getAttribute("data-bb-image-placeholder"):undefined}r.headerJustify=r.hasAttribute("data-bb-header-justify")?r.getAttribute("data-bb-header-justify").toLowerCase():"center";r.listStyle=r.hasAttribute("data-bb-style")?r.getAttribute("data-bb-style").toLowerCase():"default";if(bb.device.isHiRes){r.setAttribute("class","bb-hires-image-list")}else{r.setAttribute("class","bb-lowres-image-list")}r.styleItem=function(e){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d=bb.device.isHiRes?"hires":"lowres";if(e.hasAttribute("data-bb-type")){t=e.getAttribute("data-bb-type").toLowerCase();n=e.innerHTML;r="";if(e.hasAttribute("data-bb-accent-text")){r=e.getAttribute("data-bb-accent-text")}if(t=="header"){i="bb-"+d+"-image-list-header";s="bb-"+d+"-image-list-header-hover";if(this.headerJustify=="left"){i=i+" bb-"+d+"-image-list-header-left";s=s+" bb-"+d+"-image-list-header-left"}else if(this.headerJustify=="right"){i=i+" bb-"+d+"-image-list-header-right";s=s+" bb-"+d+"-image-list-header-right"}else{i=i+" bb-"+d+"-image-list-header-center";s=s+" bb-"+d+"-image-list-header-center"}e.normal=i;e.highlight=s;e.innerHTML="<p>"+n+"</p>";e.setAttribute("x-blackberry-focusable","true");e.setAttribute("class",i);e.setAttribute("onmouseover","this.setAttribute('class',this.highlight)");e.setAttribute("onmouseout","this.setAttribute('class',this.normal)")}else if(t=="item"){e.innerHTML="";e.setAttribute("class","bb-"+d+"-image-list-item");e.setAttribute("onmouseover","this.setAttribute('class','bb-"+d+"-image-list-item bb-"+d+"-image-list-item-hover')");e.setAttribute("onmouseout","this.setAttribute('class','bb-"+d+"-image-list-item')");e.setAttribute("x-blackberry-focusable","true");if(!this.hideImages){l=document.createElement("img");e.img=l;if(this.imagePlaceholder){l.placeholder=this.imagePlaceholder;l.src=e.hasAttribute("data-bb-img")?e.getAttribute("data-bb-img"):this.imagePlaceholder;l.onerror=function(){if(this.src==this.placeholder)return;this.src=this.placeholder}}else{l.setAttribute("src",e.getAttribute("data-bb-img"))}e.appendChild(l)}o=document.createElement("div");e.appendChild(o);if(this.hideImages){o.normal="bb-"+d+"-image-list-details bb-"+d+"-image-list-noimage"}else{o.normal="bb-"+d+"-image-list-details"}u=document.createElement("div");u.innerHTML=e.getAttribute("data-bb-title");u.className="title";e.titleDiv=u;o.appendChild(u);if(this.listStyle=="arrowlist"){o.normal=o.normal+" details-button-margin";c=document.createElement("div");e.appendChild(c);e.btn=c;c.setAttribute("class","button");h=document.createElement("div");h.normal="bb-"+d+"-image-list-item-button-border";h.setAttribute("class",h.normal);c.appendChild(h);p=document.createElement("div");p.setAttribute("class","bb-"+d+"-image-list-item-button-inner bb-image-list-item-chevron-light");h.appendChild(p)}else{f=document.createElement("div");f.innerHTML=r;f.className="accent-text";e.accentDiv=f;o.appendChild(f)}o.setAttribute("class",o.normal);a=document.createElement("div");a.className="description";e.descriptionDiv=a;o.appendChild(a);if(n.length==0){n=" ";a.style.visibilty="hidden";u.style["margin-top"]=bb.device.isHiRes?"14px":"18px";if(f){f.style["margin-top"]=bb.device.isHiRes?"-32px":"-25px"}if(this.listStyle=="arrowlist"){c.style["margin-top"]=bb.device.isHiRes?"-73px":"-70px"}}a.innerHTML=n;e.remove=function(){var e=this.parentNode,t=e.items.indexOf(this);this.parentNode.removeChild(this);e.items.splice(t,1);if(bb.scroller){bb.scroller.refresh()}};e.remove=e.remove.bind(e);e.trappedClick=e.onclick;e.onclick=undefined;e.outerElement=this;e.addEventListener("click",function(e){this.outerElement.selected=this;if(this.trappedClick){this.trappedClick()}},false);e.getTitle=function(){return this.titleDiv.innerHTML};e.getTitle=e.getTitle.bind(e);e.getDescription=function(){return this.descriptionDiv.innerHTML};e.getDescription=e.getDescription.bind(e);e.getAccentText=function(){return this.accentDiv?this.accentDiv.innerHTML:undefined};e.getAccentText=e.getAccentText.bind(e);e.getImage=function(){return this.img?this.img.getAttribute("src"):undefined};e.getImage=e.getImage.bind(e)}}};r.styleItem=r.styleItem.bind(r);r.appendItem=function(e){this.styleItem(e);this.appendChild(e);this.items.push(e);if(bb.scroller){bb.scroller.refresh()}};r.appendItem=r.appendItem.bind(r);r.refresh=function(e){if(!e||!e.length||e.length<=0)return;var t,n,r=document.createElement("div");this.items=[];for(t=0;t<e.length;t++){n=e[t];this.styleItem(n);this.items.push(n);r.appendChild(n)}this.innerHTML="";this.appendChild(r)};r.refresh=r.refresh.bind(r);r.insertItemBefore=function(e,t){this.styleItem(e);this.insertBefore(e,t);this.items.splice(this.items.indexOf(t),0,e);if(bb.scroller){bb.scroller.refresh()}};r.insertItemBefore=r.insertItemBefore.bind(r);r.getItems=function(){var e,t=[];for(e=0;e<this.items.length;e++){t.push(this.items[e])}return t};r.getItems=r.getItems.bind(r);r.clear=function(){this.items=[];r.innerHTML="";if(bb.scroller){bb.scroller.refresh()}};r.clear=r.clear.bind(r);r.show=function(){this.style.display="block";if(bb.scroller){bb.scroller.refresh()}};r.show=r.show.bind(r);r.hide=function(){this.style.display="none";if(bb.scroller){bb.scroller.refresh()}};r.hide=r.hide.bind(r);r.remove=function(){this.parentNode.removeChild(this);if(bb.scroller){bb.scroller.refresh()}};r.remove=r.remove.bind(r);i=r.querySelectorAll("[data-bb-type=item], [data-bb-type=header]");var s;for(n=0;n<i.length;n++){s=i[n];r.styleItem(s);r.items.push(s)}}}};_bb_5_6_7_roundPanel={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];n.setAttribute("class","bb-round-panel");if(n.hasChildNodes()){var r=[],i=n.childNodes.length;for(var s=0;s<i;s++){r.push(n.childNodes[s])}for(var s=i-1;s>=0;s--){n.removeChild(n.childNodes[s])}var o=document.createElement("div");o.setAttribute("class","bb-round-panel-top-left bb-round-panel-background ");n.appendChild(o);o=document.createElement("div");o.setAttribute("class","bb-round-panel-top-right bb-round-panel-background ");n.appendChild(o);var u=document.createElement("div");u.setAttribute("class","bb-round-panel-inside");n.appendChild(u);o=document.createElement("div");o.setAttribute("class","bb-round-panel-bottom-left bb-round-panel-background ");n.appendChild(o);o=document.createElement("div");o.setAttribute("class","bb-round-panel-bottom-right bb-round-panel-background ");n.appendChild(o);for(var s=0;s<r.length;s++){u.appendChild(r[s])}}var a=n.querySelectorAll("[data-bb-type=panel-header]");for(var s=0;s<a.length;s++){a[s].setAttribute("class","bb-lowres-panel-header")}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bb_6_7_button={apply:function(e){for(var t=0;t<e.length;t++){bb.button.style(e[t])}},style:function(e){var t=e.hasAttribute("data-bb-disabled"),n="bb-bb7-button",r="bb-bb7-button-highlight";e.stretched=false;e.enabled=!t;if(t){n="bb-bb7-button-disabled";e.removeAttribute("data-bb-disabled")}if(bb.device.isHiRes){n=n+" bb-bb7-button-hires";r=r+" bb-bb7-button-hires"}else{n=n+" bb-bb7-button-lowres";r=r+" bb-bb7-button-lowres"}if(e.hasAttribute("data-bb-style")){var i=e.getAttribute("data-bb-style");if(i=="stretch"){e.stretched=true;n=n+" button-stretch";r=r+" button-stretch"}}e.highlight=r;e.normal=n;e.setAttribute("class",n);if(!t){e.setAttribute("x-blackberry-focusable","true");e.onmouseover=function(){this.setAttribute("class",this.highlight)};e.onmouseout=function(){this.setAttribute("class",this.normal)}}e.trappedClick=e.onclick;e.onclick=undefined;if(e.trappedClick!==null){e.addEventListener("click",function(e){if(this.enabled){this.trappedClick()}},false)}e.setCaption=function(e){this.innerHTML=e};e.setCaption=e.setCaption.bind(e);e.setImage=function(e){};e.setImage=e.setImage.bind(e);e.enable=function(){if(this.enabled)return;this.setAttribute("class",n);this.setAttribute("x-blackberry-focusable","true");this.onmouseover=function(){this.setAttribute("class",this.highlight)};this.onmouseout=function(){this.setAttribute("class",this.normal)};this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!this.enabled)return;var e="bb-bb7-button-disabled";if(bb.device.isHiRes){e=e+" bb-bb7-button-hires"}else{e=e+" bb-bb7-button-lowres"}if(this.hasAttribute("data-bb-style")){var t=this.getAttribute("data-bb-style");if(t=="stretch"){e=e+" button-stretch";r=r+" button-stretch"}}this.setAttribute("class",e);this.removeAttribute("x-blackberry-focusable");this.onmouseover=null;this.onmouseout=null;this.enabled=false};e.disable=e.disable.bind(e);e.show=function(){this.style.display=this.stretched?"block":"inline-block"};e.show=e.show.bind(e);e.hide=function(){this.style.display="none"};e.hide=e.hide.bind(e);e.remove=function(){this.parentNode.removeChild(this);bb.refresh()};e.remove=e.remove.bind(e);return e}};_bb_6_7_PlayBook_dropdown={apply:function(e){for(var t=0;t<e.length;t++){bb.dropdown.style(e[t])}},style:function(e){var t=e.getElementsByTagName("option"),n="",r,i,s=!e.hasAttribute("disabled");if(bb.device.isPlayBook){r="ontouchstart";i="ontouchend"}else{r="onmouseover";i="onmouseout"}e.style.display="none";e.stretch=false;e.enabled=s;if(t.length>0){n=t[0].innerHTML}for(var o=0;o<t.length;o++){if(t[o].hasAttribute("selected")){n=t[o].innerHTML;break}}var u=document.createElement("div");u.innerHTML='<div data-bb-type="caption"><span>'+n+"</span></div>";e.dropdown=u;var a="bb-bb7-dropdown",f="bb-bb7-dropdown-highlight";if(bb.device.isHiRes){a=a+" bb-bb7-dropdown-hires";f=f+" bb-bb7-dropdown-hires"}else{a=a+" bb-bb7-dropdown-lowres";f=f+" bb-bb7-dropdown-lowres"}if(e.hasAttribute("data-bb-style")){var l=e.getAttribute("data-bb-style");if(l=="stretch"){e.stretch=true;a=a+" dropdown-stretch";f=f+" dropdown-stretch"}}u.setAttribute("data-bb-type","dropdown");if(e.enabled){u.setAttribute("class",a)}else{u.setAttribute("class",a+" bb-bb7-dropdown-disabled")}u.setAttribute("x-blackberry-focusable","true");u.inEvent="this.setAttribute('class','"+f+"')";u.outEvent="this.setAttribute('class','"+a+"')";if(e.parentNode){e.parentNode.insertBefore(u,e)}u.appendChild(e);u.doclick=function(){var e=this.getElementsByTagName("select")[0];if(bb.device.isPlayBook||bb.device.isRipple){var t=document.createElement("div");t.setAttribute("id","ripple-dropdown-overlay");t.style["position"]="absolute";t.style["left"]="0px";t.style["top"]=document.body.scrollTop+"px";t.style["width"]="100%";t.style["height"]="100%";t.style["z-index"]="1000000";t.onclick=function(){if(this.parentNode!==null){this.parentNode.removeChild(this)}};var n=document.createElement("div");if(bb.device.isHiRes){n.setAttribute("class","ripple-dropdown-dialog bb-hires-screen")}else{n.setAttribute("class","ripple-dropdown-dialog")}t.appendChild(n);n.onclick=function(){this.parentNode.parentNode.removeChild(this.parentNode)};for(var r=0;r<e.options.length;r++){var i=e.options[r],s=document.createElement("div");n.appendChild(s);var o=document.createElement("div");if(i.selected){o.setAttribute("class","item selected");s.setAttribute("class","backgroundHighlight backgroundSelected")}else{o.setAttribute("class","item");s.setAttribute("class","backgroundHighlight")}o.innerHTML="<span>"+i.text+"</span>";o.setAttribute("x-blackberry-focusable","true");o.setAttribute("data-bb-index",r);o.dropdown=this;o.onclick=function(){var e=this.getAttribute("data-bb-index");var t=this.dropdown.getElementsByTagName("select")[0];if(t){t.setSelectedItem(e)}};s.appendChild(o)}var u=e.options.length*45+20,a=window.innerHeight-80;if(u>a){u=a;n.style.height=a+"px"}var f=window.innerHeight/2-u/2;n.style.top=f+"px";document.body.appendChild(t)}else{var l=[];for(var r=0;r<e.options.length;r++){l[r]={label:e.options[r].text,selected:r==e.selectedIndex,enabled:true,type:"option"}}try{blackberry.ui.dialog.selectAsync(false,l,function(t){if(t.length>0&&t[0]<e.options.length){e.setSelectedItem(t[0])}})}catch(c){console.log("Exception in selectAsync: "+c)}}};if(e.enabled){u.onclick=u.doclick;u.setAttribute(r,u.inEvent);u.setAttribute(i,u.outEvent)}e.setSelectedItem=function(e){var t=this.dropdown.getElementsByTagName("select")[0];if(t&&t.selectedIndex!=e){t.selectedIndex=e;var n=this.dropdown.querySelectorAll("[data-bb-type=caption]")[0];if(n){n.innerHTML="<span>"+t.options[e].text+"</span>"}var r=document.createEvent("HTMLEvents");r.initEvent("change",false,true);t.dispatchEvent(r)}};e.setSelectedText=function(e){for(var t=0;t<this.options.length;t++){if(this.options[t].text==e){this.setSelectedItem(t);return}}};e.setSelectedText=e.setSelectedText.bind(e);e.fireEvent=function(){var e=document.createEvent("HTMLEvents");e.initEvent("change",false,true);this.dispatchEvent(e)};e.fireEvent=e.fireEvent.bind(e);e.enable=function(){if(this.enabled)return;this.dropdown.onclick=this.dropdown.doclick;this.dropdown.setAttribute(r,u.inEvent);this.dropdown.setAttribute(i,u.outEvent);this.dropdown.setAttribute("class",a);this.removeAttribute("disabled");this.enabled=true};e.enable=e.enable.bind(e);e.disable=function(){if(!e.enabled)return;this.dropdown.onclick=null;this.dropdown.removeAttribute(r);this.dropdown.removeAttribute(i);this.dropdown.setAttribute("class",a+" bb-bb7-dropdown-disabled");this.enabled=false;this.setAttribute("disabled","disabled")};e.disable=e.disable.bind(e);e.show=function(){this.dropdown.style.display=this.stretch?"block":"table-cell";bb.refresh()};e.show=e.show.bind(e);e.hide=function(){this.dropdown.style.display="none";bb.refresh()};e.hide=e.hide.bind(e);e.remove=function(){this.dropdown.parentNode.removeChild(this.dropdown);bb.refresh()};e.remove=e.remove.bind(e);e.refresh=function(){var e=this.getElementsByTagName("option"),t,n="";if(e.length>0){n=e[0].innerHTML}for(var r=0;r<e.length;r++){if(e[r].hasAttribute("selected")){n=e[r].innerHTML;break}}t=this.dropdown.querySelectorAll("[data-bb-type=caption]")[0];if(t){t.innerHTML="<span>"+n+"</span>"}};e.refresh=e.refresh.bind(e);e.setCaption=function(e){if(console){console.log("WARNING: setCaption is not supported on BlackBerry 5/6/7/PlayBook")}};e.setCaption=e.setCaption.bind(e);return u}};_bb_6_7_PlayBook_labelControlContainers={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];var r=n.querySelectorAll("[data-bb-type=row]");if(r.length>0){var i=document.createElement("table");i.setAttribute("class","bb-bb7-label-control-rows");n.insertBefore(i,r[0]);for(var s=0;s<r.length;s++){var o=r[s],u=document.createElement("tr");i.appendChild(u);var a=document.createElement("td");u.appendChild(a);var f=o.querySelectorAll("[data-bb-type=label]")[0];o.removeChild(f);a.appendChild(f);var l=document.createElement("td");u.appendChild(l);var c=o.querySelectorAll("[data-bb-type=button],input,[data-bb-type=dropdown],textarea")[0];o.removeChild(c);l.appendChild(c);n.removeChild(o);var h=c.getAttribute("data-bb-type");if(h=="button"||h=="dropdown"){c.style.float="right"}else if(c.tagName=="INPUT"){c.style.width="100%"}}}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n)}}};_bb_6_7_PlayBook_pillButtons={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t],r="bb-bb7-pill-buttons",i="";if(bb.device.isHiRes){r=r+" bb-bb7-pill-buttons-hires";i="bb-bb7-pill-button-hires"}else{r=r+" bb-bb7-pill-buttons-lowres";i="bb-bb7-pill-button-lowres"}n.setAttribute("class",r);var s,o,u=n.querySelectorAll("[data-bb-type=pill-button]"),a=Math.floor(98/u.length),f=102-a*u.length;if(bb.device.isPlayBook){s="ontouchstart";o="ontouchend"}else{s="onmouseover";o="onmouseout"}n.style["padding-left"]=f+"%";n.style["padding-right"]=f+"%";for(var l=0;l<u.length;l++){var c=u[l];c.setAttribute("x-blackberry-focusable","true");if(l===0){if(c.getAttribute("data-bb-selected")=="true"){c.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+i)}else{c.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-left "+i);c.setAttribute(s,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+i+"')");c.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-left "+i+"')")}}else if(l==u.length-1){if(c.getAttribute("data-bb-selected")=="true"){c.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+i)}else{c.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-right "+i);c.setAttribute(s,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+i+"')");c.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-right "+i+"')")}}else{if(c.getAttribute("data-bb-selected")=="true"){c.setAttribute("class","bb-bb7-pill-button-highlight "+i)}else{c.setAttribute("class","bb-bb7-pill-button "+i);c.setAttribute(s,"this.setAttribute('class','bb-bb7-pill-button-highlight "+i+"')");c.setAttribute(o,"this.setAttribute('class','bb-bb7-pill-button "+i+"')")}}c.style.width=a+"%";c.addEventListener("click",function(e){var t,n,r=this.parentNode.querySelectorAll("[data-bb-type=pill-button]");if(bb.device.isPlayBook){t="ontouchstart";n="ontouchend"}else{t="onmouseover";n="onmouseout"}for(var s=0;s<r.length;s++){var o=r[s];if(s===0){if(o==this){o.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+i);o.onmouseover=null;o.onmouseout=null}else{o.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-left "+i);o.setAttribute(t,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-left "+i+"')");o.setAttribute(n,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-left "+i+"')")}}else if(s==r.length-1){if(o==this){o.setAttribute("class","bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+i);o.onmouseover=null;o.onmouseout=null}else{o.setAttribute("class","bb-bb7-pill-button bb-bb7-pill-button-right "+i);o.setAttribute(t,"this.setAttribute('class','bb-bb7-pill-button-highlight bb-bb7-pill-button-right "+i+"')");o.setAttribute(n,"this.setAttribute('class','bb-bb7-pill-button bb-bb7-pill-button-right "+i+"')")}}else{if(o==this){o.setAttribute("class","bb-bb7-pill-button-highlight "+i);o.onmouseover=null;o.onmouseout=null}else{o.setAttribute("class","bb-bb7-pill-button "+i);o.setAttribute(t,"this.setAttribute('class','bb-bb7-pill-button-highlight "+i+"')");o.setAttribute(n,"this.setAttribute('class','bb-bb7-pill-button "+i+"')")}}}},false)}n.show=function(){this.style.display="block";bb.refresh()};n.show=n.show.bind(n);n.hide=function(){this.style.display="none";bb.refresh()};n.hide=n.hide.bind(n);n.remove=function(){this.parentNode.removeChild(this);bb.refresh()};n.remove=n.remove.bind(n);n.getButtons=function(){var e=this.querySelectorAll("[data-bb-type=pill-button]");var t=new Array;for(var n=0;n<e.length;n++){t[n]=e[n].innerHTML}return t};n.getButtons=n.getButtons.bind(n)}}};_bb_6_7_textInput={apply:function(e){for(var t=0;t<e.length;t++){var n=e[t];var r=n.getAttribute("class");r=r+" bb-bb7-input";if(bb.device.isHiRes){r=r+" bb-bb7-input-hires"}else{r=r+" bb-bb7-input-lowres"}n.setAttribute("class",r)}}};_bb_PlayBook_10_scrollPanel={apply:function(e){var t,n,r,i,s,o;for(t=0;t<e.length;t++){r=e[t];o=[];s=document.createElement("div");r.appendChild(s);for(n=0;n<r.childNodes.length-1;n++){o.push(r.childNodes[n])}for(n=0;n<o.length;n++){s.appendChild(o[n])}if(bb.device.isPlayBook){r.scroller=new iScroll(r,{vScrollbar:true,hideScrollbar:true,fadeScrollbar:true,onBeforeScrollStart:function(e){if(bb.scroller){bb.scroller.disable()}e.preventDefault()},onBeforeScrollEnd:function(e){if(bb.scroller){bb.scroller.enable()}},onScrollEnd:function(e){evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)},onScrollMove:function(e){if(r.onscroll){r.onscroll(e)}evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)}})}else{r.scroller=null;r.style["-webkit-overflow-scrolling"]="-blackberry-touch";r.addEventListener("scroll",function(){evt=document.createEvent("Events");evt.initEvent("bbuiscrolling",true,true);document.dispatchEvent(evt)},false)}r.show=function(){this.style.display="block";bb.refresh()};r.show=r.show.bind(r);r.hide=function(){this.style.display="none";bb.refresh()};r.hide=r.hide.bind(r);r.remove=function(){this.parentNode.removeChild(this);bb.refresh()};r.remove=r.remove.bind(r);r.refresh=function(){if(this.scroller){this.scroller.refresh()}};r.refresh=r.refresh.bind(r);setTimeout(r.refresh,0);r.scrollTo=function(e,t){if(this.scroller){this.scroller.scrollTo(e,t)}else{this.scrollTop=e}};r.scrollTo=r.scrollTo.bind(r);r.scrollToElement=function(e){if(this.scroller){this.scroller.scrollToElement(e)}else{if(!e)return;var t=0,n=e;if(n.offsetParent){do{t+=n.offsetTop}while(n=n.offsetParent)}this.scrollTo(t,0)}};r.scrollToElement=r.scrollToElement.bind(r);r.setAttribute("class","bb-scroll-panel")}}}